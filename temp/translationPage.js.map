{"version":3,"file":"translationPage.js","mappings":"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CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC,GAAG;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,qBAAM,gBAAgB,qBAAM,IAAI,qBAAM,sBAAsB,qBAAM;;AAE1F;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,WAAW,GAAG;AACd,WAAW,SAAS;AACpB;AACA,aAAa,GAAG;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,eAAe;AAC1B,YAAY,QAAQ;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACjbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB,qBAAM,gBAAgB,qBAAM,IAAI,qBAAM,sBAAsB,qBAAM;;AAE1F;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,GAAG;AACd,WAAW,OAAO;AAClB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,GAAG;AACd,WAAW,UAAU;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,kBAAkB;AAClB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,sBAAsB;AACjC,aAAa,QAAQ;AACrB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC/8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,qBAAM,gBAAgB,qBAAM,IAAI,qBAAM,sBAAsB,qBAAM;;AAE1F;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,GAAG;AACd,WAAW,OAAO;AAClB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,sBAAsB;AACjC,aAAa,QAAQ;AACrB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,WAAW;AACX;AACA;AACA,6BAA6B;AAC7B,CAAC;;AAED;;;;;;;;;;;;;ACtfA;;;;;;;;;;;;ACAa;;AAEb,QAAQ,mBAAO,CAAC,4HAAW;AAC3B,IAAI,KAAqC,EAAE,EAG1C,CAAC;AACF;AACA,EAAE,kBAAkB;AACpB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,EAAE,mBAAmB;AACrB;AACA;AACA;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","sources":["webpack://translator-extensions/./src/anki/AnkiConnection.ts","webpack://translator-extensions/./src/anki/index.ts","webpack://translator-extensions/./src/anki/types/index.ts","webpack://translator-extensions/./src/anki/utils/createAnkiResponse.ts","webpack://translator-extensions/./src/anki/utils/helper.ts","webpack://translator-extensions/./src/anki/utils/index.ts","webpack://translator-extensions/./src/configuration/command.ts","webpack://translator-extensions/./src/configuration/index.ts","webpack://translator-extensions/./src/configuration/modelFieldNameMap.ts","webpack://translator-extensions/./src/dictionary/Collins_en_cn/index.ts","webpack://translator-extensions/./src/dictionary/Collins_en_cn/translatePhrase.ts","webpack://translator-extensions/./src/dictionary/Collins_en_cn/translateSentence.ts","webpack://translator-extensions/./src/dictionary/Collins_en_cn/translateWord.ts","webpack://translator-extensions/./src/dictionary/index.ts","webpack://translator-extensions/./src/dictionary/utils/Cache.ts","webpack://translator-extensions/./src/dictionary/utils/determine.ts","webpack://translator-extensions/./src/dictionary/utils/errorData.ts","webpack://translator-extensions/./src/dictionary/utils/index.ts","webpack://translator-extensions/./src/extensions-api/browserAction.ts","webpack://translator-extensions/./src/extensions-api/commands.ts","webpack://translator-extensions/./src/extensions-api/contextMenus.ts","webpack://translator-extensions/./src/extensions-api/index.ts","webpack://translator-extensions/./src/extensions-api/runtime.ts","webpack://translator-extensions/./src/extensions-api/storage.ts","webpack://translator-extensions/./src/extensions-api/tabs.ts","webpack://translator-extensions/./src/extensions-api/types/index.ts","webpack://translator-extensions/./src/translation-page/components/AnkiButton.tsx","webpack://translator-extensions/./src/translation-page/components/AudioButton.tsx","webpack://translator-extensions/./src/translation-page/components/DisplayContainer.tsx","webpack://translator-extensions/./src/translation-page/components/ErrorComponent.tsx","webpack://translator-extensions/./src/translation-page/components/HistoryContainer.tsx","webpack://translator-extensions/./src/translation-page/components/Loading.tsx","webpack://translator-extensions/./src/translation-page/components/Phrase.tsx","webpack://translator-extensions/./src/translation-page/components/Sentence.tsx","webpack://translator-extensions/./src/translation-page/components/View.tsx","webpack://translator-extensions/./src/translation-page/components/Word.tsx","webpack://translator-extensions/./src/translation-page/hooks/context.tsx","webpack://translator-extensions/./src/translation-page/hooks/index.ts","webpack://translator-extensions/./src/translation-page/main.tsx","webpack://translator-extensions/./src/translation-page/types/index.ts","webpack://translator-extensions/./src/translation-page/utils/History.ts","webpack://translator-extensions/./src/translation-page/utils/decodeBTag.tsx","webpack://translator-extensions/./src/translation-page/utils/index.ts","webpack://translator-extensions/./src/translation-page/utils/transform.ts","webpack://translator-extensions/./src/user-operation/CursorListener.ts","webpack://translator-extensions/./src/user-operation/HotKeyListener.ts","webpack://translator-extensions/./src/user-operation/SearchBox.ts","webpack://translator-extensions/./src/user-operation/SelectionListener.ts","webpack://translator-extensions/./src/user-operation/index.ts","webpack://translator-extensions/./src/user-operation/utils/UserSelectHandler.ts","webpack://translator-extensions/./src/user-operation/utils/getRangeFromPoint.ts","webpack://translator-extensions/./src/user-operation/utils/getSelectionText.ts","webpack://translator-extensions/./src/user-operation/utils/index.ts","webpack://translator-extensions/./src/user-operation/utils/isContentEditable.ts","webpack://translator-extensions/./src/user-operation/utils/verifySearchContainer.ts","webpack://translator-extensions/./src/utils/Messenger.ts","webpack://translator-extensions/./src/utils/alert.ts","webpack://translator-extensions/./src/utils/index.ts","webpack://translator-extensions/./src/utils/validateText.ts","webpack://translator-extensions/./node_modules/.pnpm/registry.npmmirror.com+lodash.lowercase@4.3.0/node_modules/lodash.lowercase/index.js","webpack://translator-extensions/./node_modules/.pnpm/registry.npmmirror.com+lodash.omit@4.5.0/node_modules/lodash.omit/index.js","webpack://translator-extensions/./node_modules/.pnpm/registry.npmmirror.com+lodash.pick@4.4.0/node_modules/lodash.pick/index.js","webpack://translator-extensions/./src/index.css?bcd7","webpack://translator-extensions/./node_modules/.pnpm/registry.npmmirror.com+react-dom@18.2.0_react@18.2.0/node_modules/react-dom/client.js","webpack://translator-extensions/./node_modules/.pnpm/registry.npmmirror.com+immer@9.0.15/node_modules/immer/dist/immer.esm.mjs"],"sourcesContent":["/**\r\n * 这是用于调用 AnkiConnection 提供的接口的封装\r\n */\r\nimport omit from \"lodash.omit\";\r\nimport { getStorageByArray, onStorageChange } from \"@/extensions-api\";\r\nimport { extractPromiseType } from \"@/types\";\r\nimport {\r\n  isAnkiResponse,\r\n  createDuplicateResponse,\r\n  createForgottenResponse,\r\n  createAnkiErrorResponse,\r\n  createOldVersionResponse,\r\n  createSuccessAnkiResponse,\r\n  createConfigErrorResponse,\r\n  createDisconnectionResponse,\r\n  createFirstAddSuccessResponse,\r\n  createUnexpectedErrorResponse,\r\n  getConfigName,\r\n  getMediaFields,\r\n  getNotMediaFields,\r\n  getDuplicateConfigName,\r\n} from \"./utils\";\r\n//声明\r\nimport { Storage } from \"@/extensions-api\";\r\nimport { NoteData } from \"@/translation-page\";\r\nimport { AnkiResponse, NoteType, AddNoteParams } from \"./types\";\r\n\r\n//值必须是小写，且必须是这个值，不应该修改，这是AnkiConnection所要求的\r\nenum Action {\r\n  Version = \"version\",\r\n  AddNote = \"addNote\",\r\n  FindCards = \"findCards\",\r\n  DeckNames = \"deckNames\",\r\n  ModelNames = \"modelNames\",\r\n  RelearnCards = \"relearnCards\",\r\n  ModelFieldNames = \"modelFieldNames\",\r\n  UpdateNoteFields = \"updateNoteFields\",\r\n}\r\n\r\ntype AnkiConfig = Pick<\r\n  Storage,\r\n  | \"wordConfig\"\r\n  | \"phraseConfig\"\r\n  | \"sentenceConfig\"\r\n  | \"ankiConnectionURL\"\r\n  | \"checkWordDuplicate\"\r\n  | \"checkPhraseDuplicate\"\r\n  | \"checkSentenceDuplicate\"\r\n>;\r\n\r\ntype ReturnPromiseType<T extends (...args: any[]) => Promise<any>> = T extends (\r\n  ...args: any[]\r\n) => Promise<infer R>\r\n  ? R\r\n  : never;\r\n\r\ntype flatAnkiResponse<T extends (...args: any[]) => Promise<any>> =\r\n  ReturnPromiseType<T> extends AnkiResponse<any>\r\n    ? Promise<ReturnPromiseType<T>>\r\n    : Promise<AnkiResponse<ReturnPromiseType<T>>>;\r\n\r\nexport class AnkiConnection {\r\n  version: number;\r\n  ankiConfig: AnkiConfig;\r\n\r\n  addNote;\r\n  getVersion;\r\n  getDeckNames;\r\n  relearnCards;\r\n  getModelNames;\r\n  getModelFieldNames;\r\n\r\n  constructor() {\r\n    this.version = 6; //版本不同，返回值不同，不能够随意修改\r\n    this.ankiConfig = {} as AnkiConfig; //后面会进行初始化赋值\r\n\r\n    //初始化AnkiConfig\r\n    //值是必定存在的，因为 getStorage 内部会保证在没值的时候使用默认值，而默认值设定了相应的值\r\n    getStorageByArray(\r\n      [\r\n        \"wordConfig\",\r\n        \"phraseConfig\",\r\n        \"sentenceConfig\",\r\n        \"ankiConnectionURL\",\r\n        \"checkWordDuplicate\",\r\n        \"checkPhraseDuplicate\",\r\n        \"checkSentenceDuplicate\",\r\n      ],\r\n      (config) => {\r\n        this.updateAnkiConfig<AnkiConfig>(config as AnkiConfig); //初始化时，必须包括所有的 AnkiConfig 配置\r\n      }\r\n    );\r\n    //监听用户配置更新\r\n    onStorageChange({\r\n      wordConfig: (_, wordConfig) => this.updateAnkiConfig({ wordConfig }),\r\n      phraseConfig: (_, phraseConfig) =>\r\n        this.updateAnkiConfig({ phraseConfig }),\r\n      sentenceConfig: (_, sentenceConfig) =>\r\n        this.updateAnkiConfig({ sentenceConfig }),\r\n      ankiConnectionURL: (_, ankiConnectionURL) =>\r\n        this.updateAnkiConfig({ ankiConnectionURL }),\r\n      checkPhraseDuplicate: (_, checkPhraseDuplicate) =>\r\n        this.updateAnkiConfig({ checkPhraseDuplicate }),\r\n      checkSentenceDuplicate: (_, checkSentenceDuplicate) =>\r\n        this.updateAnkiConfig({ checkSentenceDuplicate }),\r\n      checkWordDuplicate: (_, checkWordDuplicate) =>\r\n        this.updateAnkiConfig({ checkWordDuplicate }),\r\n    });\r\n\r\n    this.addNote = this._addErrorCatch(this._addNote);\r\n    this.getVersion = this._addErrorCatch(this._getVersion);\r\n    this.getDeckNames = this._addErrorCatch(this._getDeckNames);\r\n    this.relearnCards = this._addErrorCatch(this._relearnCards);\r\n    this.getModelNames = this._addErrorCatch(this._getModelNames);\r\n    this.getModelFieldNames = this._addErrorCatch(this._getModelFieldNames);\r\n  }\r\n\r\n  private _addErrorCatch<T extends (...args: any[]) => Promise<any>>(\r\n    executor: T\r\n  ): (...args: Parameters<T>) => flatAnkiResponse<T> {\r\n    return async (...args: Parameters<T>) => {\r\n      try {\r\n        /**\r\n         * result 有两种情况：\r\n         *  第一种，返回的是AnkiResponse，那么不需要再次包装，直接返回\r\n         *  第二种，返回的不是AnkiResponse,而是一个正常值，则需要包装后返回\r\n         * 这是为了保证，返回的都是AnkiResponse.\r\n         */\r\n        const result = await executor.apply(this, args);\r\n        if (isAnkiResponse(result)) return result;\r\n        return createSuccessAnkiResponse(result);\r\n      } catch (e) {\r\n        if (isAnkiResponse(e)) return e;\r\n        if (__DEV__) {\r\n          console.error(e);\r\n        }\r\n        if (typeof e === \"string\" || e instanceof Error) {\r\n          return createUnexpectedErrorResponse(e);\r\n        }\r\n        return createUnexpectedErrorResponse(\r\n          \"这是一个出乎该插件开发者预料的错误,如需解决请提交该问题\"\r\n        );\r\n      }\r\n    };\r\n  }\r\n\r\n  updateAnkiConfig<T extends Partial<AnkiConfig>>(config: T) {\r\n    this.ankiConfig = { ...this.ankiConfig, ...config };\r\n  }\r\n\r\n  private async _addNote(data: NoteData) {\r\n    let type = null;\r\n    if (\"word\" in data) type = NoteType.Word;\r\n    if (\"phrase\" in data) type = NoteType.Phrase;\r\n    if (\"sentence\" in data) type = NoteType.Sentence;\r\n    //await是必须的\r\n    await this._testSecurity(type!);\r\n    const note: AddNoteParams = this._formatData(type!, data);\r\n    const result = await this._handleDuplicate(type!, data, note);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * 确保deckName、modelName、fieldNames等是存在的\r\n   */\r\n  private async _testSecurity(type: NoteType) {\r\n    const configName = getConfigName(type);\r\n    const config = this.ankiConfig[configName];\r\n    //检查 deckName 是否为空\r\n    const deckName = config.deckName;\r\n    const deckNames = await this._getDeckNames();\r\n    if (deckName == null || !deckNames.includes(deckName)) {\r\n      throw createConfigErrorResponse();\r\n    }\r\n    //检查 modelName 是否为空\r\n    const modelName = config.modelName;\r\n    const modelNames = await this._getModelNames();\r\n    if (modelName == null || !modelNames.includes(modelName)) {\r\n      throw createConfigErrorResponse();\r\n    }\r\n    //检查 fields 是否正确（在Anki上该值是否存在）\r\n    const modelFieldNames = await this._getModelFieldNames(modelName);\r\n    const fieldNames = Object.values(\r\n      omit(config, [\"deckName\", \"modelName\", \"tags\"])\r\n    );\r\n\r\n    //检查用户是否配置了任何一个fieldName，fieldNames不能够都没有配置\r\n    const isEmpty = fieldNames.every((val) => val == null || val === \"\");\r\n    if (isEmpty) {\r\n      throw createConfigErrorResponse();\r\n    }\r\n\r\n    const includesAll = fieldNames.every((val) => {\r\n      if (val == null || val === \"\") return true;\r\n      return modelFieldNames.includes(val as string);\r\n    });\r\n    if (!includesAll) {\r\n      throw createConfigErrorResponse();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理卡片重复添加的逻辑\r\n   */\r\n  private async _handleDuplicate(\r\n    type: NoteType,\r\n    data: NoteData,\r\n    note: AddNoteParams\r\n  ) {\r\n    const configName = getConfigName(type);\r\n    const duplicateConfigName = getDuplicateConfigName(type);\r\n    const config = this.ankiConfig[configName];\r\n    const duplicateConfig = this.ankiConfig[duplicateConfigName];\r\n    //改写Anki内置的重复判断逻辑，将控制权交给用户\r\n    const query = Object.entries(duplicateConfig).reduce(\r\n      (query, [key, val]) => {\r\n        //检查deck\r\n        if (key === \"deckName\") {\r\n          return query + val ? ` deck:${config[key]}` : \"\";\r\n        }\r\n        //检查 model\r\n        if (key === \"modelName\") {\r\n          return query + val ? ` note:${config[key]}` : \"\";\r\n        }\r\n        //val为falsy则表示其不是用于查重的字段\r\n        if (!val) return query;\r\n        //@ts-ignore,由于Object.entries不能够很好的推断类型，所以导致该问题\r\n        const fieldName = config[key];\r\n        //@ts-ignore,由于Object.entries不能够很好的推断类型，所以导致该问题\r\n        const content = data[key];\r\n        if (!fieldName || !content) return query;\r\n        //注意前方的空格，其是必须的\r\n        query += ` \"${content}\"`;\r\n        return query;\r\n      },\r\n      \"\"\r\n    );\r\n\r\n    // - cardIds没有值，此时逻辑应该为:再次添加卡片，添加方式为允许重复。\r\n    // - cardIds有一个值，此时逻辑应该为:立刻开始学习\r\n    // - cardIds有多个值，此时逻辑应该为:报错，返回查询字符串，让用户到Anki中查看重复。\r\n    const cardIds = await this._findCards(query);\r\n    const { length } = cardIds;\r\n    switch (length) {\r\n      case 0: {\r\n        //卡片不存在，作为新卡片添加\r\n        const cardId = await this._request(Action.AddNote, { note });\r\n        return createFirstAddSuccessResponse([cardId]);\r\n      }\r\n      case 1: //卡片已添加，是否立刻复习/学习\r\n        return createForgottenResponse(cardIds);\r\n      default: //卡片重复添加\r\n        return createDuplicateResponse(cardIds);\r\n    }\r\n  }\r\n\r\n  private async _findCards(query: string): Promise<number[]> {\r\n    return this._request(Action.FindCards, {\r\n      query,\r\n    });\r\n  }\r\n\r\n  private async _relearnCards(cards: number[]) {\r\n    //await是必须的\r\n    await this._request(Action.RelearnCards, { cards });\r\n    return cards;\r\n  }\r\n\r\n  private async _getModelNames() {\r\n    const result = await this._request(Action.ModelNames);\r\n    return result;\r\n  }\r\n\r\n  private async _getDeckNames() {\r\n    const result = await this._request(Action.DeckNames);\r\n    return result;\r\n  }\r\n\r\n  private async _getModelFieldNames(modelName: string) {\r\n    const result = await this._request(Action.ModelFieldNames, { modelName });\r\n    return result;\r\n  }\r\n\r\n  private async _getVersion() {\r\n    const result = await this._request(Action.Version);\r\n    //更新 version\r\n    this.version = result;\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * 将数据格式化为Anki所要求的格式\r\n   */\r\n  private _formatData(type: NoteType, data: NoteData): AddNoteParams {\r\n    const configName = getConfigName(type);\r\n    const config = this.ankiConfig[configName];\r\n    const { deckName, modelName, tags, ...modelFieldNames } = config;\r\n\r\n    const audio = getMediaFields(type, data, modelFieldNames);\r\n    const fields = getNotMediaFields(type, data, modelFieldNames);\r\n    return {\r\n      deckName: deckName!, //在调用该函数前已经调用 testSecurity 进行非空检查\r\n      modelName: modelName!, //在调用该函数前已经调用 testSecurity 进行非空检查\r\n      fields,\r\n      audio,\r\n      tags: (tags && tags.trim().split(/\\s+/g)) || [],\r\n      options: {\r\n        allowDuplicate: true, //重复判断逻辑已经重写，所以这里恒定true，避免被原有逻辑影响到\r\n        duplicateScope: \"deck\",\r\n        duplicateScopeOptions: {\r\n          deckName: deckName!, //在调用该函数前已经调用 testSecurity 进行非空检查\r\n          checkChildren: false,\r\n          checkAllModels: false,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 向Anki发送请求的函数\r\n   * @param action 具体请求动作，类似 http 中的 method\r\n   * @param params 请求所携带的参数\r\n   */\r\n  private async _request(action: Action.DeckNames): Promise<string[]>;\r\n  private async _request(action: Action.ModelNames): Promise<string[]>;\r\n  private async _request(action: Action.Version): Promise<number>;\r\n  private async _request(\r\n    action: Action.FindCards,\r\n    params: { query: string }\r\n  ): Promise<number[]>;\r\n  private async _request(\r\n    action: Action.ModelFieldNames,\r\n    params: { modelName: string }\r\n  ): Promise<string[]>;\r\n  private async _request(\r\n    action: Action.AddNote,\r\n    params: { note: AddNoteParams }\r\n  ): Promise<number>;\r\n  private async _request(\r\n    action: Action.RelearnCards,\r\n    params: { cards: number[] }\r\n  ): Promise<null>;\r\n  private async _request(\r\n    action: Action,\r\n    params: { [key: string]: any } = {}\r\n  ): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      const { version } = this;\r\n      const { ankiConnectionURL } = this.ankiConfig;\r\n      const xhr = new XMLHttpRequest();\r\n      xhr.addEventListener(\"error\", () =>\r\n        reject(\r\n          createDisconnectionResponse(\r\n            `无法通过URL: ${ankiConnectionURL} 连接到Anki，可通过检查：\\n\\t- Anki是否打开\\n\\t- AnkiConnection插件是否安装\\n\\t- 目标URL是否正确配置来排查该问题`\r\n          )\r\n        )\r\n      );\r\n      xhr.addEventListener(\"load\", () => {\r\n        try {\r\n          const response = JSON.parse(xhr.responseText);\r\n          if (\r\n            Object.getOwnPropertyNames(response).length != 2 ||\r\n            !Object.prototype.hasOwnProperty.call(response, \"result\") ||\r\n            !Object.prototype.hasOwnProperty.call(response, \"error\")\r\n          ) {\r\n            throw createOldVersionResponse();\r\n          }\r\n          if (response.error) {\r\n            throw createAnkiErrorResponse(response.error);\r\n          }\r\n          resolve(response.result);\r\n        } catch (e) {\r\n          reject(e);\r\n        }\r\n      });\r\n\r\n      xhr.open(\"POST\", ankiConnectionURL);\r\n      xhr.send(JSON.stringify({ action, version, params }));\r\n    });\r\n  }\r\n}\r\n\r\nexport type GetVersionReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"getVersion\"]>\r\n>;\r\nexport type GetDeckNamesReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"getDeckNames\"]>\r\n>;\r\nexport type GetModelFieldNamesReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"getModelFieldNames\"]>\r\n>;\r\nexport type GetModelNamesReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"getModelNames\"]>\r\n>;\r\nexport type AddNoteReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"addNote\"]>\r\n>;\r\nexport type RelearnCardsReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"relearnCards\"]>\r\n>;\r\n","export { AnkiConnection } from \"./AnkiConnection\";\r\nexport type {\r\n  AddNoteReturnType,\r\n  GetVersionReturnType,\r\n  GetDeckNamesReturnType,\r\n  RelearnCardsReturnType,\r\n  GetModelNamesReturnType,\r\n  GetModelFieldNamesReturnType,\r\n} from \"./AnkiConnection\";\r\nexport { AnkiResponseStatus } from \"./types\";\r\n","export const enum NoteType {\r\n  Word = 0,\r\n  Phrase = 1,\r\n  Sentence = 2,\r\n}\r\n\r\nexport interface AddNoteParams {\r\n  deckName: string;\r\n  modelName: string;\r\n  fields: {\r\n    [key: string]: string;\r\n  };\r\n  options: {\r\n    allowDuplicate: boolean;\r\n    duplicateScope: \"deck\";\r\n    duplicateScopeOptions: {\r\n      deckName: string;\r\n      checkChildren: boolean;\r\n      checkAllModels: boolean;\r\n    };\r\n  };\r\n  tags?: string[];\r\n  audio?: MediaField;\r\n  video?: MediaField;\r\n  picture?: MediaField;\r\n}\r\n\r\nexport type MediaField = Array<{\r\n  url: string;\r\n  filename: string;\r\n  skipHash?: string;\r\n  fields: string[];\r\n}>;\r\n\r\nexport enum AnkiResponseStatus {\r\n  Error,\r\n  Success,\r\n  Forgotten,\r\n  Duplicate,\r\n  Disconnect,\r\n  OldVersion,\r\n  ConfigError,\r\n  FirstAddSuccess,\r\n  UnexpectedError,\r\n}\r\n\r\nexport interface AnkiResponse<T> {\r\n  data?: T;\r\n  message: string;\r\n  status: AnkiResponseStatus;\r\n}\r\n","import { COMMON_CONFIG_MAP } from \"@/configuration\";\r\nimport { AnkiResponseStatus, AnkiResponse } from \"../types\";\r\n\r\nfunction createAnkiResponse<T>(options: AnkiResponse<T>): AnkiResponse<T> {\r\n  return Object.assign(\r\n    {\r\n      __isAnkiResponse__: true,\r\n    },\r\n    options\r\n  );\r\n}\r\n\r\nexport function isAnkiResponse(target: any) {\r\n  if (target === null || typeof target !== \"object\") return false;\r\n  return target.__isAnkiResponse__ === true;\r\n}\r\n\r\nexport function createSuccessAnkiResponse<T>(data: T) {\r\n  return createAnkiResponse({\r\n    data,\r\n    message: \"ok\",\r\n    status: AnkiResponseStatus.Success,\r\n  });\r\n}\r\n\r\nexport function createDisconnectionResponse(message: string) {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.Disconnect,\r\n    message,\r\n  });\r\n}\r\nexport function createForgottenResponse(cardIds: number[]) {\r\n  return createAnkiResponse({\r\n    data: cardIds,\r\n    status: AnkiResponseStatus.Forgotten,\r\n    message: \"曾经添加过该卡片，是否做遗忘处理？(立刻将其添加到学习列表中)\",\r\n  });\r\n}\r\n\r\nexport function createDuplicateResponse(cardIds: number[]) {\r\n  return createAnkiResponse({\r\n    data: cardIds,\r\n    status: AnkiResponseStatus.Duplicate,\r\n    message:\r\n      \"该卡片出现重复项，请自行在Anki上处理重复项，单击复制重复卡片的ID，以在Anki Browser上快速定位。\",\r\n  });\r\n}\r\n\r\nexport function createFirstAddSuccessResponse(cardIds: number[]) {\r\n  return createAnkiResponse({\r\n    data: cardIds,\r\n    status: AnkiResponseStatus.FirstAddSuccess,\r\n    message:\"已成功添加到Anki，是否需要立刻开始学习？(用于在待学习列表很长的时候，使其无需等待，立刻开始学习)\",\r\n  });\r\n}\r\n\r\nexport function createConfigErrorResponse() {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.ConfigError,\r\n    message: `存在配置错误，是否打开配置页面设置配置？可能是一下问题之一导致该错误：\\n\\t- ${COMMON_CONFIG_MAP.deckName},未配置\\n\\t- ${COMMON_CONFIG_MAP.modelName},未配置\\n\\t- 没有配置任何一个 model field 项\\n\\t- 配置的某个 model field 项与 Anki 上的不匹配，请刷新后重新配置`,\r\n  });\r\n}\r\n\r\nexport function createOldVersionResponse() {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.OldVersion,\r\n    message: \"AnkiConnection版本过低，请更新到最新版本。\",\r\n  });\r\n}\r\n\r\nexport function createAnkiErrorResponse(message: string) {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.Error,\r\n    message,\r\n  });\r\n}\r\n\r\nexport function createUnexpectedErrorResponse(e: Error | string) {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.UnexpectedError,\r\n    message: typeof e === \"string\" ? e : e.message,\r\n  });\r\n}\r\n","import {\r\n  WordFields,\r\n  ModelFields,\r\n  PhraseFields,\r\n  SentenceFields,\r\n} from \"@/extensions-api\";\r\nimport { NoteData } from \"@/translation-page\";\r\nimport { MediaField, NoteType } from \"../types\";\r\n\r\n/**\r\n * 纯函数\r\n */\r\nexport function getConfigName(type: NoteType) {\r\n  const configNames = {\r\n    [NoteType.Word]: \"wordConfig\",\r\n    [NoteType.Phrase]: \"phraseConfig\",\r\n    [NoteType.Sentence]: \"sentenceConfig\",\r\n  } as const;\r\n  return configNames[type];\r\n}\r\n/**\r\n * 纯函数\r\n */\r\nexport function getDuplicateConfigName(type: NoteType) {\r\n  const configNames = {\r\n    [NoteType.Word]: \"checkWordDuplicate\",\r\n    [NoteType.Phrase]: \"checkPhraseDuplicate\",\r\n    [NoteType.Sentence]: \"checkSentenceDuplicate\",\r\n  } as const;\r\n  return configNames[type];\r\n}\r\n\r\n/**\r\n * 纯函数，获取特定类型的代表音频媒体的 key 的集合\r\n */\r\nfunction getMediaNames(type: NoteType) {\r\n  const wordMedias: Array<keyof WordFields> = [\r\n    \"am_audio\",\r\n    \"en_audio\",\r\n    \"example_audio\",\r\n    \"definition_audio\",\r\n  ];\r\n  const phraseMedias: Array<keyof PhraseFields> = [\r\n    \"phrase_audio\",\r\n    \"example_audio_1\",\r\n    \"example_audio_2\",\r\n    \"example_audio_3\",\r\n  ];\r\n  const sentenceMedias: Array<keyof SentenceFields> = [\"sentence_audio\"];\r\n  const mediaNames = {\r\n    [NoteType.Word]: wordMedias,\r\n    [NoteType.Phrase]: phraseMedias,\r\n    [NoteType.Sentence]: sentenceMedias,\r\n  }[type];\r\n  return mediaNames;\r\n}\r\n\r\n/**\r\n * 纯函数，获取媒体部分的域\r\n */\r\nexport function getMediaFields(\r\n  type: NoteType,\r\n  data: NoteData,\r\n  modelFieldsMap: ModelFields\r\n): MediaField {\r\n  const mediaNames = getMediaNames(type);\r\n  return Object.entries(modelFieldsMap).reduce((audio, [key, field]) => {\r\n    //@ts-ignore 是能够正确匹配的\r\n    if (!mediaNames.includes(key)) return audio;\r\n    //@ts-ignore 是能够正确匹配的\r\n    const url = data[key];\r\n    if (!url || !field) return audio;\r\n    audio.push({\r\n      url,\r\n      fields: [field],\r\n      filename: `${encodeURIComponent(url)}.mp3`,\r\n    });\r\n    return audio;\r\n  }, [] as MediaField);\r\n}\r\n\r\n/**\r\n * 纯函数，获取非媒体部分的域\r\n */\r\nexport function getNotMediaFields(\r\n  type: NoteType,\r\n  data: NoteData,\r\n  modelFieldsMap: ModelFields\r\n): {\r\n  [key: string]: string;\r\n} {\r\n  const mediaNames = getMediaNames(type);\r\n  return Object.entries(modelFieldsMap).reduce(\r\n    (fields, [key, fieldKey]) => {\r\n      //@ts-ignore 是可以正确匹配的\r\n      if (mediaNames.includes(key)) return fields;\r\n      //@ts-ignore 是可以正确匹配的\r\n      const fieldValue = data[key];\r\n      if (!fieldKey || !fieldValue) return fields;\r\n      fields[fieldKey] = fieldValue;\r\n      return fields;\r\n    },\r\n    {} as {\r\n      [key: string]: string;\r\n    }\r\n  );\r\n}\r\n","export {\r\n  isAnkiResponse,\r\n  createForgottenResponse,\r\n  createDuplicateResponse,\r\n  createAnkiErrorResponse,\r\n  createOldVersionResponse,\r\n  createSuccessAnkiResponse,\r\n  createConfigErrorResponse,\r\n  createDisconnectionResponse,\r\n  createFirstAddSuccessResponse,\r\n  createUnexpectedErrorResponse,\r\n} from \"./createAnkiResponse\";\r\n\r\nexport {\r\n  getConfigName,\r\n  getMediaFields,\r\n  getNotMediaFields,\r\n  getDuplicateConfigName,\r\n} from \"./helper\";\r\n","export enum Command {\r\n  AddNote,\r\n  UpdateNote,\r\n  RelearnNote,\r\n  HistoryIndex,\r\n  TranslateText,\r\n\r\n  PauseAudio,\r\n  ShowTranslation,\r\n  OpenSelection,\r\n  HiddenChinese,\r\n  BackHistory,\r\n  ForwardHistory,\r\n  Callback,\r\n  OpenSearchBox,\r\n  ShowInjectTranslation,\r\n  ShowIframe,\r\n\r\n  GetVersion,\r\n  GetDeckNames,\r\n  GetModelNames,\r\n  GetModelFieldNames,\r\n\r\n  TranslateInjectText,\r\n}\r\n","export {\r\n  WORD_FIELDS_MAP,\r\n  PHRASE_FIELDS_MAP,\r\n  COMMON_CONFIG_MAP,\r\n  SENTENCE_FIELDS_MAP,\r\n  ANKI_CONNECTION_MAP,\r\n} from \"./modelFieldNameMap\";\r\n\r\nexport { Command } from \"./command\";\r\n\r\nexport const DEFAULT_ANKI_CONNECTION_URL = \"http://127.0.0.1:8765\";\r\n","import {\r\n  WordFields,\r\n  PhraseFields,\r\n  CommonConfig,\r\n  SentenceFields,\r\n} from \"@/extensions-api\";\r\n\r\nconst WORD_FIELDS_MAP: WordFields = {\r\n  definition: \"定义\",\r\n  word: \"单词\",\r\n  translation: \"翻译\",\r\n  part_of_speech: \"词性\",\r\n  definition_audio: \"定义音频\",\r\n  am: \"美国音标\",\r\n  en: \"英国音标\",\r\n  am_audio: \"美国音频\",\r\n  en_audio: \"英国音频\",\r\n  star_amount: \"出现频率\",\r\n  example_audio: \"例句音频\",\r\n  example_sentence: \"例句原文\",\r\n  example_sentence_translation: \"例句翻译\",\r\n};\r\n\r\nconst PHRASE_FIELDS_MAP: PhraseFields = {\r\n  phrase: \"短语词组\",\r\n  phrase_audio: \"短语音频\",\r\n  translations: \"短语翻译\",\r\n  example_audio_1: \"例句1音频\",\r\n  example_audio_2: \"例句2音频\",\r\n  example_audio_3: \"例句3音频\",\r\n  example_sentence_1: \"例句1原文\",\r\n  example_sentence_2: \"例句2原文\",\r\n  example_sentence_3: \"例句3原文\",\r\n  example_sentence_translation_1: \"例句1翻译\",\r\n  example_sentence_translation_2: \"例句2翻译\",\r\n  example_sentence_translation_3: \"例句3翻译\",\r\n};\r\n\r\nconst SENTENCE_FIELDS_MAP: SentenceFields = {\r\n  sentence: \"句子原文\",\r\n  sentence_audio: \"句子音频\",\r\n  sentence_translation: \"句子翻译\",\r\n};\r\n\r\nconst COMMON_CONFIG_MAP: CommonConfig = {\r\n  deckName: \"牌组名称\",\r\n  modelName: \"模型名称\",\r\n  tags: \"卡片标签\",\r\n};\r\n\r\nconst ANKI_CONNECTION_MAP = {\r\n  ankiConnectionMethod: \"连接方法\",\r\n  ankiConnectionURL: \"连接URL\",\r\n};\r\n\r\nif (__DEV__) {\r\n  Object.freeze(WORD_FIELDS_MAP);\r\n  Object.freeze(PHRASE_FIELDS_MAP);\r\n  Object.freeze(SENTENCE_FIELDS_MAP);\r\n  Object.freeze(COMMON_CONFIG_MAP);\r\n  Object.freeze(ANKI_CONNECTION_MAP);\r\n}\r\n\r\nexport {\r\n  WORD_FIELDS_MAP,\r\n  COMMON_CONFIG_MAP,\r\n  PHRASE_FIELDS_MAP,\r\n  SENTENCE_FIELDS_MAP,\r\n  ANKI_CONNECTION_MAP,\r\n};\r\n","import lowerCase from \"lodash.lowercase\";\r\nimport {\r\n  Cache,\r\n  isErrorData,\r\n  createCacography,\r\n  createNoCacheError,\r\n} from \"../utils\";\r\n\r\nimport { translateWord } from \"./translateWord\";\r\nimport { translatePhrase } from \"./translatePhrase\";\r\nimport translateSentence from \"./translateSentence\";\r\n\r\nimport type {\r\n  WordData,\r\n  PhraseData,\r\n  SentenceData,\r\n  TranslationResult,\r\n} from \"../types\";\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n//具体实现\r\n\r\nexport class Collins_en_cn {\r\n  xhr: XMLHttpRequest | null;\r\n  cache: Cache<string, TranslationResult>;\r\n\r\n  constructor(cacheAmount = 20) {\r\n    this.xhr = null;\r\n    this.cache = new Cache(cacheAmount);\r\n  }\r\n\r\n  /**\r\n   * 对translateText的包装，为其添加缓存能力\r\n   * @param text 待翻译文本\r\n   */\r\n  async translate(text: string): Promise<TranslationResult> {\r\n    const { cache } = this;\r\n    const translation = cache.get(text);\r\n    if (translation) return translation;\r\n    const translationResult = await this.translateText(text);\r\n    if (isErrorData(translationResult) && !translationResult.cache) {\r\n      translationResult.queryText = text;\r\n      return translationResult;\r\n    }\r\n    this.cache.set(text, translationResult);\r\n    return translationResult;\r\n  }\r\n\r\n  /**\r\n   * 词典基于有道翻译网页版，因此需要获取特定的网页DOM\r\n   */\r\n  private async getPageDOM(input: string): Promise<Document> {\r\n    //短时间内快速查询的情况下，如果上一个未返回，则直接中止\r\n    if (this.xhr) this.xhr.abort();\r\n    return new Promise((resolve, reject) => {\r\n      //词典基于有道网页版\r\n      const searchURL =\r\n        \"https://dict.youdao.com/w/\" + encodeURIComponent(input);\r\n      const xhr = new XMLHttpRequest();\r\n      this.xhr = xhr;\r\n      xhr.open(\"GET\", searchURL);\r\n      xhr.responseType = \"document\";\r\n      xhr.timeout = 6000;\r\n      xhr.addEventListener(\"load\", () => {\r\n        if (xhr.status < 200 || xhr.status >= 400)\r\n          reject(\r\n            createNoCacheError(\r\n              `请求错误,状态码：${xhr.status}，原因：${xhr.statusText}`\r\n            )\r\n          );\r\n        resolve(xhr.response);\r\n      });\r\n      xhr.addEventListener(\"error\", () => {\r\n        reject(createNoCacheError(`网络连接错误，请检查网络连接状态`));\r\n      });\r\n      xhr.addEventListener(\"timeout\", () => {\r\n        reject(createNoCacheError(\"请求超时,请再次尝试或查看网络连接状态\"));\r\n      });\r\n      xhr.addEventListener(\"abort\", () => {\r\n        reject(createNoCacheError(\"请求被取消\"));\r\n      });\r\n      xhr.send(null);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 对text进行翻译，获取翻译数据\r\n   * @param text 需要进行翻译的文本\r\n   */\r\n  private async translateText(text: string): Promise<TranslationResult> {\r\n    try {\r\n      //将 驼峰、-、_ 等写法连接的文本转换为由空格分隔的文本\r\n      text = lowerCase(text);\r\n      const dom = await this.getPageDOM(text);\r\n      let translation: WordData | PhraseData | SentenceData | void;\r\n      //如果存在空格，则认为其为多个单词组合的句子、词组\r\n      if (/\\s/g.test(text)) {\r\n        translation = translatePhraseAndSentence(dom);\r\n      } else {\r\n        translation = translateWord(dom);\r\n      }\r\n\r\n      if (!translation) handleNotFound(dom, text);\r\n      //上面的判断决定了其必定不为空，因此可以使用 !进行断言\r\n      return translation!;\r\n    } catch (err: any) {\r\n      if (isErrorData(err)) return err;\r\n      return createNoCacheError(err?.message);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 处理多个单词组成的翻译文本，一般情况下是 短语或句子\r\n */\r\nfunction translatePhraseAndSentence(\r\n  dom: Document\r\n): SentenceData | PhraseData | void {\r\n  //情况一：待翻译的是短语\r\n  const translatedPhrase = translatePhrase(dom);\r\n  if (translatedPhrase) return translatedPhrase;\r\n\r\n  //情况二:待翻译的是句子\r\n  const translatedSentence = translateSentence(dom);\r\n  if (translatedSentence) return translatedSentence;\r\n}\r\n\r\n/**\r\n * 用于兜底处理未找到任何翻译的情况\r\n */\r\nfunction handleNotFound(dom: Document, text: string) {\r\n  //可能是用户拼写出错，推测正确的拼写给用户参考\r\n  const possibleSpelling = getCorrectSpelling(dom);\r\n  if (possibleSpelling) {\r\n    throw createCacography(possibleSpelling);\r\n  }\r\n  //真的没有找到任何翻译\r\n  throw createNoCacheError(`\"没找到关于 '${text}' 的任何翻译\"`);\r\n}\r\n\r\n/**\r\n * 获取页面的中关于拼写错误部分的正确推断\r\n */\r\nfunction getCorrectSpelling(dom: Document) {\r\n  const inferCorrects = [\r\n    ...dom.querySelectorAll(\"#results-contents .error-typo .typo-rel a\"),\r\n  ].reduce((acc, node) => {\r\n    const text = node.textContent;\r\n    if (text) acc.push(text);\r\n    return acc;\r\n  }, [] as string[]);\r\n  if (inferCorrects.length) return inferCorrects;\r\n}\r\n","import type { ExampleSentence, PhraseData } from \"../types\";\r\n//短语翻译\r\nexport function translatePhrase(dom: Document): PhraseData | void {\r\n  const phrase = getOriginText(dom);\r\n  if (!phrase) return;\r\n  const translation = dom\r\n    .querySelectorAll(\"#ydTrans .trans-container p\")[1]\r\n    ?.textContent?.trim();\r\n  const translations = getTranslation(dom) || (translation && [translation]);\r\n  if (!translations) return;\r\n\r\n  const phrase_audio = `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n    phrase\r\n  )}`;\r\n  const example_sentences = getPhraseExamples(dom);\r\n  return {\r\n    phrase,\r\n    translations,\r\n    phrase_audio,\r\n    type: \"PHRASE\",\r\n    example_sentences,\r\n  };\r\n}\r\n/**\r\n * 获取翻译源文本\r\n * @param dom\r\n * @returns\r\n */\r\nfunction getOriginText(dom: Document) {\r\n  return (\r\n    dom.querySelector(\".wordbook-js\")?.firstElementChild?.textContent?.trim() ||\r\n    \"\"\r\n  );\r\n}\r\n/**\r\n * 获取单词的粗略翻译\r\n * @param dom 具有翻译内容的页面DOM\r\n * @returns\r\n */\r\nfunction getTranslation(dom: Document) {\r\n  const ul = dom.querySelector(\"#phrsListTab .trans-container > ul\");\r\n  if (!ul) return;\r\n  const liNodes = ul.children;\r\n  const result = Array.from(liNodes).reduce((result, li) => {\r\n    const text = li.textContent?.trim();\r\n    if (!text) return result;\r\n    result.push(text);\r\n    return result;\r\n  }, [] as string[]);\r\n  if (!result.length) return;\r\n  return result;\r\n}\r\n/**\r\n * 获取短语例句\r\n * @param dom\r\n * @returns\r\n */\r\nfunction getPhraseExamples(dom: Document) {\r\n  const liNodes = dom.querySelectorAll(\"#bilingual .ol li\");\r\n  const result = Array.from(liNodes).reduce((result, li) => {\r\n    const pNodes = li.querySelectorAll(\"p\");\r\n    if (!pNodes[0] || !pNodes[1]) return result;\r\n    //用于获取音频\r\n    const example_sentence_origin = pNodes[0]?.textContent?.trim() || \"\";\r\n    //获取短语加粗的例句\r\n    const example_sentence = Array.from(pNodes[0].childNodes)\r\n      .reduce((sentence, node) => {\r\n        if (node.nodeName !== \"SPAN\") return sentence;\r\n        const children = (<HTMLSpanElement>node).children;\r\n        if (!children.length) return sentence + node.textContent;\r\n        const childNodes = node.childNodes;\r\n        const text = Array.from(childNodes).reduce((text, node) => {\r\n          if (node.nodeType === 3) return text + node.textContent;\r\n          if (node.nodeName === \"B\") {\r\n            return text + `<b>${node.textContent}</b>`;\r\n          }\r\n          return text;\r\n        }, \"\");\r\n        return sentence + text;\r\n      }, \"\")\r\n      .trim();\r\n\r\n    const example_sentence_translation = pNodes[1].textContent?.trim() || \"\";\r\n    const example_audio = `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n      example_sentence_origin\r\n    )}&le=eng`;\r\n    result.push({\r\n      example_audio,\r\n      example_sentence,\r\n      example_sentence_translation,\r\n    });\r\n    return result;\r\n  }, [] as ExampleSentence[]);\r\n  if (!result.length) return;\r\n  return result;\r\n}\r\n","import type { SentenceData } from \"../types\";\r\n\r\n//句子翻译\r\nexport default function translateSentence(dom: Document): SentenceData | void {\r\n  const sentenceNode = dom.querySelectorAll(\"#ydTrans .trans-container p\")[0];\r\n  const transNode = dom.querySelectorAll(\"#ydTrans .trans-container p\")[1];\r\n  const sentence = sentenceNode?.textContent?.trim();\r\n  const sentence_translation = transNode?.textContent?.trim();\r\n  if (!sentence || !sentence_translation) return;\r\n  return {\r\n    sentence,\r\n    type: \"SENTENCE\",\r\n    sentence_translation,\r\n    sentence_audio: `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n      sentence\r\n    )}&le=eng`,\r\n  };\r\n}\r\n","import type { WordData, ExampleSentence, TranslationItem } from \"../types\";\r\n\r\n//单词翻译\r\nexport function translateWord(dom: Document): WordData | void {\r\n  const word = getOriginText(dom);\r\n  const star_amount =\r\n    Number(dom.querySelector(\".star\")?.className?.match(/star(\\d)/)?.[1]) || 0;\r\n  if (!word) return;\r\n\r\n  return {\r\n    word,\r\n    star_amount,\r\n    type: \"WORD\",\r\n    phonetic: getPhonetic(dom, word),\r\n    translationList: getTranslationList(dom),\r\n    translations: formatTranslations(getTranslation(dom)),\r\n  };\r\n}\r\n\r\n/**\r\n * 获取翻译源文本\r\n * @param dom\r\n * @returns\r\n */\r\nfunction getOriginText(dom: Document): string {\r\n  return (\r\n    dom.querySelector(\".wordbook-js\")?.firstElementChild?.textContent?.trim() ||\r\n    \"\"\r\n  );\r\n}\r\n\r\n/**\r\n * 获取单词的粗略翻译\r\n * @param dom 具有翻译内容的页面DOM\r\n * @returns\r\n */\r\nfunction getTranslation(dom: Document): string[] | undefined {\r\n  const ul = dom.querySelector(\"#phrsListTab .trans-container > ul\");\r\n  if (!ul) return;\r\n  const liNodes = ul.children;\r\n  const result = Array.from(liNodes).reduce((result, li) => {\r\n    const text = li.textContent;\r\n    if (!text) return result;\r\n    result.push(text);\r\n    return result;\r\n  }, [] as string[]);\r\n  if (!result.length) return;\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * @param dom 有道翻译页面文档DOM\r\n * @param word 翻译的目标单词\r\n * @returns 单词音标与音频对象\r\n */\r\nfunction getPhonetic(dom: Document, word: string) {\r\n  let en = dom\r\n    .querySelectorAll(\".pronounce\")?.[0]\r\n    ?.textContent?.replace(/\\s*|\\r|\\n/g, \"\");\r\n  let am = dom\r\n    .querySelectorAll(\".pronounce\")?.[1]\r\n    ?.textContent?.replace(/\\s*|\\r|\\n/g, \"\");\r\n  const en_audio = `https://dict.youdao.com/dictvoice?audio=${word}&type=1`;\r\n  const am_audio = `https://dict.youdao.com/dictvoice?audio=${word}&type=2`;\r\n\r\n  let phonetic = dom\r\n    .querySelector(\"#collinsResult .wt-container .phonetic\")\r\n    ?.textContent?.trim();\r\n  if (phonetic) {\r\n    phonetic = phonetic.replace(/^\\//g, \"[\").replace(/\\/$/, \"]\");\r\n    if (!en || en.length < 3) en = (en || \"\") + phonetic;\r\n    if (!am || am.length < 3) am = (am || \"\") + phonetic;\r\n  }\r\n\r\n  return {\r\n    am, //美国发音\r\n    en, //英国发音\r\n    am_audio, //美国发音音频URI\r\n    en_audio, //英国发音音频URI\r\n  };\r\n}\r\n\r\n/**\r\n * @param dom 网易网页版翻译所对应的DOM文档对象\r\n * @param word 查询的单词\r\n * @returns 获取单词例句相关的数据数组\r\n */\r\nfunction getTranslationList(dom: Document): Array<TranslationItem> | undefined {\r\n  //获取所有翻译项\r\n  const lis = dom.querySelectorAll(\"#collinsResult .ol li\");\r\n  const result = Array.from(lis).reduce((result, li) => {\r\n    //处理释义与对应的翻译的逻辑\r\n    const textResult = getTranslationText(li);\r\n    //过滤无效项\r\n    if (!textResult) {\r\n      return result;\r\n    }\r\n    const [text, index] = textResult;\r\n    const definition = text.slice(0, index).trim();\r\n    //清除<b></b>避免影响音频获取\r\n    const definition_origin = definition.replace(/<b>|<\\/b>/g, \"\");\r\n    result.push({\r\n      part_of_speech: getPartOfSpeech(li), //词性\r\n      definition, //定义\r\n      definition_audio: `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n        definition_origin\r\n      )}&le=eng`,\r\n      translation: text.slice(index).trim(), //翻译\r\n      example_sentences: getExampleSentences(li), //例句数组\r\n    });\r\n    return result;\r\n  }, [] as Array<TranslationItem>);\r\n  //避免出现空数组的情况\r\n  if (!result.length) return;\r\n  return result;\r\n}\r\n\r\n/**\r\n *\r\n * @param li 需要处理的其中一条翻译条目所对应的li元素节点\r\n * @returns 返回该释义对应单词的词性，例如：n-count\r\n */\r\nfunction getPartOfSpeech(li: Element): string {\r\n  const targetNode = li.querySelector(\".collinsMajorTrans p .additional\");\r\n  return (targetNode && targetNode.textContent?.trim()) || \"\";\r\n}\r\n\r\n/**\r\n * @param li 需要处理的其中一条翻译条目所对应的li元素节点\r\n * @returns [text,index] 返回翻译文本 text ，以及用于截取英文释义与中文翻译的下标 index\r\n */\r\nfunction getTranslationText(li: Element): [string, number] | null {\r\n  const pNode = li.querySelector(\".collinsMajorTrans p\");\r\n  if (!pNode) return null; //不存在释义项\r\n  //过滤掉干扰项\r\n  const nodes = Array.from(pNode.childNodes).filter((node) => {\r\n    //过滤展示词性的节点\r\n    if (\r\n      node.nodeType === 1 &&\r\n      (node as Element).classList.contains(\"additional\")\r\n    )\r\n      return false;\r\n    return true;\r\n  });\r\n  //合并目标文本\r\n  let text = \"\";\r\n  nodes.forEach((node) => {\r\n    if (node.nodeType === 3) {\r\n      text += node.textContent;\r\n    }\r\n    if (node.nodeName === \"B\") {\r\n      text += `<b>${node.textContent}</b>`;\r\n    }\r\n  });\r\n  text = text.trim();\r\n  //寻找英文释义与中文释义的边界\r\n  let index = text.search(/[\\u4e00-\\u9fa5]+/i);\r\n  //没有中文，则判断这并不是一个存放释义与翻译的标签\r\n  if (index === -1) return null;\r\n\r\n  //避免 中文翻译 被括号包裹起来的情况，而导致的 ()残留\r\n  const reg = /[a-z.)]/i;\r\n  while (index > 0) {\r\n    if (reg.test(text[index - 1] || \"\")) break;\r\n    index--;\r\n  }\r\n  return [text, index];\r\n}\r\n\r\n/**\r\n *\r\n * @param li 需要处理的其中一条翻译条目所对应的li元素节点\r\n * @returns 返回例句相关数据\r\n */\r\nfunction getExampleSentences(li: Element): ExampleSentence[] | undefined {\r\n  const div_example_s = li.querySelectorAll(\".exampleLists .examples\");\r\n  const exampleSentences = Array.from(div_example_s).reduce((acc, div) => {\r\n    const children = div.children;\r\n    const example_sentence = children[0]?.textContent?.trim() || \"\";\r\n    const example_sentence_translation = children[1]?.textContent?.trim() || \"\";\r\n\r\n    //如果例句存在才添加，否则应该过滤掉\r\n    if (example_sentence) {\r\n      acc.push({\r\n        example_sentence, //英语例句\r\n        example_sentence_translation, //中文例句\r\n        example_audio: `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n          example_sentence\r\n        )}&le=eng`,\r\n      });\r\n    }\r\n\r\n    return acc;\r\n  }, [] as ExampleSentence[]);\r\n  if (!exampleSentences.length) return;\r\n  return exampleSentences;\r\n}\r\n\r\n/**\r\n * 纯函数，格式化translations的结构\r\n */\r\nfunction formatTranslations(translations: string[] | undefined) {\r\n  if (translations == null) return;\r\n  const formated = translations.reduce(function (acc, cur) {\r\n    const point = cur.indexOf(\".\") + 1;\r\n    const part_of_speech = point === -1 ? \"\" : cur.slice(0, point);\r\n    const oldArray = acc[part_of_speech];\r\n    const newArray = cur.slice(point).split(\"；\");\r\n\r\n    if (oldArray == null) {\r\n      acc[part_of_speech] = newArray;\r\n    } else {\r\n      oldArray.push(...newArray);\r\n      acc[part_of_speech] = oldArray;\r\n    }\r\n\r\n    return acc;\r\n  }, {} as { [key: string]: string[] });\r\n  return formated;\r\n}\r\n","export type {\r\n  WordData,\r\n  ErrorData,\r\n  PhraseData,\r\n  SentenceData,\r\n  ExampleSentence,\r\n  TranslationItem,\r\n  TranslationResult,\r\n} from \"./types\";\r\n\r\nexport { isWordData, isErrorData, isPhraseData, isSentenceData } from \"./utils\";\r\n\r\nexport { Collins_en_cn } from \"./Collins_en_cn\";\r\n","export class Cache<K, V> {\r\n  private map: Map<K, V>\r\n  private max: number\r\n  constructor(max: number) {\r\n      this.map = new Map();\r\n      this.max = max;\r\n  }\r\n  set(key: K, value: V) {\r\n      const map = this.map;\r\n      const max = this.max;\r\n      if (map.size >= max) {\r\n          map.delete(map.keys().next().value);\r\n      }\r\n      return map.set(key, value);\r\n  }\r\n  get(key: K) {\r\n      return this.map.get(key)\r\n  }\r\n}","import {\r\n  WordData,\r\n  ErrorData,\r\n  PhraseData,\r\n  SentenceData,\r\n  TranslationResult,\r\n} from \"../types\";\r\n\r\ntype ExtractType<T extends TranslationResult> = T[\"type\"] \r\n\r\nfunction typeOf(\r\n  thing: TranslationResult,\r\n  type: ExtractType<TranslationResult>\r\n) {\r\n  return (\r\n    Object.prototype.hasOwnProperty.call(thing, \"type\") && thing.type === type\r\n  );\r\n}\r\n\r\nexport function isErrorData(thing: TranslationResult): thing is ErrorData {\r\n  return typeOf(thing, \"ERROR\");\r\n}\r\n\r\nexport function isWordData(thing: TranslationResult): thing is WordData {\r\n  return typeOf(thing, \"WORD\");\r\n}\r\n\r\nexport function isPhraseData(thing: TranslationResult): thing is PhraseData {\r\n  return typeOf(thing, \"PHRASE\");\r\n}\r\n\r\nexport function isSentenceData(\r\n  thing: TranslationResult\r\n): thing is SentenceData {\r\n  return typeOf(thing, \"SENTENCE\");\r\n}\r\n","import { ErrorData } from \"../types\";\r\n\r\nfunction createErrorData(options: Omit<ErrorData, \"type\">): ErrorData {\r\n  const target = { type: \"ERROR\" } as const;\r\n  return Object.assign(target, options);\r\n}\r\n\r\nexport function createCacography(possibleSpelling: string[]) {\r\n  return createErrorData({\r\n    cache: true,\r\n    possibleSpelling,\r\n  });\r\n}\r\n\r\nexport function createNoCacheError(message: string) {\r\n  return createErrorData({\r\n    cache: false,\r\n    message,\r\n  });\r\n}\r\n","export { Cache } from \"./Cache\";\r\nexport { createCacography,createNoCacheError } from \"./errorData\";\r\nexport {\r\n  isErrorData,\r\n  isWordData,\r\n  isPhraseData,\r\n  isSentenceData,\r\n} from \"./determine\";\r\n","export function setBadgeText(\r\n  details: chrome.browserAction.BadgeTextDetails,\r\n  callback?: () => void\r\n) {\r\n  chrome.browserAction.setBadgeText(details, callback);\r\n}\r\n","//此处的值与 manifest 中 command对象的键相关\r\ntype Command =\r\n  | \"open_search_box\"\r\n  | \"show_translation_page\"\r\n  | \"switch_hotkey_and_selection_listener\";\r\n\r\ntype HandlerObject = Record<Command, () => void>;\r\nlet onCommand = function onCommand(handlerObject: HandlerObject) {\r\n  //监听用户快捷键，用于开关拓展\r\n  chrome.commands.onCommand.addListener(function (command) {\r\n    const handler = handlerObject[command as Command];\r\n    handler?.();\r\n  });\r\n};\r\n\r\nif (__DEV__) {\r\n  onCommand = function StrictOnCommand(handlerObject: HandlerObject) {\r\n    const { commands } = chrome.runtime.getManifest();\r\n    if (!commands) throw new Error(\"manifest.json 文件中没有 commands 项\");\r\n    const commandNames = Object.keys(handlerObject);\r\n    commandNames.forEach(function (command) {\r\n      if (!(command in commands))\r\n        throw new Error(`没有在 commands 中找到 ${command} 项`);\r\n    });\r\n    //监听用户快捷键，用于开关拓展\r\n    chrome.commands.onCommand.addListener(function (command) {\r\n      const handler = handlerObject[command as Command];\r\n      handler?.();\r\n    });\r\n  };\r\n}\r\n\r\nexport { onCommand };\r\n","export function addContextMenuItem(\r\n  createProperties: chrome.contextMenus.CreateProperties,\r\n  callback?: () => void\r\n) {\r\n  chrome.contextMenus.create(createProperties, callback);\r\n}\r\n\r\nexport function onContextMenuClick(\r\n  callback: (\r\n    info: chrome.contextMenus.OnClickData,\r\n    tab?: chrome.tabs.Tab\r\n  ) => void\r\n) {\r\n  chrome.contextMenus.onClicked.addListener(callback);\r\n}\r\n","export {\r\n  getStorageByArray,\r\n  getStorageByObject,\r\n  setStorage,\r\n  onStorageChange,\r\n} from \"./storage\";\r\n\r\nexport { onCommand } from \"./commands\";\r\nexport { setBadgeText } from \"./browserAction\";\r\nexport { executeScript, postFrontend } from \"./tabs\";\r\nexport { addContextMenuItem, onContextMenuClick } from \"./contextMenus\";\r\nexport { postBackend, onMessage, getURL, openOptionsPage } from \"./runtime\";\r\nexport { TabPanelName } from \"./types\";\r\nexport type {\r\n  Storage,\r\n  WordFields,\r\n  ModelFields,\r\n  PhraseFields,\r\n  SentenceFields,\r\n  WordConfig,\r\n  PhraseConfig,\r\n  CommonConfig,\r\n  SentenceConfig,\r\n  CheckWordDuplicate,\r\n  CheckPhraseDuplicate,\r\n  CheckSentenceDuplicate,\r\n  ConfigKeys,\r\n  DuplicateConfigKeys,\r\n} from \"./types\";\r\n","import { Command } from \"@/configuration\";\r\nimport { ShowData, Point } from \"@/types\";\r\nimport { NoteData } from \"@/translation-page\";\r\nimport {\r\n  AddNoteReturnType,\r\n  GetVersionReturnType,\r\n  RelearnCardsReturnType,\r\n  GetDeckNamesReturnType,\r\n  GetModelNamesReturnType,\r\n  GetModelFieldNamesReturnType,\r\n} from \"@/anki\";\r\nimport { TranslationResult } from \"@/dictionary\";\r\nexport function getURL(name: string) {\r\n  return chrome.runtime.getURL(name);\r\n}\r\n\r\nexport function openOptionsPage(callback?: () => void) {\r\n  chrome.runtime.openOptionsPage(callback);\r\n}\r\n\r\nexport type SendResponse = Parameters<\r\n  Parameters<typeof chrome.runtime.onMessage.addListener>[\"0\"]\r\n>[\"2\"];\r\n\r\n//向后端发送消息的函数\r\nexport async function postBackend(\r\n  command: Command.GetDeckNames\r\n): Promise<GetDeckNamesReturnType>;\r\nexport async function postBackend(\r\n  command: Command.GetModelNames\r\n): Promise<GetModelNamesReturnType>;\r\nexport async function postBackend(\r\n  command: Command.GetVersion\r\n): Promise<GetVersionReturnType>;\r\nexport async function postBackend(\r\n  command: Command.GetModelFieldNames,\r\n  data: string\r\n): Promise<GetModelFieldNamesReturnType>;\r\nexport async function postBackend(\r\n  command: Command.AddNote,\r\n  data: NoteData\r\n): Promise<AddNoteReturnType>;\r\nexport async function postBackend(\r\n  command: Command.RelearnNote,\r\n  data: number[]\r\n): Promise<RelearnCardsReturnType>;\r\nexport async function postBackend(\r\n  command: Command.TranslateText,\r\n  data: string\r\n): Promise<TranslationResult>;\r\nexport async function postBackend(\r\n  command: Command.TranslateInjectText,\r\n  data: { text: string; point: Point }\r\n): Promise<void>;\r\nexport async function postBackend(command: Command, data?: any): Promise<any> {\r\n  return new Promise((resolve) => {\r\n    chrome.runtime.sendMessage({ command, data }, function (response) {\r\n      resolve(response);\r\n    });\r\n  });\r\n}\r\n\r\ninterface Handler {\r\n  (args: {\r\n    command: Command.ShowInjectTranslation;\r\n    data: Required<ShowData>;\r\n    sendResponse: () => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.TranslateInjectText;\r\n    data: { text: string; point: Point };\r\n    sendResponse: () => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.OpenSearchBox;\r\n    data: undefined;\r\n    sendResponse: () => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.ShowIframe;\r\n    data: undefined;\r\n    sendResponse: () => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.GetVersion;\r\n    data: undefined;\r\n    sendResponse: (data: GetVersionReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.GetDeckNames;\r\n    data: undefined;\r\n    sendResponse: (data: GetDeckNamesReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.GetModelNames;\r\n    data: undefined;\r\n    sendResponse: (data: GetModelNamesReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.GetModelFieldNames;\r\n    data: string;\r\n    sendResponse: (data: GetModelFieldNamesReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.AddNote;\r\n    data: NoteData;\r\n    sendResponse: (data: AddNoteReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.RelearnNote;\r\n    data: number[];\r\n    sendResponse: (data: RelearnCardsReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.TranslateText;\r\n    data: string;\r\n    sendResponse: (data: TranslationResult) => void;\r\n  }): Promise<void>;\r\n}\r\n//监听拓展不同模块间消息传递的函数\r\nexport function onMessage(handler: Handler) {\r\n  chrome.runtime.onMessage.addListener(function (\r\n    message,\r\n    sender,\r\n    _sendResponse\r\n  ) {\r\n    //主要用于消除因为 return true,但却没有调用 sendResponse 而造成的报错。\r\n    let called = false;\r\n    handler({\r\n      ...message,\r\n      sendResponse(...args: any[]) {\r\n        called = true;\r\n        return _sendResponse(...args);\r\n      },\r\n    }).then(function () {\r\n      if (called) return;\r\n\r\n      _sendResponse();\r\n    });\r\n    return true; //为了使sendResponse可以异步调用，这是必须的\r\n  });\r\n}\r\n","import pick from \"lodash.pick\";\r\nimport { DEFAULT_ANKI_CONNECTION_URL } from \"@/configuration\";\r\nimport { Storage, TabPanelName, PartialStorage } from \"./types\";\r\n\r\n//缓存默认值对象，用于在用户刚刚加载拓展，没有进行任何配置时作为初始配置。\r\n//确保 Storage 中的缓存无论何时都是符合要求的，不存在刚刚加载插件时因为 Storage 为空而导致的问题。\r\nconst defaultStorage: Storage = {\r\n  switchHotkeyAndSelectionListener: true,\r\n  hotKey: \"shiftKey\",\r\n  openSelection: true,\r\n  hiddenChinese: false,\r\n  checkedTabPanel: TabPanelName.Home,\r\n  ankiConnectionMethod: \"AnkiConnection\",\r\n  ankiConnectionURL: DEFAULT_ANKI_CONNECTION_URL,\r\n  switchStrengthenSelectionByPressedCtrl: true,\r\n  wordConfig: {},\r\n  phraseConfig: {},\r\n  sentenceConfig: {},\r\n\r\n  checkWordDuplicate: {\r\n    word: true,\r\n    deckName: true,\r\n    definition: true,\r\n    translation: true,\r\n  },\r\n  checkPhraseDuplicate: {\r\n    phrase: true,\r\n    deckName: true,\r\n  },\r\n  checkSentenceDuplicate: {\r\n    deckName: true,\r\n    sentence: true,\r\n  },\r\n};\r\n\r\ntype StorageKeys = keyof Storage;\r\n\r\ntype StorageHandlers<T extends PartialStorage> = {\r\n  [P in keyof T]?: (value: T[P]) => void;\r\n};\r\n\r\ntype StorageToCallback<T extends PartialStorage> = {\r\n  [P in keyof T]?: (oldVal: T[P], newVal: T[P]) => void;\r\n};\r\n\r\ntype GetStorageCallback = (storage: PartialStorage) => void;\r\n\r\nfunction handlersIsArray(\r\n  handlers: StorageHandlers<Storage> | StorageKeys[]\r\n): handlers is StorageKeys[] {\r\n  return Array.isArray(handlers);\r\n}\r\n\r\nfunction getStorage<K extends StorageKeys>(\r\n  handlers: K[],\r\n  callback: (storage: Pick<Storage, K>) => void\r\n): void;\r\nfunction getStorage(\r\n  handlers: StorageHandlers<Storage>,\r\n  callback?: GetStorageCallback\r\n): void;\r\nfunction getStorage<K extends StorageKeys>(\r\n  handlers: StorageHandlers<Storage> | K[],\r\n  callback?: (storage: Pick<Storage, K>) => void\r\n) {\r\n  const storageKeys = handlersIsArray(handlers)\r\n    ? handlers\r\n    : (Object.keys(handlers) as StorageKeys[]);\r\n  const storage = pick(defaultStorage, storageKeys);\r\n  chrome.storage.local.get(storage, (storage: PartialStorage) => {\r\n    if (!handlersIsArray(handlers)) {\r\n      Object.keys(storage).forEach((key) => {\r\n        const handler = handlers[key as StorageKeys];\r\n        const cacheValue = storage[key as StorageKeys];\r\n        //@ts-ignore 是匹配的值\r\n        handler?.(cacheValue);\r\n      });\r\n    }\r\n    callback?.(storage as Pick<Storage, K>);\r\n  });\r\n}\r\n\r\nexport function getStorageByArray<K extends StorageKeys>(\r\n  names: K[],\r\n  callback: (storage: Pick<Storage, K>) => void\r\n) {\r\n  getStorage(names, callback);\r\n}\r\n\r\nexport function getStorageByObject(\r\n  handlers: StorageHandlers<Storage>,\r\n  callback?: GetStorageCallback\r\n) {\r\n  getStorage(handlers, callback);\r\n}\r\n\r\nexport function onStorageChange(handlers: StorageToCallback<Storage>) {\r\n  const listener: Parameters<typeof chrome.storage.onChanged.addListener>[0] = (\r\n    changes\r\n  ) => {\r\n    Object.keys(changes).forEach((key) => {\r\n      const handler = handlers[key as StorageKeys];\r\n      if (handler) {\r\n        const { oldValue, newValue } = changes[key]!;\r\n        //@ts-ignore 是正确匹配的\r\n        handler(oldValue, newValue);\r\n      }\r\n    });\r\n  };\r\n  chrome.storage.onChanged.addListener(listener);\r\n  return () => {\r\n    chrome.storage.onChanged.removeListener(listener);\r\n  };\r\n}\r\n\r\nexport function setStorage(\r\n  partialStorage: PartialStorage,\r\n  callback?: () => void\r\n) {\r\n  chrome.storage.local.set(partialStorage, callback);\r\n}\r\n","import { ShowData } from \"@/types\";\r\nimport { Command } from \"@/configuration\";\r\n\r\n//向前端发送消息的函数\r\nexport async function postFrontend(command: Command.ShowIframe): Promise<void>;\r\nexport async function postFrontend(\r\n  command: Command.OpenSearchBox\r\n): Promise<void>;\r\nexport async function postFrontend(\r\n  command: Command.ShowInjectTranslation,\r\n  data: Required<ShowData>\r\n): Promise<void>;\r\nexport async function postFrontend(\r\n  command: Command,\r\n  data?: any\r\n): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    chrome.tabs.query({ active: true }, function (tabs) {\r\n      tabs.forEach((tab) => {\r\n        if (!tab.id) return;\r\n        chrome.tabs.sendMessage(tab.id, { command, data }, function (response) {\r\n          resolve(response);\r\n        });\r\n      });\r\n    });\r\n  });\r\n}\r\n\r\nexport function executeScript(\r\n  details: chrome.tabs.InjectDetails,\r\n  callback?: ((result: any[]) => void) | undefined\r\n) {\r\n  chrome.tabs.executeScript(details, callback);\r\n}\r\n","import { HotKey } from \"@/types\";\r\n\r\nexport interface CommonConfig {\r\n  tags: string;\r\n  deckName: string;\r\n  modelName: string;\r\n}\r\n\r\nexport interface WordFields {\r\n  en: string;\r\n  am: string;\r\n  word: string;\r\n  am_audio: string;\r\n  en_audio: string;\r\n  definition: string;\r\n  translation: string;\r\n  star_amount: string;\r\n  example_audio: string;\r\n  part_of_speech: string;\r\n  definition_audio: string;\r\n  example_sentence: string;\r\n  example_sentence_translation: string;\r\n}\r\n\r\nexport interface PhraseFields {\r\n  phrase: string;\r\n  phrase_audio: string;\r\n  translations: string;\r\n  example_audio_1: string;\r\n  example_audio_2: string;\r\n  example_audio_3: string;\r\n  example_sentence_1: string;\r\n  example_sentence_2: string;\r\n  example_sentence_3: string;\r\n  example_sentence_translation_1: string;\r\n  example_sentence_translation_2: string;\r\n  example_sentence_translation_3: string;\r\n}\r\n\r\nexport interface SentenceFields {\r\n  sentence: string;\r\n  sentence_audio: string;\r\n  sentence_translation: string;\r\n}\r\n\r\nexport const enum TabPanelName {\r\n  Home,\r\n  Word,\r\n  Phrase,\r\n  Sentence,\r\n}\r\n\r\nexport type WordConfig = Partial<WordFields & CommonConfig>;\r\nexport type PhraseConfig = Partial<PhraseFields & CommonConfig>;\r\nexport type SentenceConfig = Partial<SentenceFields & CommonConfig>;\r\nexport type ConfigKeys =\r\n  | keyof WordConfig\r\n  | keyof PhraseConfig\r\n  | keyof SentenceConfig;\r\n\r\nexport type CheckWordDuplicate = Partial<\r\n  Record<keyof Omit<WordConfig, \"tags\">, boolean>\r\n>;\r\nexport type CheckPhraseDuplicate = Partial<\r\n  Record<keyof Omit<PhraseConfig, \"tags\">, boolean>\r\n>;\r\nexport type CheckSentenceDuplicate = Partial<\r\n  Record<keyof Omit<SentenceConfig, \"tags\">, boolean>\r\n>;\r\n\r\nexport type DuplicateConfigKeys =\r\n  | keyof CheckWordDuplicate\r\n  | keyof CheckPhraseDuplicate\r\n  | keyof CheckSentenceDuplicate;\r\n\r\nexport type ModelFields =\r\n  | Partial<WordFields>\r\n  | Partial<PhraseFields>\r\n  | Partial<SentenceFields>;\r\n\r\nexport interface Storage {\r\n  switchHotkeyAndSelectionListener: boolean;\r\n  openSelection: boolean;\r\n  hiddenChinese: boolean;\r\n  ankiConnectionURL: string;\r\n  hotKey: HotKey;\r\n  ankiConnectionMethod: string;\r\n  checkedTabPanel: TabPanelName;\r\n  wordConfig: WordConfig;\r\n  phraseConfig: PhraseConfig;\r\n  sentenceConfig: SentenceConfig;\r\n  checkWordDuplicate: CheckWordDuplicate;\r\n  checkPhraseDuplicate: CheckPhraseDuplicate;\r\n  checkSentenceDuplicate: CheckSentenceDuplicate;\r\n  switchStrengthenSelectionByPressedCtrl: boolean;\r\n}\r\n\r\nexport type PartialStorage = Partial<Storage>;\r\n","import React from \"react\";\r\nimport classJoin from \"classnames\";\r\nimport { AnkiButtonInfo, Status } from \"../types\";\r\nimport { openOptionsPage } from \"@/extensions-api\";\r\ninterface Props extends AnkiButtonInfo {\r\n  className: string;\r\n  onClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n}\r\n\r\nexport const AnkiButton = React.memo(function AnkiButton(props: Props) {\r\n  const { status, message, onClick, className, cardIds } = props;\r\n  return (\r\n    <Button\r\n      title={message}\r\n      onClick={(event) => {\r\n        /**\r\n         * 如果重复，则用户点击后可以复制一份用于在 Anki上查看到底有那些重复项\r\n         */\r\n        if (status === Status.Duplicate && cardIds) {\r\n          const queryText = cardIds\r\n            .map((item) => {\r\n              return \"cid:\" + item;\r\n            })\r\n            .join(\" OR \");\r\n          navigator.clipboard.writeText(queryText);\r\n          return;\r\n        }\r\n\r\n        /**\r\n         * 如果出现配置错误，则点击打开配置页面\r\n         */\r\n        if (status === Status.ConfigError) {\r\n          openOptionsPage();\r\n        }\r\n\r\n        onClick(event);\r\n      }}\r\n      className={classJoin(\r\n        \"relative w-8\",\r\n        {\r\n          //\"rounded-l-none\":\r\n          \"bg-emerald-600 hover:bg-emerald-700\": status === Status.Add,\r\n          \"prior:bg-red-600 prior:hover:bg-red-700\": status === Status.Error,\r\n          \"prior:bg-blue-500 prior:hover:bg-blue-600\":\r\n            status === Status.LearnNow,\r\n          \"prior:bg-red-500 prior:hover:bg-red-600\":\r\n            status === Status.Disconnect || status === Status.ConfigError,\r\n          \"prior:bg-yellow-500 prior:hover:bg-yellow-600\":\r\n            status === Status.Forgotten,\r\n          \"prior:bg-orange-500 prior:hover:bg-orange-600\":\r\n            status === Status.Duplicate,\r\n          \"prior:cursor-auto bg-emerald-600 prior:hover:text-white\":\r\n            status === Status.Loading || status === Status.Success,\r\n        },\r\n        className\r\n      )}\r\n    >\r\n      {status}\r\n    </Button>\r\n  );\r\n});\r\n\r\n/*\r\n * 纯组件，封装部分样式\r\n */\r\nconst Button = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ButtonHTMLAttributes<HTMLButtonElement>\r\n>(function Button(props, ref) {\r\n  const { className, children, ...other } = props;\r\n  return (\r\n    <button\r\n      ref={ref}\r\n      {...other}\r\n      className={classJoin(\r\n        `\r\n          rounded-full\r\n          indent-0 \r\n          text-base \r\n          text-center  \r\n          text-white \r\n          hover:text-gray-200 \r\n          select-none\r\n          cursor-pointer\r\n        `,\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n});\r\n","/**\r\n * 实现播放音频功能的按钮\r\n */\r\nimport React, { useRef, useCallback, useImperativeHandle } from \"react\";\r\nimport classJoin from \"classnames\";\r\nimport { useAudio } from \"../hooks\";\r\n\r\ninterface Props {\r\n  audioURL?: string;\r\n  className?: string;\r\n}\r\n\r\nexport const AudioButton = React.forwardRef<{ playAudio: () => void }, Props>(\r\n  function AudioButton(props, ref) {\r\n    const { audioURL, className } = props;\r\n    const audioElement = useAudio();\r\n    const buttonRef = useRef<HTMLButtonElement>(null);\r\n    const playAudio = useCallback(() => {\r\n      try {\r\n        if (!audioURL) return;\r\n        buttonRef.current?.focus();\r\n        //避免重复加载\r\n        if (audioElement.src !== audioURL) {\r\n          audioElement.src = audioURL;\r\n        }\r\n        //重头开始播放\r\n        audioElement.currentTime = 0;\r\n        audioElement.play();\r\n        // eslint-disable-next-line no-empty\r\n      } catch (e) {}\r\n    }, [audioElement, audioURL]);\r\n    useImperativeHandle(\r\n      ref,\r\n      () => {\r\n        return {\r\n          playAudio,\r\n        };\r\n      },\r\n      [playAudio]\r\n    );\r\n    return (\r\n      <button\r\n        className={classJoin(\r\n          `\r\n          h-12\r\n          text-[0px]\r\n          align-text-top\r\n          audio\r\n          focus-visible:underline\r\n          focus-visible:underline-offset-4\r\n          hover:play-audio\r\n          focus:outline-none\r\n          select-none\r\n          cursor-pointer\r\n          `,\r\n          className\r\n        )}\r\n        type=\"button\"\r\n        ref={buttonRef}\r\n        hidden={!audioURL}\r\n        onClick={playAudio}\r\n      >\r\n        播放音频\r\n      </button>\r\n    );\r\n  }\r\n);\r\n","/**\r\n * 实现与Anki交互相关逻辑的模块,并对翻译数据进行渲染\r\n */\r\nimport React, { useCallback } from \"react\";\r\nimport produce from \"immer\";\r\nimport { Command } from \"@/configuration\";\r\nimport {\r\n  WordData,\r\n  isWordData,\r\n  isErrorData,\r\n  isPhraseData,\r\n  isSentenceData,\r\n} from \"@/dictionary\";\r\nimport {\r\n  __main__,\r\n  transformWordData,\r\n  transformPhraseData,\r\n  transformTranslations,\r\n  transformAnkiResponseStatus,\r\n} from \"../utils\";\r\nimport { useMessenger } from \"../hooks\";\r\nimport {\r\n  Status,\r\n  NoteData,\r\n  AnkiButtonInfo,\r\n  DisplayContainerProps,\r\n} from \"../types\";\r\n\r\nimport { Word } from \"./Word\";\r\nimport { Phrase } from \"./Phrase\";\r\nimport { Sentence } from \"./Sentence\";\r\nimport { ErrorComponent } from \"./ErrorComponent\";\r\n\r\nexport function DisplayContainer(props: DisplayContainerProps) {\r\n  const { data, loadingSet, ankiButtonInfoObject, setAnkiButtonInfoObject } =\r\n    props;\r\n\r\n  const _updateAnki = useAnki({\r\n    loadingSet,\r\n    ankiButtonInfoObject,\r\n    setAnkiButtonInfoObject,\r\n  });\r\n\r\n  const updateAnkiWord = useCallback(\r\n    function (index: number) {\r\n      const wordData = transformWordData(data as WordData, index);\r\n      _updateAnki(wordData, __main__, index);\r\n    },\r\n    [data, _updateAnki]\r\n  );\r\n\r\n  const updateAnkiTranslations = useCallback(\r\n    function (key: string, idx: number) {\r\n      _updateAnki(transformTranslations(data as WordData, key, idx), key, idx);\r\n    },\r\n    [data, _updateAnki]\r\n  );\r\n\r\n  //初始阶段data为空\r\n  if (!data) {\r\n    return (\r\n      <p className=\"fixed flex inset-2 justify-center pt-20 text-2xl text-center bg-green-loveEye \">\r\n        翻译记录为空，尚未进行任何翻译\r\n      </p>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isErrorData(data) && <ErrorComponent {...data} />}\r\n      {isWordData(data) && (\r\n        <Word\r\n          {...data}\r\n          updateAnki={updateAnkiWord}\r\n          updateAnkiTranslations={updateAnkiTranslations}\r\n          ankiButtonInfoObject={ankiButtonInfoObject}\r\n        />\r\n      )}\r\n      {isPhraseData(data) && (\r\n        <Phrase\r\n          {...data}\r\n          ankiButtonInfo={ankiButtonInfoObject[__main__]![0]!} //按照设计必定存在值\r\n          updateAnki={() => {\r\n            return _updateAnki(transformPhraseData(data), __main__, 0);\r\n          }}\r\n        />\r\n      )}\r\n      {isSentenceData(data) && (\r\n        <Sentence\r\n          {...data}\r\n          updateAnki={() => {\r\n            return _updateAnki(data, __main__, 0);\r\n          }}\r\n          ankiButtonInfo={\r\n            ankiButtonInfoObject[__main__]![0]! //按照设计必定存在值\r\n          }\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction useAnki(props: Omit<DisplayContainerProps, \"data\">) {\r\n  const { postMessage } = useMessenger();\r\n  const { ankiButtonInfoObject, setAnkiButtonInfoObject, loadingSet } = props;\r\n\r\n  /**\r\n   * 过滤处于某些状态的按钮\r\n   */\r\n  const disableState = useCallback(function (info: AnkiButtonInfo) {\r\n    const { status } = info;\r\n    if (status === Status.Loading) return true;\r\n    if (status === Status.Success) return true;\r\n    return false;\r\n  }, []);\r\n\r\n  const submit = useCallback(\r\n    function (data: NoteData, key: string | typeof __main__, idx: number) {\r\n      //先有相应的数据可以被用户看到，用户的操作才会触发该函数，因此可以断言非空。\r\n      const ankiButtonInfo = ankiButtonInfoObject[key]![idx]!;\r\n      const symbol = `${String(key)}+${idx}`;\r\n      if (disableState(ankiButtonInfo)) return;\r\n      setAnkiButtonInfoObject(function (ankiButtonInfoObject) {\r\n        loadingSet.add(symbol);\r\n        return produce(ankiButtonInfoObject, (draft) => {\r\n          //先有相应的数据可以被用户看到，用户的操作才会触发该函数，因此可以断言非空。\r\n          draft[key]![idx]!.status = Status.Loading;\r\n          draft[key]![idx]!.message = \"请等待...\";\r\n        });\r\n      });\r\n      //处理重置学习进度的逻辑\r\n      const cardIds = ankiButtonInfo.cardIds;\r\n\r\n      if (cardIds) {\r\n        return postMessage(\r\n          Command.RelearnNote,\r\n          cardIds,\r\n          function (ankiResponse) {\r\n            const { status, message, data } = ankiResponse;\r\n            setAnkiButtonInfoObject(function (ankiButtonInfoObject) {\r\n              loadingSet.delete(symbol);\r\n              return produce(ankiButtonInfoObject, (draft) => {\r\n                draft[key]![idx]!.message = message;\r\n                draft[key]![idx]!.cardIds = data || ankiButtonInfo.cardIds;\r\n                draft[key]![idx]!.status = transformAnkiResponseStatus(status);\r\n              });\r\n            });\r\n          }\r\n        );\r\n      }\r\n      //添加卡片的逻辑\r\n      postMessage(Command.AddNote, data, function (ankiResponse) {\r\n        const { message, status, data } = ankiResponse;\r\n        setAnkiButtonInfoObject(function (ankiButtonInfoObject) {\r\n          loadingSet.delete(symbol);\r\n          return produce(ankiButtonInfoObject, (draft) => {\r\n            draft[key]![idx]!.message = message;\r\n            draft[key]![idx]!.cardIds = data || ankiButtonInfo.cardIds;\r\n            draft[key]![idx]!.status = transformAnkiResponseStatus(status);\r\n          });\r\n        });\r\n      });\r\n    },\r\n    [\r\n      loadingSet,\r\n      postMessage,\r\n      disableState,\r\n      ankiButtonInfoObject,\r\n      setAnkiButtonInfoObject,\r\n    ]\r\n  );\r\n  return submit;\r\n}\r\n","/**\r\n * 在翻译返回错误时进行渲染的组件，实现以下功能：\r\n *  - 再次查询 、\r\n *  - 拼写错误建议\r\n */\r\nimport React, { useState } from \"react\";\r\nimport { Loading } from \"./Loading\";\r\nimport { useMessenger } from \"../hooks\";\r\nimport { ErrorData } from \"@/dictionary\";\r\nimport { Command } from \"@/configuration\";\r\n\r\nexport function ErrorComponent(props: ErrorData) {\r\n  const { possibleSpelling, message, queryText } = props;\r\n\r\n  if (possibleSpelling) {\r\n    return <PossibleSpelling possibleSpelling={possibleSpelling} />;\r\n  }\r\n\r\n  return (\r\n    <TranslationAgain\r\n      queryText={queryText}\r\n      message={message}\r\n    ></TranslationAgain>\r\n  );\r\n}\r\nfunction PossibleSpelling(props: { possibleSpelling: string[] }) {\r\n  const { possibleSpelling } = props;\r\n  const { postMessage } = useMessenger();\r\n\r\n  return (\r\n    <div className=\"bg-green-loveEye\">\r\n      <p className=\"font-bold text-gray-700 text-lg\">你要找的是否是：</p>\r\n      <ul>\r\n        {possibleSpelling.map((text) => {\r\n          return (\r\n            <li\r\n              key={text}\r\n              className=\"my-1.5 pl-8 text-base text-blue-600 cursor-pointer\"\r\n              onClick={() => {\r\n                postMessage(Command.TranslateText, text);\r\n              }}\r\n            >\r\n              <a href=\"#\">{text}</a>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction TranslationAgain(props: { queryText?: string; message?: string }) {\r\n  const { postMessage } = useMessenger();\r\n  const { queryText, message } = props;\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  return (\r\n    <div className=\" fixed inset-0  flex flex-col items-center pt-20 bg-green-loveEye\">\r\n      {isLoading && <Loading className=\"fixed inset-0 z-50\" />}\r\n      {queryText && (\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => {\r\n            if (isLoading) return;\r\n            setIsLoading(true);\r\n            setTimeout(function () {\r\n              setIsLoading(false);\r\n            }, 2000);\r\n            postMessage(Command.TranslateText, queryText);\r\n          }}\r\n          className=\" \r\n            px-4 py-2\r\n            font-bold \r\n            leading-6  \r\n            text-sm  \r\n            shadow  \r\n            rounded-md  \r\n            text-white  \r\n            bg-indigo-500  \r\n            hover:bg-indigo-400  \r\n            cursor-pointer \r\n            focus:outline-none  \r\n            focus:ring-2  \r\n            focus:ring-offset-2  \r\n            focus:ring-slate-400  \r\n            focus:ring-offset-slate-50 \r\n          \"\r\n        >\r\n          再次查询\r\n        </button>\r\n      )}\r\n      <p className=\" text-2xl text-center \">{message}</p>\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * 实现以下功能的模块\r\n *  - 历史记录功能\r\n *  - 监听内容脚本渲染翻译的指令\r\n */\r\nimport React, {\r\n  useState,\r\n  useCallback,\r\n  useLayoutEffect,\r\n  useEffect,\r\n  useMemo,\r\n  useRef,\r\n} from \"react\";\r\nimport { Command } from \"@/configuration\";\r\nimport { useMessenger } from \"../hooks\";\r\nimport { History, __main__ } from \"../utils\";\r\nimport { AnkiButtonInfoObject, Status, DisplayContainerProps } from \"../types\";\r\nimport {\r\n  isWordData,\r\n  isErrorData,\r\n  isPhraseData,\r\n  isSentenceData,\r\n  TranslationResult,\r\n} from \"@/dictionary\";\r\nimport { Loading } from \"./Loading\";\r\n\r\ninterface StateRef {\r\n  scrollTop: number;\r\n  forward: () => void;\r\n  ////在使用前会进行赋值\r\n  backward: () => void;\r\n  ////在使用前会进行赋值\r\n  showTranslation: (nextData: TranslationResult, callback: () => void) => void;\r\n  ////在使用前会进行赋值\r\n  history: History<HistoryType>;\r\n  dataCallback?: () => void;\r\n  loadedCallback?: () => void;\r\n}\r\n\r\ninterface HistoryType {\r\n  data: TranslationResult;\r\n  scrollTop: number;\r\n  ankiButtonInfoObject: AnkiButtonInfoObject;\r\n}\r\n\r\nexport function HistoryContainer(props: {\r\n  children: (props: DisplayContainerProps) => void;\r\n}) {\r\n  const { children } = props;\r\n\r\n  //获取必要上下文\r\n  const { postMessage, onMessage } = useMessenger();\r\n\r\n  //相关状态\r\n  const [data, setData] = useState<TranslationResult | undefined>();\r\n  const [ankiButtonInfoObject, setAnkiButtonInfoObject] =\r\n    useState<AnkiButtonInfoObject>({\r\n      //在使用前会进行赋值\r\n      [__main__]: null!,\r\n    });\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  //记录处于 loading 状态的集合\r\n  const loadingSet: Set<string> = useMemo(() => {\r\n    return new Set();\r\n  }, []);\r\n\r\n  //实现引用数据\r\n  const stateRef = useRef<StateRef>({\r\n    scrollTop: 0,\r\n    ////在使用前会进行赋值\r\n    forward: null!,\r\n    ////在使用前会进行赋值\r\n    backward: null!,\r\n    ////在使用前会进行赋值\r\n    showTranslation: null!,\r\n    history: new History(10),\r\n  });\r\n\r\n  /**\r\n   * 更新当前历史条目的信息\r\n   */\r\n\r\n  const updateHistory = useCallback(() => {\r\n    const scrollTop = document.documentElement.scrollTop;\r\n    const result = stateRef.current.history.update({\r\n      data: data!, //进入该函数时 data不为 undefined\r\n      scrollTop,\r\n      ankiButtonInfoObject,\r\n    });\r\n    return result;\r\n  }, [data, ankiButtonInfoObject]);\r\n\r\n  /**\r\n   * 渲染提供的历史条目\r\n   */\r\n  const renderHistory = useCallback(\r\n    (history: HistoryType, callback?: () => void) => {\r\n      const { scrollTop, ankiButtonInfoObject, data } = history;\r\n      stateRef.current.scrollTop = scrollTop;\r\n      //data更新完成后，执行回调函数\r\n      stateRef.current.dataCallback = callback;\r\n      setData(data);\r\n      setAnkiButtonInfoObject(ankiButtonInfoObject);\r\n    },\r\n    []\r\n  );\r\n\r\n  /**\r\n   * 展示前一个历史翻译\r\n   */\r\n  stateRef.current.forward = useCallback(() => {\r\n    updateHistory();\r\n    const history = stateRef.current.history.next();\r\n    if (history) renderHistory(history);\r\n  }, [updateHistory, renderHistory]);\r\n\r\n  /**\r\n   * 展示后一个历史翻译\r\n   */\r\n  stateRef.current.backward = useCallback(() => {\r\n    updateHistory();\r\n    const history = stateRef.current.history.prev();\r\n    if (history) renderHistory(history);\r\n  }, [updateHistory, renderHistory]);\r\n\r\n  /**\r\n   * 创建新的历史记录\r\n   */\r\n  const createHistory = useCallback((data: TranslationResult) => {\r\n    const ankiButtonInfoObject: AnkiButtonInfoObject = { [__main__]: [] };\r\n    //if (data.type === \"ERROR\") {}\r\n    if (isPhraseData(data) || isSentenceData(data)) {\r\n      ankiButtonInfoObject[__main__]!.push({\r\n        status: Status.Add,\r\n        message: \"添加到Anki\",\r\n      });\r\n    }\r\n    if (isWordData(data)) {\r\n      data.translationList?.forEach(() => {\r\n        ankiButtonInfoObject[__main__]!.push({\r\n          status: Status.Add,\r\n          message: \"添加到Anki\",\r\n        });\r\n      });\r\n      //有多少个独立的翻译短语，就有多少个添加按钮\r\n      if (data.translations) {\r\n        Object.entries(data.translations).forEach(([key, value]) => {\r\n          ankiButtonInfoObject[key] = value.map(() => {\r\n            return {\r\n              status: Status.Add,\r\n              message: \"添加到Anki\",\r\n            };\r\n          });\r\n        });\r\n      }\r\n    }\r\n\r\n    return {\r\n      data,\r\n      scrollTop: 0,\r\n      ankiButtonInfoObject,\r\n    };\r\n  }, []);\r\n\r\n  /**\r\n   * 展示翻译数据\r\n   */\r\n  stateRef.current.showTranslation = useCallback(\r\n    (nextData, callback) => {\r\n      const newHistory = createHistory(nextData);\r\n\r\n      if (!data) {\r\n        //最开始的时候，data是undefined\r\n        stateRef.current.history.append(newHistory);\r\n      } else if (isErrorData(data) && !data.cache) {\r\n        //如果当前展示的是错误信息且不缓存，则用新data覆盖\r\n        stateRef.current.history.update(newHistory);\r\n      } else {\r\n        updateHistory(); //缓存当前的\r\n        stateRef.current.history.append(newHistory); //将新信息压入历史栈\r\n      }\r\n\r\n      return renderHistory(newHistory, callback);\r\n    },\r\n    [data, updateHistory, createHistory, renderHistory]\r\n  );\r\n  /**\r\n   * 在历史堆栈变动时，将变动信息发送到内容脚本\r\n   */\r\n  useEffect(\r\n    function () {\r\n      return stateRef.current.history.subscribe((index, head, tail) => {\r\n        postMessage(Command.HistoryIndex, {\r\n          index,\r\n          head,\r\n          tail,\r\n        });\r\n      });\r\n    },\r\n    [postMessage]\r\n  );\r\n  /**\r\n   * 封装了一些可以复用的逻辑\r\n   */\r\n  const displayCallback = useCallback(\r\n    (callback: () => void) => {\r\n      const _fn = function _fn() {\r\n        setIsLoading(false);\r\n        callback();\r\n      };\r\n\r\n      if (loadingSet.size) {\r\n        setIsLoading(true);\r\n        return (stateRef.current.loadedCallback = _fn);\r\n      }\r\n\r\n      _fn();\r\n    },\r\n    [loadingSet]\r\n  );\r\n  /**\r\n   * 监听渲染新翻译的指令\r\n   */\r\n\r\n  useEffect(\r\n    function () {\r\n      return onMessage(Command.ShowTranslation, function (data, callback) {\r\n        displayCallback(function () {\r\n          stateRef.current.showTranslation(data, function () {\r\n            callback();\r\n          });\r\n        });\r\n      });\r\n    },\r\n    [onMessage, displayCallback]\r\n  );\r\n  /**\r\n   * 监听返回上一个历史条目的指令\r\n   */\r\n  useEffect(\r\n    function () {\r\n      return onMessage(Command.BackHistory, function () {\r\n        displayCallback(function () {\r\n          stateRef.current.backward();\r\n        });\r\n      });\r\n    },\r\n    [onMessage, displayCallback]\r\n  );\r\n  /**\r\n   * 监听进入下一个历史条目的指令\r\n   */\r\n\r\n  useEffect(\r\n    function () {\r\n      return onMessage(Command.ForwardHistory, function () {\r\n        displayCallback(function () {\r\n          stateRef.current.forward();\r\n        });\r\n      });\r\n    },\r\n    [displayCallback, onMessage]\r\n  );\r\n  /**\r\n   * 当data更新，则复位滚动条位置\r\n   */\r\n\r\n  useLayoutEffect(\r\n    function () {\r\n      window.scrollTo({\r\n        top: stateRef.current.scrollTop,\r\n      });\r\n    },\r\n    [data]\r\n  );\r\n\r\n  /**\r\n   * 用于实现对某些data改变后执行某个回调函数的功能\r\n   */\r\n  useEffect(\r\n    function () {\r\n      stateRef.current.dataCallback?.();\r\n      stateRef.current.dataCallback = undefined;\r\n    },\r\n    [data]\r\n  );\r\n  /**\r\n   * 所有loading执行完毕后调用的回调\r\n   */\r\n\r\n  useEffect(\r\n    function () {\r\n      if (!loadingSet.size) {\r\n        stateRef.current.loadedCallback?.();\r\n        stateRef.current.loadedCallback = undefined;\r\n      }\r\n    },\r\n    [ankiButtonInfoObject, loadingSet]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {isLoading && <Loading className=\"fixed inset-0 z-50\" />}\r\n      {children({\r\n        data,\r\n        loadingSet,\r\n        ankiButtonInfoObject,\r\n        setAnkiButtonInfoObject,\r\n      })}\r\n    </>\r\n  );\r\n}\r\n","/**\r\n * 一个展示loading状态的组件\r\n */\r\nimport React from \"react\";\r\nimport classJoin from \"classnames\";\r\n\r\nexport const Loading = React.memo(function Loading(props: {\r\n  className: string;\r\n}) {\r\n  const { className } = props;\r\n  return (\r\n    <div\r\n      title=\"loading...\"\r\n      className={classJoin(\r\n        `\r\n        inline-flex\r\n        flex-col\r\n        items-center\r\n        justify-center\r\n        px-4 py-2\r\n        font-bold\r\n        leading-6 \r\n        text-sm \r\n        shadow \r\n        rounded-md \r\n        text-white \r\n        bg-white/70\r\n        transition \r\n        ease-in-out \r\n        duration-150 \r\n        cursor-not-allowed\r\n        select-none\r\n      `,\r\n        className\r\n      )}\r\n    >\r\n      <svg\r\n        className=\" animate-spin h-10 w-10  text-blue-700 \"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        fill=\"none\"\r\n        viewBox=\"0 0 24 24\"\r\n      >\r\n        <circle\r\n          className=\"opacity-25\"\r\n          cx=\"12\"\r\n          cy=\"12\"\r\n          r=\"10\"\r\n          stroke=\"currentColor\"\r\n          strokeWidth=\"4\"\r\n        ></circle>\r\n        <path\r\n          className=\"opacity-75\"\r\n          fill=\"currentColor\"\r\n          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n        ></path>\r\n      </svg>\r\n    </div>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport { PhraseData, ExampleSentence } from \"@/dictionary\";\r\nimport { AudioButton } from \"./AudioButton\";\r\nimport { AnkiButton } from \"./AnkiButton\";\r\nimport { decodeBTag } from \"../utils\";\r\nimport { AnkiButtonInfo } from \"../types\";\r\n\r\ninterface Props extends PhraseData {\r\n  ankiButtonInfo: AnkiButtonInfo;\r\n  updateAnki: () => void;\r\n}\r\n\r\nexport function Phrase(props: Props) {\r\n  const {\r\n    phrase,\r\n    translations,\r\n    phrase_audio,\r\n    ankiButtonInfo,\r\n    example_sentences,\r\n    updateAnki,\r\n  } = props;\r\n  return (\r\n    <div>\r\n      <header className=\"bg-green-loveEye rounded p-1.5\">\r\n        <div className=\"flex items-center\">\r\n          <h1 className=\"text-2xl text-black\">{phrase}</h1>\r\n          <AudioButton audioURL={phrase_audio} className=\"mr-auto ml-1\" />\r\n          <AnkiButton\r\n            {...ankiButtonInfo}\r\n            onClick={updateAnki}\r\n            className=\"float-right\"\r\n          />\r\n        </div>\r\n        <Translations translations={translations} />\r\n      </header>\r\n      {example_sentences && (\r\n        <ExampleSentences example_sentences={example_sentences} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Translations = React.memo(function Translations(props: {\r\n  translations: string[];\r\n}) {\r\n  const { translations } = props;\r\n  return (\r\n    <p className=\"text-base\">\r\n      {translations.flatMap(function (item) {\r\n        return [item, <br key={item} />];\r\n      })}\r\n    </p>\r\n  );\r\n});\r\n\r\nconst ExampleSentences = React.memo(function ExampleSentences(props: {\r\n  example_sentences: ExampleSentence[];\r\n}) {\r\n  const { example_sentences } = props;\r\n  return (\r\n    <ul className=\"mt-2\">\r\n      {example_sentences.map((item, index) => {\r\n        const {\r\n          example_audio,\r\n          example_sentence,\r\n          example_sentence_translation,\r\n        } = item;\r\n        return (\r\n          <li\r\n            key={index}\r\n            className=\"bg-green-loveEye rounded mb-1 text-lg py-1 pl-4\"\r\n          >\r\n            <AudioButton audioURL={example_audio} className=\"float-right\" />\r\n            <p>{decodeBTag(example_sentence)}</p>\r\n            <p className=\"text-blue-800\">{example_sentence_translation}</p>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport { SentenceData } from \"@/dictionary\";\r\nimport { AudioButton } from \"./AudioButton\";\r\nimport { AnkiButton } from \"./AnkiButton\";\r\nimport { AnkiButtonInfo } from \"../types\";\r\n\r\ninterface Props extends SentenceData {\r\n  ankiButtonInfo: AnkiButtonInfo;\r\n  updateAnki: () => void;\r\n}\r\n\r\nexport function Sentence(props: Props) {\r\n  const {\r\n    sentence,\r\n    ankiButtonInfo,\r\n    sentence_audio,\r\n    sentence_translation,\r\n    updateAnki,\r\n  } = props;\r\n  return (\r\n    <div>\r\n      <header className=\"flex items-center p-1.5 bg-green-loveEye rounded\">\r\n        <h1 className=\"text-xl indent-[2em] mr-auto\">{sentence}</h1>\r\n        <AudioButton audioURL={sentence_audio} className=\"float-right\" />\r\n      </header>\r\n      <main className=\"mt-1 bg-green-loveEye p-1.5 text-xl rounded indent-[2em]\">\r\n        <AnkiButton\r\n          {...ankiButtonInfo}\r\n          onClick={updateAnki}\r\n          className=\"float-right\"\r\n        />\r\n        {sentence_translation}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useMemo, useLayoutEffect } from \"react\";\r\nimport { Messenger } from \"@/utils\";\r\nimport { SelectionListener } from \"@/user-operation\";\r\nimport { Command } from \"@/configuration\";\r\nimport { AudioContext, MessengerContext, HiddenChinese } from \"../hooks\";\r\nimport { HistoryContainer } from \"./HistoryContainer\";\r\nimport { DisplayContainer } from \"./DisplayContainer\";\r\n\r\nconst audioElement = document.createElement(\"audio\");\r\n\r\nconst messenger = new Messenger({\r\n  self: window,\r\n  //这是在iframe内的，因此必定存在\r\n  target: window.top!,\r\n});\r\n\r\nconst { onMessage, postMessage } = messenger;\r\nmessenger.install();\r\n\r\nconst selectionListener = new SelectionListener((text) => {\r\n  postMessage(Command.TranslateText, text);\r\n});\r\n//监听停止播放的指令\r\n\r\nonMessage(Command.PauseAudio, () => {\r\n  try {\r\n    audioElement.pause();\r\n    // eslint-disable-next-line no-empty\r\n  } catch (e) {}\r\n});\r\n\r\nonMessage(Command.OpenSelection, (enable) => {\r\n  enable ? selectionListener.install() : selectionListener.uninstall();\r\n});\r\n\r\nexport function View() {\r\n  const [hiddenChinese, setHiddenChinese] = useState(true);\r\n  //需要使用 useLayoutEffect ，以尽可能早的添加该监听\r\n  useLayoutEffect(() => {\r\n    return onMessage(Command.HiddenChinese, (hidden) => {\r\n      setHiddenChinese(hidden);\r\n    });\r\n  }, []);\r\n\r\n  const Container = useMemo(function () {\r\n    return (\r\n      <AudioContext.Provider value={audioElement}>\r\n        <MessengerContext.Provider value={{ onMessage, postMessage }}>\r\n          <HistoryContainer>\r\n            {function (props) {\r\n              return <DisplayContainer {...props} />;\r\n            }}\r\n          </HistoryContainer>\r\n        </MessengerContext.Provider>\r\n      </AudioContext.Provider>\r\n    );\r\n  }, []);\r\n  return (\r\n    <HiddenChinese.Provider value={hiddenChinese}>\r\n      {Container}\r\n    </HiddenChinese.Provider>\r\n  );\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport { AnkiButton } from \"./AnkiButton\";\r\nimport { AudioButton } from \"./AudioButton\";\r\nimport { useHiddenChinese } from \"../hooks\";\r\nimport { decodeBTag, __main__ } from \"../utils\";\r\nimport { AnkiButtonInfo, AnkiButtonInfoObject } from \"../types\";\r\nimport { WordData, ExampleSentence, TranslationItem } from \"@/dictionary\";\r\n\r\ninterface Props extends WordData {\r\n  updateAnki: (index: number) => void;\r\n  ankiButtonInfoObject: AnkiButtonInfoObject;\r\n  updateAnkiTranslations: (key: string, idx: number) => void;\r\n}\r\n\r\nexport function Word(props: Props) {\r\n  const {\r\n    word,\r\n    phonetic,\r\n    updateAnki,\r\n    star_amount,\r\n    translations,\r\n    translationList,\r\n    ankiButtonInfoObject,\r\n    updateAnkiTranslations,\r\n  } = props;\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"bg-green-loveEye p-2 rounded\">\r\n        <WordAndStar word={word} star_amount={star_amount} />\r\n        <div className=\"flex flex-wrap items-center\">\r\n          <Phonetic symbols={phonetic.en} audioURL={phonetic.en_audio} />\r\n          <Phonetic symbols={phonetic.am} audioURL={phonetic.am_audio} />\r\n        </div>\r\n      </header>\r\n      {translationList && (\r\n        <TranslationList\r\n          updateAnki={updateAnki}\r\n          translationList={translationList}\r\n          ankiButtonInfos={ankiButtonInfoObject[__main__]!}\r\n        />\r\n      )}\r\n      {translations && (\r\n        <Translations\r\n          translations={translations}\r\n          updateAnkiTranslations={updateAnkiTranslations}\r\n          ankiButtonInfoObject={ankiButtonInfoObject}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nconst WordAndStar = React.memo(function WordAndStar(props: {\r\n  word: string;\r\n  star_amount: number;\r\n}) {\r\n  const { word, star_amount } = props;\r\n  return (\r\n    <div className=\"flex items-center\">\r\n      <h1 className=\"text-4xl text-black\">{word}</h1>\r\n      <div className=\"leading-tight ml-4 mr-auto self-end text-lg text-yellow-600\">\r\n        {\"★\".repeat(star_amount)}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst Phonetic = React.memo(function Phonetic(props: {\r\n  symbols?: string;\r\n  audioURL?: string;\r\n}) {\r\n  const { symbols, audioURL } = props;\r\n  const ref = useRef<{ playAudio: () => void }>({\r\n    playAudio() {\r\n      return undefined;\r\n    },\r\n  });\r\n\r\n  const playAudio = function playAudio() {\r\n    ref.current.playAudio();\r\n  };\r\n  return (\r\n    <div\r\n      className=\"group flex items-center\"\r\n      hidden={symbols === undefined && audioURL === undefined}\r\n    >\r\n      <p\r\n        hidden={symbols === undefined}\r\n        className=\"cursor-pointer pr-1.5 text-black text-lg\"\r\n        onClick={playAudio}\r\n      >\r\n        {symbols}\r\n      </p>\r\n      <AudioButton\r\n        ref={ref}\r\n        audioURL={audioURL}\r\n        className=\"group-hover:play-audio\"\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\nconst TranslationList = React.memo(function TranslationList(props: {\r\n  ankiButtonInfos: AnkiButtonInfo[];\r\n  translationList: TranslationItem[];\r\n  updateAnki: (index: number) => void;\r\n}) {\r\n  const { translationList, updateAnki, ankiButtonInfos } = props;\r\n  return (\r\n    <ul className=\"mt-2 rounded\">\r\n      {translationList.map(function (item, index) {\r\n        const { example_sentences, ...other } = item;\r\n        return (\r\n          <li className=\"bg-green-loveEye rounded text-base my-2\" key={index}>\r\n            <Explanation\r\n              {...other}\r\n              index={index}\r\n              updateAnki={updateAnki}\r\n              ankiButtonInfo={ankiButtonInfos[index]!}\r\n            />\r\n            {example_sentences && (\r\n              <ExampleSentences exampleSentences={example_sentences} />\r\n            )}\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n});\r\n\r\ninterface ExplanationProps extends TranslationItem {\r\n  index: number;\r\n  updateAnki: (index: number) => void;\r\n  ankiButtonInfo: AnkiButtonInfo;\r\n}\r\n\r\nconst Explanation = React.memo(function Explanation(props: ExplanationProps) {\r\n  const {\r\n    index,\r\n    updateAnki,\r\n    definition,\r\n    translation,\r\n    part_of_speech,\r\n    ankiButtonInfo,\r\n  } = props;\r\n  const hiddenChinese = useHiddenChinese();\r\n  return (\r\n    <div>\r\n      <PartOfSpeech>{part_of_speech}</PartOfSpeech>\r\n      <AnkiButton\r\n        {...ankiButtonInfo}\r\n        onClick={() => {\r\n          return updateAnki(index);\r\n        }}\r\n        className=\"float-right\"\r\n      />\r\n      {decodeBTag(definition)}\r\n      {!hiddenChinese && <span className=\"text-blue-800\">{translation}</span>}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst ExampleSentences = React.memo(function ExampleSentences(props: {\r\n  exampleSentences: ExampleSentence[];\r\n}) {\r\n  const hiddenChinese = useHiddenChinese();\r\n  return (\r\n    <ul>\r\n      {props.exampleSentences.map(function (exampleSentence) {\r\n        const { example_sentence, example_sentence_translation } =\r\n          exampleSentence;\r\n        return (\r\n          <li\r\n            key={example_sentence}\r\n            className=\"border border-black px-4 py-1.5 rounded text-base my-1.5\"\r\n          >\r\n            <p>{example_sentence}</p>\r\n            {!hiddenChinese && (\r\n              <p className=\"text-blue-800\">{example_sentence_translation}</p>\r\n            )}\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n});\r\n\r\nconst Translations = React.memo(function Translations(props: {\r\n  updateAnkiTranslations: (key: string, idx: number) => void;\r\n  ankiButtonInfoObject: AnkiButtonInfoObject;\r\n  translations: {\r\n    [key: string]: string[];\r\n  };\r\n}) {\r\n  const { updateAnkiTranslations, ankiButtonInfoObject, translations } = props;\r\n  return (\r\n    <ul className=\"rounded\">\r\n      {Object.entries(translations).map(function ([partOfSpeech, val]) {\r\n        return (\r\n          <TranslationsLi\r\n            key={partOfSpeech}\r\n            translations={val}\r\n            partOfSpeech={partOfSpeech}\r\n            updateAnkiTranslations={updateAnkiTranslations}\r\n            ankiButtonInfos={ankiButtonInfoObject[partOfSpeech]!}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n});\r\n\r\nconst TranslationsLi = React.memo(function TranslationsLi(props: {\r\n  partOfSpeech: string;\r\n  translations: string[];\r\n  ankiButtonInfos: AnkiButtonInfo[];\r\n  updateAnkiTranslations: (key: string, idx: number) => void;\r\n}) {\r\n  const {\r\n    translations,\r\n    partOfSpeech,\r\n    ankiButtonInfos,\r\n    updateAnkiTranslations,\r\n  } = props;\r\n  return (\r\n    <li key={partOfSpeech} className=\"mt-2 rounded bg-green-loveEye\">\r\n      <ul>\r\n        {translations.map(function (item, idx) {\r\n          return (\r\n            <TranslationLi\r\n              idx={idx}\r\n              key={item}\r\n              item={item}\r\n              partOfSpeech={partOfSpeech}\r\n              ankiButtonInfo={ankiButtonInfos[idx]!}\r\n              updateAnkiTranslations={updateAnkiTranslations}\r\n            />\r\n          );\r\n        })}\r\n      </ul>\r\n    </li>\r\n  );\r\n});\r\n\r\nconst TranslationLi = React.memo(function TranslationLi(props: {\r\n  idx: number;\r\n  item: string;\r\n  partOfSpeech: string;\r\n  ankiButtonInfo: AnkiButtonInfo;\r\n  updateAnkiTranslations: (key: string, idx: number) => void;\r\n}) {\r\n  const { partOfSpeech, item, ankiButtonInfo, idx, updateAnkiTranslations } =\r\n    props;\r\n  return (\r\n    <li className=\"text-base py-2 pl-2 border-b border-black\" key={item}>\r\n      {partOfSpeech && <PartOfSpeech>{partOfSpeech}</PartOfSpeech>}\r\n      <AnkiButton\r\n        className=\"float-right\"\r\n        {...ankiButtonInfo}\r\n        onClick={() => {\r\n          return updateAnkiTranslations(partOfSpeech, idx);\r\n        }}\r\n      />\r\n      {item}\r\n    </li>\r\n  );\r\n});\r\n\r\nconst PartOfSpeech = React.memo(function PartOfSpeech(props: {\r\n  children: string;\r\n}) {\r\n  const part_of_speech = props.children;\r\n  return (\r\n    <span className=\"bg-blue-800 font-bold mr-1 px-3 py-0.5 text-base text-white\">\r\n      {part_of_speech}\r\n    </span>\r\n  );\r\n});\r\n","import React, { useContext } from \"react\";\r\nimport { PostMessage, OnMessage, invariant } from \"@/utils\";\r\n\r\nexport const MessengerContext = React.createContext<{\r\n  onMessage: OnMessage;\r\n  postMessage: PostMessage;\r\n}>(null!);\r\nexport const HiddenChinese = React.createContext<boolean>(null!);\r\nexport const AudioContext = React.createContext<HTMLAudioElement>(null!);\r\n\r\nexport function useMessenger() {\r\n  const result = useContext(MessengerContext);\r\n  invariant(result != null, \"MessengerContext 的值为空\");\r\n  return result;\r\n}\r\n\r\nexport function useHiddenChinese() {\r\n  const result = useContext(HiddenChinese);\r\n  invariant(result != null, \"HiddenChinese 的值为空\");\r\n  return result;\r\n}\r\n\r\nexport function useAudio() {\r\n  const result = useContext(AudioContext);\r\n  invariant(result != null, \"AudioContext 的值为空\");\r\n  return result;\r\n}\r\n","export {\r\n  useAudio,\r\n  useMessenger,\r\n  useHiddenChinese,\r\n  AudioContext,\r\n  HiddenChinese,\r\n  MessengerContext,\r\n} from \"./context\";\r\n","import React, { StrictMode } from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport { View } from \"./components/View\";\r\nimport \"../index.css\";\r\n\r\nconst root = document.getElementById(\"root\")!;\r\nroot.classList.add(\"px-2\", \"pb-2\");\r\ncreateRoot(root).render(\r\n  <StrictMode>\r\n    <View />\r\n  </StrictMode>\r\n);\r\n","import { TranslationResult } from \"@/dictionary\";\r\nimport { WordFields, PhraseFields, SentenceFields } from \"@/extensions-api\";\r\ntype MakeRequired<T, K extends keyof T> = Partial<T> & Required<Pick<T, K>>;\r\n\r\nexport type WordNoteData = MakeRequired<\r\n  WordFields,\r\n  \"word\" | \"star_amount\" | \"translation\" | \"part_of_speech\"\r\n>;\r\n\r\nexport type PhraseNoteData = MakeRequired<\r\n  PhraseFields,\r\n  \"phrase\" | \"phrase_audio\" | \"translations\"\r\n>;\r\n\r\nexport type SentenceNoteData = SentenceFields;\r\n\r\nexport type NoteData = WordNoteData | PhraseNoteData | SentenceNoteData;\r\n\r\nexport const enum Status {\r\n  Add,\r\n  Loading,\r\n  Disconnect,\r\n  Error,\r\n  Success,\r\n  Forgotten,\r\n  LearnNow,\r\n  Duplicate,\r\n  ConfigError,\r\n}\r\n\r\nexport interface AnkiButtonInfo {\r\n  status: Status;\r\n  message: string;\r\n  cardIds?: number[];\r\n}\r\n\r\nexport interface AnkiButtonInfoObject {\r\n  [key: string | symbol]: AnkiButtonInfo[];\r\n}\r\n\r\nexport interface DisplayContainerProps {\r\n  data?: TranslationResult;\r\n  loadingSet: Set<string>;\r\n  ankiButtonInfoObject: AnkiButtonInfoObject;\r\n  setAnkiButtonInfoObject: React.Dispatch<\r\n    React.SetStateAction<AnkiButtonInfoObject>\r\n  >;\r\n}\r\n","/**\r\n * 纯类，实现历史记录的类，其特点是有最大上限，达到最大上限后，队列最后的元素会被取代\r\n */\r\ntype SubscribeCallback = (index: number, head: number, tail: number) => void;\r\n\r\nexport class History<T> {\r\n  head: number;\r\n  tail: number;\r\n  index: number;\r\n  maxAmount: number;\r\n  cacheArray: Array<T>;\r\n  subscribes: Array<SubscribeCallback>;\r\n\r\n  constructor(maxAmount = 10) {\r\n    this.head = 0;\r\n    this.tail = -1;\r\n    this.index = -1;\r\n    this.cacheArray = [];\r\n    this.subscribes = [];\r\n    this.maxAmount = maxAmount;\r\n  }\r\n  prev() {\r\n    const { head, index, maxAmount } = this;\r\n    if (index <= head) return;\r\n    this.index--;\r\n    this.subscribes.forEach((fn) => {\r\n      return fn(this.index, this.head, this.tail);\r\n    });\r\n    return this.cacheArray[this.index % maxAmount];\r\n  }\r\n  next() {\r\n    const { tail, index, maxAmount } = this;\r\n    if (index >= tail) return;\r\n    this.index++;\r\n    this.subscribes.forEach((fn) => {\r\n      return fn(this.index, this.head, this.tail);\r\n    });\r\n    return this.cacheArray[this.index % maxAmount];\r\n  }\r\n  append(value: T) {\r\n    this.index++;\r\n    const { cacheArray, maxAmount, index, head } = this;\r\n    this.tail = index;\r\n    this.head = Math.max(index + 1 - maxAmount, head);\r\n    this.subscribes.forEach((fn) => {\r\n      return fn(this.index, this.head, this.tail);\r\n    });\r\n    cacheArray[index % maxAmount] = value;\r\n    return value;\r\n  }\r\n  update(value: T) {\r\n    const { index, maxAmount, cacheArray } = this;\r\n    cacheArray[index % maxAmount] = value;\r\n    return value;\r\n  }\r\n  subscribe(callback: SubscribeCallback) {\r\n    this.subscribes.push(callback);\r\n    return () => {\r\n      this.subscribes = this.subscribes.filter(function (fn) {\r\n        return fn !== callback;\r\n      });\r\n    };\r\n  }\r\n}\r\n","import React, { ReactNode } from \"react\";\r\n\r\nexport function decodeBTag(text: string): ReactNode[] {\r\n  const reg = new RegExp(`(<b>.+?)</b>`, \"gi\");\r\n  const textArr = text.split(reg);\r\n  return textArr.reduce((result, text, index) => {\r\n    let reactNode: ReactNode = text;\r\n    if (text.includes(\"<b>\")) reactNode = <b key={index}>{text.slice(3)}</b>;\r\n    result.push(reactNode);\r\n    return result;\r\n  }, [] as ReactNode[]);\r\n}","export { History } from \"./History\";\r\nexport { decodeBTag } from \"./decodeBTag\";\r\nexport {\r\n  transformPhraseData,\r\n  transformTranslations,\r\n  transformWordData,\r\n  transformAnkiResponseStatus,\r\n} from \"./transform\";\r\n\r\nexport const __main__ = Symbol();\r\n","import { AnkiResponseStatus } from \"@/anki\";\r\nimport { WordData, PhraseData } from \"@/dictionary\";\r\nimport { __main__ } from \"../utils\";\r\nimport { WordNoteData, PhraseNoteData, Status } from \"../types\";\r\n\r\n/**\r\n * 纯函数，用于处理有定义的单词翻译\r\n */\r\nexport function transformWordData(\r\n  wordData: WordData,\r\n  index: number\r\n): WordNoteData {\r\n  const { word, phonetic, star_amount, translationList } = wordData;\r\n  const { am, en, am_audio, en_audio } = phonetic;\r\n  //之所以必定有，是这个函数是用户在看到 translationList 存在后添加是调用的\r\n  const {\r\n    definition,\r\n    translation,\r\n    part_of_speech,\r\n    definition_audio,\r\n    example_sentences,\r\n  } = translationList![index]!;\r\n\r\n  let example_audio, example_sentence, example_sentence_translation;\r\n  const firstExample = example_sentences?.[0];\r\n  if (firstExample) {\r\n    example_audio = firstExample.example_audio;\r\n    example_sentence = firstExample.example_sentence;\r\n    example_sentence_translation = firstExample.example_sentence_translation;\r\n  }\r\n\r\n  const noteWordData = {\r\n    word,\r\n    star_amount: \"★\".repeat(star_amount),\r\n    am,\r\n    en,\r\n    am_audio,\r\n    en_audio,\r\n    part_of_speech,\r\n    translation,\r\n    definition,\r\n    definition_audio,\r\n    example_audio,\r\n    example_sentence,\r\n    example_sentence_translation,\r\n  };\r\n  return noteWordData;\r\n}\r\n/**\r\n * 纯函数，用于处理那些没有定义的单词翻译\r\n */\r\n\r\nexport function transformTranslations(\r\n  wordData: WordData,\r\n  key: string,\r\n  idx: number\r\n): WordNoteData {\r\n  const { star_amount, phonetic, word, translations } = wordData;\r\n  const { am, en, am_audio, en_audio } = phonetic;\r\n\r\n  const noteWordData = {\r\n    word,\r\n    star_amount: \"★\".repeat(star_amount),\r\n    part_of_speech: key,\r\n    //必然存在的，因为只有存在才会调用该函数\r\n    translation: translations![key]![idx]!,\r\n    am,\r\n    en,\r\n    am_audio,\r\n    en_audio,\r\n  };\r\n  return noteWordData;\r\n}\r\n\r\n/**\r\n * 纯函数，将PhraseData格式转换为NotePhraseData格式\r\n */\r\n\r\nexport function transformPhraseData(data: PhraseData): PhraseNoteData {\r\n  const { phrase, phrase_audio, translations, example_sentences } = data;\r\n  const notePhraseData = {\r\n    phrase,\r\n    phrase_audio,\r\n    translations: translations.join(\" <br /> \"),\r\n  };\r\n  if (example_sentences == null) return notePhraseData;\r\n  return Object.assign(notePhraseData, {\r\n    example_sentence_1: example_sentences[0]?.example_sentence,\r\n    example_sentence_translation_1:\r\n      example_sentences[0]?.example_sentence_translation,\r\n    example_audio_1: example_sentences[0]?.example_audio,\r\n    example_sentence_2: example_sentences[1]?.example_sentence,\r\n    example_sentence_translation_2:\r\n      example_sentences[1]?.example_sentence_translation,\r\n    example_audio_2: example_sentences[1]?.example_audio,\r\n    example_sentence_3: example_sentences[2]?.example_sentence,\r\n    example_sentence_translation_3:\r\n      example_sentences[2]?.example_sentence_translation,\r\n    example_audio_3: example_sentences[2]?.example_sentence_translation,\r\n  });\r\n}\r\n\r\n/**\r\n * 纯函数，用于将AnkiResponse的status装换为AnkiButtonStatus\r\n */\r\n\r\nexport function transformAnkiResponseStatus(status: AnkiResponseStatus) {\r\n  switch (status) {\r\n    case AnkiResponseStatus.Success: {\r\n      return Status.Success;\r\n    }\r\n    case AnkiResponseStatus.Forgotten: {\r\n      return Status.Forgotten;\r\n    }\r\n    case AnkiResponseStatus.Duplicate: {\r\n      return Status.Duplicate;\r\n    }\r\n    case AnkiResponseStatus.Disconnect: {\r\n      return Status.Disconnect;\r\n    }\r\n    case AnkiResponseStatus.ConfigError: {\r\n      return Status.ConfigError;\r\n    }\r\n    case AnkiResponseStatus.FirstAddSuccess: {\r\n      return Status.LearnNow;\r\n    }\r\n    default: {\r\n      //AnkiResponseStatus.Error\r\n      //AnkiResponseStatus.OldVersion\r\n      //AnkiResponseStatus.UnexpectedError\r\n      return Status.Error;\r\n    }\r\n  }\r\n}\r\n","import type { Point } from \"@/types\";\r\n\r\nexport class CursorListener {\r\n  private clientPoint:Point = { x: 0, y: 0 }\r\n  private screenPoint:Point = { x: 0, y: 0 }\r\n  getClientPoint = () => {\r\n    return this.clientPoint;\r\n  }\r\n  getScreenPoint = () => {\r\n    return this.screenPoint;\r\n  }\r\n  install = () => {\r\n    document.addEventListener(\"mousemove\", this.onMouseMove, true); //避免被阻止冒泡导致失效\r\n  }\r\n  uninstall = () => {\r\n    document.removeEventListener(\"mousemove\", this.onMouseMove, true);\r\n  }\r\n  private onMouseMove = (event: MouseEvent) => {\r\n    const { clientX, clientY, screenY, screenX } = event;\r\n    this.clientPoint = {\r\n      x: clientX,\r\n      y: clientY,\r\n    };\r\n    this.screenPoint = {\r\n      x: screenX,\r\n      y: screenY,\r\n    };\r\n  }\r\n}\r\n","import {\r\n  getSelectionText,\r\n  getRangeFromPoint,\r\n  isContentEditable,\r\n  isSearchContainer,\r\n  UserSelectHandler,\r\n} from \"./utils\";\r\nimport type { HotKey, TranslateAndDisplayText, GetPoint } from \"@/types\";\r\n\r\nexport class HotKeyListener {\r\n  modify;\r\n  restore;\r\n  private hotKey?: HotKey;\r\n  private checkout: RegExp;\r\n  private getPoint: GetPoint;\r\n  private translateAndDisplayText: TranslateAndDisplayText;\r\n\r\n  constructor(\r\n    translateAndDisplayText: TranslateAndDisplayText,\r\n    getPoint: GetPoint\r\n  ) {\r\n    this.getPoint = getPoint;\r\n    this.translateAndDisplayText = translateAndDisplayText;\r\n    this.hotKey = \"shiftKey\";\r\n    this.checkout = /[a-z_]/i;\r\n\r\n    const { modify, restore } = new UserSelectHandler();\r\n    this.modify = modify;\r\n    this.restore = restore;\r\n  }\r\n\r\n  updateHotKey = (hotKey: HotKey | undefined) => {\r\n    this.hotKey = hotKey;\r\n  };\r\n\r\n  install = () => {\r\n    document.addEventListener(\"keydown\", this.onKeyDown);\r\n  };\r\n  uninstall = () => {\r\n    document.removeEventListener(\"keydown\", this.onKeyDown);\r\n    this.restore();\r\n  };\r\n\r\n  private onKeyDown = (event: KeyboardEvent) => {\r\n    const { hotKey } = this;\r\n\r\n    if (hotKey && event[hotKey]) {\r\n      //当焦点在可输入元素上，不进行热键选词\r\n      const focusNode = document.activeElement;\r\n      if (focusNode && isContentEditable(focusNode)) return;\r\n      //这是一个用 div 封装的 input\r\n      if (isSearchContainer(focusNode)) return;\r\n\r\n      const { x, y } = this.getPoint();\r\n      this.autoSelectText(x, y);\r\n      const selectedText = getSelectionText();\r\n      if (!selectedText) return;\r\n      this.translateAndDisplayText(selectedText);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 判断是否符合自动选中条件\r\n   * @param letter 当前需要判断的字母\r\n   * @returns Boolean\r\n   */\r\n  private validate = (letter: string) => {\r\n    if (letter == null) return false;\r\n    return this.checkout.test(letter);\r\n  };\r\n\r\n  /**\r\n   * 根据用户鼠标的当前位置，自动选中符合要求的文本，表现为对应文本拖蓝选中\r\n   * @param x ClientX\r\n   * @param y ClientY\r\n   * @returns\r\n   */\r\n  private autoSelectText = (x: number, y: number) => {\r\n    let range = getRangeFromPoint(x, y);\r\n    if (!range) return;\r\n\r\n    range = this.extendRange(range);\r\n    if (range == null) return;\r\n\r\n    const selection = getSelection();\r\n    if (!selection) return;\r\n\r\n    //避免因为 user-select:none 而导致 热键选中失效\r\n    const target = range.commonAncestorContainer.parentElement;\r\n    if (target != null) {\r\n      this.modify(target);\r\n    }\r\n\r\n    //只有 firefox支持多个拖蓝选中，而其它浏览器不支持，因此如果不先清空原有的range，则后面的添加无效\r\n    selection.removeAllRanges();\r\n    //用拖蓝形式展现被选中的单词\r\n    selection.addRange(range);\r\n  };\r\n\r\n  /**\r\n   * 传入一个 选中文本节点 的 Range对象，\r\n   * 按照一定要求对其进行扩充，\r\n   * 返回一个新的Range\r\n   *\r\n   * @param range Range\r\n   * @returns Range\r\n   */\r\n  private extendRange = (range: Range): Range | null => {\r\n    const textNode = range.startContainer;\r\n    //并非文本节点，退出\r\n    if (!isText(textNode)) return null;\r\n    const limit_left = 0;\r\n    const limit_right = textNode.length;\r\n    const text = textNode.data;\r\n    let { startOffset, endOffset } = range;\r\n\r\n    //如果当前鼠标位置的字符不符合要求，则表明无需进行自动选取\r\n    if (!this.validate(text[startOffset])) return range;\r\n\r\n    while (limit_left <= startOffset) {\r\n      const letter = text[startOffset];\r\n      if (this.validate(letter)) {\r\n        startOffset--;\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n    //回退到前一个符合要求的字符\r\n    startOffset++;\r\n    //startOffset与endOffset在一开始是相等的，避免重复验证同一个字符\r\n    endOffset++;\r\n    while (endOffset < limit_right) {\r\n      const letter = text[endOffset];\r\n\r\n      if (this.validate(letter)) {\r\n        endOffset++;\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n    //因为setEnd不包括endOffset，因此不用回退到上一个符合要求的字符\r\n    //但需要注意，避免endOffset超出limit_right\r\n    endOffset = Math.min(limit_right, endOffset);\r\n    const newRange = new Range();\r\n    newRange.setStart(textNode, startOffset);\r\n    newRange.setEnd(textNode, endOffset);\r\n    return newRange;\r\n  };\r\n}\r\n\r\nfunction isText(node: Node): node is Text {\r\n  return node.nodeType === 3;\r\n}\r\n","/**\r\n * 允许用户通过搜索栏主动输入单词，而后对单词进行查询\r\n */\r\nimport { attachSymbolToSearchContainer } from \"./utils\";\r\nimport type { TranslateAndDisplayText } from \"@/types\";\r\n\r\nexport class SearchBox {\r\n  openSearchBox;\r\n  closeSearchBox;\r\n  private container;\r\n\r\n  constructor(translateAndDisplayText: TranslateAndDisplayText) {\r\n    const { container, openSearchBox, closeSearchBox } = createSearchBar(\r\n      translateAndDisplayText\r\n    );\r\n    this.container = container;\r\n    this.openSearchBox = openSearchBox;\r\n    this.closeSearchBox = closeSearchBox\r\n  }\r\n  install = () => {\r\n    document.body.append(this.container);\r\n  };\r\n  uninstall = () => {\r\n    this.closeSearchBox()\r\n    this.container.remove();\r\n  }\r\n}\r\n\r\nconst FORM_ID = \"search-form\";\r\nconst INPUT_ID = \"search-input\";\r\nconst BUTTON_ID = \"search-button\";\r\n/**\r\n * 创建搜索条\r\n */\r\nfunction createSearchBar(translateAndDisplayText: TranslateAndDisplayText) {\r\n  const container = document.createElement(\"div\");\r\n  attachSymbolToSearchContainer(container);\r\n  //实现幽灵节点\r\n  container.style.setProperty(\"display\", \"contents\", \"important\");\r\n  const shadow = container.attachShadow({\r\n    mode: \"open\",\r\n  });\r\n  shadow.innerHTML = `\r\n    <style>\r\n      #${FORM_ID} {\r\n        display:none;\r\n        box-sizing: border-box;\r\n        position: fixed;\r\n        z-index: 99999;\r\n        left: 50%;     \r\n        right: 0;       \r\n        top: 10vh;\r\n        margin: auto;\r\n        min-width: 200px;\r\n        width: 25%;\r\n        border: 1px solid #666;\r\n        border-radius: 5px;\r\n        background:white;\r\n        box-shadow: 1px 1px 2px -1px #333;\r\n      }\r\n      #${INPUT_ID} {\r\n        flex: 1;\r\n        box-sizing: border-box;\r\n        width: 100%;\r\n        border: none;\r\n        border-radius: 5px 0 0 5px;\r\n        padding: 0 10px;\r\n        outline: none;\r\n        font-size: 16px;\r\n        line-height: 2;\r\n      }\r\n      #${BUTTON_ID} {\r\n        font-size: 28px;\r\n        line-height: 1;\r\n        border: none;\r\n        border-radius: 0 5px 5px 0;\r\n        background: white;\r\n        outline:none;\r\n      }\r\n      #${BUTTON_ID}:hover,\r\n      #${BUTTON_ID}:focus {\r\n        background: #e6e6e6;\r\n      }\r\n      .vertical {\r\n        width: 1px;\r\n        background: #666;\r\n        margin: 3px 0;\r\n      }\r\n    </style>    \r\n    <form action=\"#\" autocomplete=\"off\" id=\"${FORM_ID}\">\r\n      <input type=\"text\" id=\"${INPUT_ID}\"/>\r\n      <span class=\"vertical\"></span>\r\n      <button type=\"button\" id=\"${BUTTON_ID}\">×</button>\r\n    </form>\r\n  `;\r\n  const form = shadow.getElementById(FORM_ID) as HTMLFormElement;\r\n  const input = shadow.getElementById(INPUT_ID) as HTMLInputElement;\r\n  const button = shadow.getElementById(BUTTON_ID) as HTMLButtonElement;\r\n  //绑定事件监听\r\n  //当用户按下enter键时进行查询\r\n  form.addEventListener(\"submit\", function (event) {\r\n    event.preventDefault();\r\n    var text = input.value.trim();\r\n    if (text) {\r\n      translateAndDisplayText(text);\r\n    }\r\n  });\r\n\r\n  button.addEventListener(\"click\", closeSearchBox);\r\n\r\n  function closeSearchBox() {\r\n    input.value = \"\";\r\n    form.style.display = \"none\";\r\n  }\r\n\r\n  function openSearchBox() {\r\n    form.style.display = \"flex\";\r\n    input.focus();\r\n    input.select();\r\n  }\r\n\r\n  return {\r\n    container,\r\n    openSearchBox,\r\n    closeSearchBox,\r\n  };\r\n}\r\n","/**\r\n * 双击选中翻译事件\r\n */\r\nimport {\r\n  getSelectionText,\r\n  isContentEditable,\r\n  isSearchContainer,\r\n} from \"./utils\";\r\n\r\nimport type{ TranslateAndDisplayText } from \"@/types\";\r\n\r\nexport class SelectionListener {\r\n  private enableCtrl = true;\r\n  private selectionChanged = false;\r\n  private translateAndDisplayText: TranslateAndDisplayText;\r\n\r\n  constructor(translateAndDisplayText: TranslateAndDisplayText) {\r\n    this.translateAndDisplayText = translateAndDisplayText;\r\n  }\r\n\r\n  install = () => {\r\n    document.addEventListener(\"mousedown\", this.onMouseDown);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n  };\r\n  uninstall = () => {\r\n    document.removeEventListener(\"mousedown\", this.onMouseDown);\r\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\r\n  };\r\n\r\n  /**\r\n   * @param value true,使得用户能够在按住 Ctrl键进行选取时，可以翻译 可输入元素内部的文本，false则是不可以\r\n   */\r\n  switchStrengthenSelectionByPressedCtrl = (value: boolean) =>{\r\n    this.enableCtrl = value;\r\n  }\r\n\r\n  private onMouseDown = () => {\r\n    document.addEventListener(\"selectionchange\", this.onSelectionChange, {\r\n      once: true,\r\n    });\r\n  };\r\n\r\n  private onSelectionChange = () => {\r\n    this.selectionChanged = true;\r\n  };\r\n\r\n  /**\r\n   * 当用户拖蓝选取文本时，鼠标抬起是进行查询的时间\r\n   * 当用户双击选取文本时，鼠标抬起也是进行查询的时机\r\n   * @returns void\r\n   */\r\n  private onMouseUp = (event: MouseEvent) => {\r\n    if (!this.selectionChanged) {\r\n      document.removeEventListener(\"selectionchange\", this.onSelectionChange);\r\n      return;\r\n    }\r\n\r\n    this.selectionChanged = false;\r\n    const selectedText = getSelectionText();\r\n    if (!selectedText) return;\r\n\r\n    const hotKey = event.ctrlKey;\r\n    const focusNode = document.activeElement;\r\n    //判断是否跳过对于可编辑元素的过滤\r\n    if (!(this.enableCtrl && hotKey)) {\r\n      //不对输入框中的文本进行选中翻译\r\n      if (focusNode && isContentEditable(focusNode)) return;\r\n    }\r\n    if (isSearchContainer(focusNode)) return;\r\n\r\n    this.translateAndDisplayText(selectedText);\r\n  };\r\n}\r\n","export { SearchBox } from \"./SearchBox\";//创建一个搜索框，允许用户搜索\r\nexport { CursorListener } from \"./CursorListener\";//实时监听鼠标位置\r\nexport { HotKeyListener } from \"./HotKeyListener\";//监听用户热键选词翻译的操作\r\nexport { SelectionListener } from \"./SelectionListener\";//监听用户双击、拖蓝选中翻译的操作\r\n","const USER_SELECT = \"user-select\";\r\n\r\nexport class UserSelectHandler {\r\n  modifiedHTMLElements: Map<HTMLElement, [string, string]> = new Map();\r\n  modify = (element: HTMLElement) => {\r\n    const modifiedHTMLElements = this.modifiedHTMLElements;\r\n    if (!modifiedHTMLElements.has(element)) {\r\n      var userSelectValue = element.style.getPropertyValue(USER_SELECT);\r\n      var userSelectPriority = element.style.getPropertyPriority(USER_SELECT);\r\n      modifiedHTMLElements.set(element, [userSelectValue, userSelectPriority]);\r\n      element.style.setProperty(USER_SELECT, \"text\", \"important\");\r\n    }\r\n  };\r\n  restore = () => {\r\n    const modifiedHTMLElements = this.modifiedHTMLElements;\r\n    modifiedHTMLElements.forEach(function ([value, priority], element) {\r\n      element.style.setProperty(USER_SELECT, value, priority);\r\n    });\r\n    modifiedHTMLElements.clear();\r\n  };\r\n}\r\n\r\n","/**\r\n * 对 document.caretPositionFromPoint/caretRangeFromPoint 进行浏览器兼容处理\r\n * @param x clientX\r\n * @param y clientY\r\n * @returns Range\r\n */\r\n export function getRangeFromPoint(x: number, y: number): Range | null {\r\n  if (\"caretRangeFromPoint\" in document) {\r\n    return document.caretRangeFromPoint(x, y)\r\n  }\r\n\r\n  if (\"caretPositionFromPoint\" in document) {\r\n    //@ts-ignore 该方法存在于firefox\r\n    let caretPosition = document.caretPositionFromPoint(x, y)\r\n    if (!caretPosition) return null\r\n    let { offsetNode, offset } = caretPosition\r\n    let range = document.createRange()\r\n    range.setStart(offsetNode, offset)\r\n    return range\r\n  }\r\n  if (__DEV__) {\r\n    throw new Error(\"没有在 document 上找到 'caretPositionFromPoint' 或者 'caretRangeFromPoint' 方法，无法实现热键选中功能。\")\r\n  }\r\n  return null\r\n}","export function getSelectionText(): string | undefined {\r\n  let selection = getSelection()\r\n  return selection?.toString().trim()\r\n}","export { getSelectionText } from \"./getSelectionText\";\r\nexport { getRangeFromPoint } from \"./getRangeFromPoint\";\r\nexport { isContentEditable } from \"./isContentEditable\";\r\nexport { UserSelectHandler } from \"./UserSelectHandler\";\r\nexport {\r\n  isSearchContainer,\r\n  attachSymbolToSearchContainer,\r\n} from \"./verifySearchContainer\";\r\n","export function isContentEditable(element:Element) {\r\n  if ([\"INPUT\", \"TEXTAREA\"].includes(element.tagName)) return true;\r\n  if (element instanceof HTMLElement && element.isContentEditable) return true;\r\n  return false;\r\n}","const SEARCH_CONTAINER_ID = \"ANKI_BROWSER_EXTENSIONS_SEARCH_CONTAINER_ID\";\r\nconst ATTRIBUTE_NAME = \"ANKI_BROWSER_EXTENSIONS_SEARCH_CONTAINER_ATTRIBUTE_NAME\"\r\n\r\nexport function isSearchContainer(element:unknown) {\r\n  if (element == null) return false;\r\n  if (!(element instanceof HTMLElement)) return false\r\n  return element.getAttribute(ATTRIBUTE_NAME) === SEARCH_CONTAINER_ID;\r\n}\r\n\r\nexport function attachSymbolToSearchContainer(element:Element) {\r\n  element.setAttribute(ATTRIBUTE_NAME, SEARCH_CONTAINER_ID);\r\n}","/**\r\n * 对 window.addEventListener(\"message\",callback) 与 window.postMessage 进行二次封装，\r\n *  使window.postMessage具备回调函数功能\r\n */\r\n\r\nimport { FunctionAny } from \"@/types\";\r\nimport { Command } from \"@/configuration\";\r\nimport { warning, invariant } from \"@/utils\";\r\nimport { NoteData } from \"@/translation-page\";\r\nimport { TranslationResult } from \"@/dictionary\";\r\nimport { AddNoteReturnType, RelearnCardsReturnType } from \"@/anki\";\r\n\r\nlet uniqueId = 1;\r\nconst CALLBACK = \"CALLBACK\";\r\n\r\ninterface MessageData {\r\n  command: Command;\r\n  //可选\r\n  data?: any;\r\n  callbackName?: number;\r\n}\r\nexport type PostMessage = Messenger[\"postMessage\"];\r\nexport type OnMessage = Messenger[\"onMessage\"];\r\nexport class Messenger {\r\n  target?: Window;\r\n  self: Window;\r\n  callbacks: { [key: number]: FunctionAny };\r\n  handlers: { [key: string]: FunctionAny[] };\r\n\r\n  constructor(options: { self: Window; target?: Window }) {\r\n    this.self = options.self;\r\n    this.target = options.target;\r\n    this.handlers = Object.create(null);\r\n    this.callbacks = Object.create(null);\r\n    this.onMessage = this.onMessage.bind(this);\r\n    this.postMessage = this.postMessage.bind(this);\r\n  }\r\n  install = () => {\r\n    const { self } = this;\r\n    self.addEventListener(\"message\", this.handleMessage);\r\n  };\r\n  uninstall = () => {\r\n    const { self } = this;\r\n    self.removeEventListener(\"message\", this.handleMessage);\r\n  };\r\n  addTarget = (target: Window) => {\r\n    this.target = target;\r\n  };\r\n  handleMessage = (event: MessageEvent<MessageData>) => {\r\n    const { target, handlers, callbacks } = this;\r\n    const source = event.source;\r\n    const { data, command, callbackName } = event.data;\r\n    if (target !== source) return;\r\n    const callback = callbackName == null ? null : callbacks[callbackName]; // 注释一\r\n    //执行回调专用指令(回调函数响应)\r\n    //@ts-ignore 内部使用，不对外暴露\r\n    if (command === CALLBACK && callback == null) return;\r\n    //@ts-ignore 内部使用，不对外暴露\r\n    if (command === CALLBACK && callback) {\r\n      callback(data);\r\n      //@ts-ignore 根据 注释一 ,callback 存在，则 callbackName 必定不为 undefined\r\n      delete callbacks[callbackName];\r\n      return;\r\n    }\r\n\r\n    if (__DEV__) {\r\n      warning(\r\n        handlers[command] != null && handlers[command]!.length !== 0,\r\n        `对于指令 ${Command[command]} ,未添加任何处理函数`\r\n      );\r\n    }\r\n\r\n    if (handlers[command] != null) {\r\n      handlers[command]!.forEach((fn) => {\r\n        fn(data, (data: any) => {\r\n          //传递给用户的回调函数，下面是内部发送逻辑\r\n          if (callbackName != null) {\r\n            //只有设置了回调函数的指令调用该方法时才有效。\r\n            //@ts-ignore CALLBACK 为内部使用的，用于触发回调\r\n            this.postMessage(CALLBACK, data, callbackName);\r\n          }\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  //translation-page listen agent\r\n  onMessage(command: Command.BackHistory, listener: () => void): () => void;\r\n  onMessage(command: Command.ForwardHistory, listener: () => void): () => void;\r\n  onMessage(command: Command.PauseAudio, listener: () => void): () => void;\r\n  onMessage(\r\n    command: Command.OpenSelection,\r\n    listener: (data: boolean) => void\r\n  ): () => void;\r\n  onMessage(\r\n    command: Command.HiddenChinese,\r\n    listener: (data: boolean) => void\r\n  ): () => void;\r\n  onMessage(\r\n    command: Command.ShowTranslation,\r\n    listener: (data: TranslationResult, callback: () => void) => void\r\n  ): () => void;\r\n\r\n  //agent listen translation-page\r\n  onMessage(\r\n    command: Command.TranslateText,\r\n    listener: (data: string) => void\r\n  ): () => void;\r\n  onMessage(\r\n    command: Command.HistoryIndex,\r\n    listener: (data: { index: number; head: number; tail: number }) => void\r\n  ): () => void;\r\n  onMessage(\r\n    command: Command.RelearnNote,\r\n    listener: (\r\n      data: number[],\r\n      callback: (data: RelearnCardsReturnType) => void\r\n    ) => void\r\n  ): () => void;\r\n  onMessage(\r\n    command: Command.AddNote,\r\n    listener: (\r\n      data: NoteData,\r\n      callback: (data: AddNoteReturnType) => void\r\n    ) => void\r\n  ): () => void;\r\n  onMessage(command: Command, listener: FunctionAny): () => void {\r\n    const handlers = this.handlers;\r\n\r\n    if (handlers[command] == null) {\r\n      handlers[command] = [listener];\r\n    } else {\r\n      handlers[command]!.push(listener);\r\n    }\r\n    //单例\r\n    let called = false;\r\n    return function () {\r\n      if (called) return;\r\n      called = true;\r\n      handlers[command] = handlers[command]!.filter((fn) => {\r\n        return fn !== listener;\r\n      });\r\n    };\r\n  }\r\n  //agent to translation-page\r\n  postMessage(command: Command.PauseAudio): void;\r\n  postMessage(command: Command.BackHistory): void;\r\n  postMessage(command: Command.ForwardHistory): void;\r\n  postMessage(command: Command.OpenSelection, data: boolean): void;\r\n  postMessage(command: Command.HiddenChinese, data: boolean): void;\r\n  postMessage(\r\n    command: Command.ShowTranslation,\r\n    data: TranslationResult,\r\n    callback: () => void\r\n  ): void;\r\n  // translation-page to agent\r\n  postMessage(command: Command.TranslateText, data: string): void;\r\n  postMessage(\r\n    command: Command.HistoryIndex,\r\n    data: { index: number; head: number; tail: number }\r\n  ): void;\r\n  postMessage(\r\n    command: Command.RelearnNote,\r\n    data: number[],\r\n    callback: (data: RelearnCardsReturnType) => void\r\n  ): void;\r\n  postMessage(\r\n    command: Command.AddNote,\r\n    data: NoteData,\r\n    callback: (data: AddNoteReturnType) => void\r\n  ): void;\r\n  postMessage(command: Command, data?: any, callback?: FunctionAny): void {\r\n    const target = this.target;\r\n    //此处应该使用报错的 invariant 而非 warning，因为其执行会添加回调函数，如果不报错属于内存泄漏\r\n    if (!target) {\r\n      invariant(false, \"target 不存在，其在通信中是必须的\");\r\n    }\r\n    /* 因为浏览器的postMessage不提供原生的响应回调功能，因此需要自定义实现\r\n     * 设置回调时:(postMessage)\r\n     *   如果存在回调函数，则创建一个唯一的ID保存该回调函数\r\n     *   该唯一ID保存在 data.callbackName 中，随请求携带\r\n     * 执行回调时:(onMessage)\r\n     *   定义收到command为\"callback\"的指令时，调用缓存的回调函数\r\n     *   该指令的data[callbackName]应该有值，通过该值进行正确的回调匹配\r\n     */\r\n    //确保data是引用数据类型\r\n    const message: MessageData = Object.create(null);\r\n    message.data = data;\r\n    message.command = command;\r\n    //如果传递的是number，则说明该次调用是为了触发回调，因为标识是number，所以此处判断number\r\n    //与用户无关，是触发回调的内部逻辑\r\n    if (typeof callback === \"number\") {\r\n      message.callbackName = callback;\r\n    }\r\n\r\n    if (typeof callback === \"function\") {\r\n      const callbackName = uniqueId;\r\n      this.callbacks[callbackName] = callback;\r\n      message.callbackName = callbackName;\r\n      uniqueId++; //保证唯一性\r\n    }\r\n\r\n    target.postMessage(message, \"*\");\r\n  }\r\n}\r\n","/**\r\n * invariant 与 warning 的名称不应该改变，其会被 babel的 \"babel-plugin-dev-expression\" 插件替换，\r\n *  具体可看：\"https://www.npmjs.com/package/babel-plugin-dev-expression\"\r\n */\r\n\r\nexport function invariant(cond: boolean, message: string): asserts cond {\r\n  if (!cond) throw new Error(message);\r\n}\r\n\r\nexport function warning(cond: boolean, message: string) {\r\n  if (!cond) {\r\n    if (typeof console !== \"undefined\") console.warn(message);\r\n\r\n    try {\r\n      //这样的写法是为了便于调试，能够使其支持 “在遇到异常时暂停”（如果选中该调试功能的话）\r\n      throw new Error(message);\r\n      // eslint-disable-next-line no-empty\r\n    } catch (e) {}\r\n  }\r\n}\r\n","export { invariant, warning } from \"./alert\";\r\nexport { validateText } from \"./validateText\";\r\nexport { Messenger } from \"./Messenger\";\r\nexport type { PostMessage, OnMessage } from \"./Messenger\";\r\n\r\n/**\r\n * 纯函数，Object.entries()的单一版本，只提取单个键的[key,value]\r\n */\r\nexport function extractEntry<T extends object, K extends keyof T>(\r\n  target: T,\r\n  key: K\r\n): [K, T[K]] {\r\n  return [key, target[key]];\r\n}\r\n","/**\r\n * 纯函数，过滤掉无效查询\r\n *  - 字符串为空的情况\r\n *  - 查询主体并非英文\r\n * @param text\r\n * @return 返回过滤后的字符，该字符应当是符合查询要求的\r\n */\r\n export function validateText(text: string) {\r\n  text = text.trim();\r\n\r\n  //过滤为空的字符串\r\n  if (!text) return false;\r\n\r\n  //如果英文字母数量不足百分之五十，则认为其并非需要查询的内容\r\n  const amount = text.match(/\\b[a-z]+\\b/gi)?.reduce((amount, item) => {\r\n    return amount + item.length;\r\n  }, 0);\r\n  if (!amount || amount / text.length < 0.5) return false;\r\n\r\n  //过滤用户对URL的复制的查询\r\n  if (text.search(/http:|https:/gi) === 0) return false;\r\n\r\n  return true;\r\n}\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe23',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20f0',\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboMarksRange + rsComboSymbolsRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsLowerMisc = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsUpperMisc = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptLowerContr = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptUpperContr = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptLowerContr + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsUpperMisc + '+' + rsOptUpperContr + '(?=' + [rsBreak, rsUpper + rsLowerMisc, '$'].join('|') + ')',\n  rsUpper + '?' + rsLowerMisc + '+' + rsOptLowerContr,\n  rsUpper + '+' + rsOptUpperContr,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 'ss'\n};\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\n/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('déjà vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\n/**\n * Converts `string`, as space separated words, to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the lower cased string.\n * @example\n *\n * _.lowerCase('--Foo-Bar--');\n * // => 'foo bar'\n *\n * _.lowerCase('fooBar');\n * // => 'foo bar'\n *\n * _.lowerCase('__FOO_BAR__');\n * // => 'foo bar'\n */\nvar lowerCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toLowerCase();\n});\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nmodule.exports = lowerCase;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Creates an array of the own and inherited enumerable symbol properties\n * of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable string keyed properties of `object` that are\n * not omitted.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = baseRest(function(object, props) {\n  if (object == null) {\n    return {};\n  }\n  props = arrayMap(baseFlatten(props, 1), toKey);\n  return basePick(object, baseDifference(getAllKeysIn(object), props));\n});\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = omit;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = baseRest(function(object, props) {\n  return object == null ? {} : basePick(object, arrayMap(baseFlatten(props, 1), toKey));\n});\n\nmodule.exports = pick;\n","// extracted by mini-css-extract-plugin\nexport {};","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.O=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.g||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(O(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.g?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.O&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.O&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.D.set(n,!1):r.D.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t&&(void 0!==t||r in n.o)||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.g=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.F&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.g=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n"],"names":["omit","getStorageByArray","onStorageChange","isAnkiResponse","createDuplicateResponse","createForgottenResponse","createAnkiErrorResponse","createOldVersionResponse","createSuccessAnkiResponse","createConfigErrorResponse","createDisconnectionResponse","createFirstAddSuccessResponse","createUnexpectedErrorResponse","getConfigName","getMediaFields","getNotMediaFields","getDuplicateConfigName","NoteType","Action","AnkiConnection","version","ankiConfig","config","updateAnkiConfig","wordConfig","_","phraseConfig","sentenceConfig","ankiConnectionURL","checkPhraseDuplicate","checkSentenceDuplicate","checkWordDuplicate","addNote","_addErrorCatch","_addNote","getVersion","_getVersion","getDeckNames","_getDeckNames","relearnCards","_relearnCards","getModelNames","_getModelNames","getModelFieldNames","_getModelFieldNames","executor","args","result","apply","e","console","error","Error","data","type","Word","Phrase","Sentence","_testSecurity","note","_formatData","_handleDuplicate","configName","deckName","deckNames","includes","modelName","modelNames","modelFieldNames","fieldNames","Object","values","isEmpty","every","val","includesAll","duplicateConfigName","duplicateConfig","query","entries","reduce","key","fieldName","content","cardIds","_findCards","length","cardId","_request","AddNote","FindCards","cards","RelearnCards","ModelNames","DeckNames","ModelFieldNames","Version","tags","audio","fields","trim","split","options","allowDuplicate","duplicateScope","duplicateScopeOptions","checkChildren","checkAllModels","action","params","Promise","resolve","reject","xhr","XMLHttpRequest","addEventListener","response","JSON","parse","responseText","getOwnPropertyNames","prototype","hasOwnProperty","call","open","send","stringify","AnkiResponseStatus","COMMON_CONFIG_MAP","createAnkiResponse","assign","__isAnkiResponse__","target","message","status","Success","Disconnect","Forgotten","Duplicate","FirstAddSuccess","ConfigError","OldVersion","UnexpectedError","configNames","getMediaNames","wordMedias","phraseMedias","sentenceMedias","mediaNames","modelFieldsMap","field","url","push","filename","encodeURIComponent","fieldKey","fieldValue","Command","WORD_FIELDS_MAP","PHRASE_FIELDS_MAP","SENTENCE_FIELDS_MAP","ANKI_CONNECTION_MAP","DEFAULT_ANKI_CONNECTION_URL","definition","word","translation","part_of_speech","definition_audio","am","en","am_audio","en_audio","star_amount","example_audio","example_sentence","example_sentence_translation","phrase","phrase_audio","translations","example_audio_1","example_audio_2","example_audio_3","example_sentence_1","example_sentence_2","example_sentence_3","example_sentence_translation_1","example_sentence_translation_2","example_sentence_translation_3","sentence","sentence_audio","sentence_translation","ankiConnectionMethod","freeze","lowerCase","Cache","isErrorData","createCacography","createNoCacheError","translateWord","translatePhrase","translateSentence","Collins_en_cn","cacheAmount","cache","text","get","translationResult","translateText","queryText","set","input","abort","searchURL","responseType","timeout","statusText","dom","getPageDOM","test","translatePhraseAndSentence","handleNotFound","err","translatedPhrase","translatedSentence","possibleSpelling","getCorrectSpelling","inferCorrects","querySelectorAll","acc","node","textContent","getOriginText","getTranslation","example_sentences","getPhraseExamples","querySelector","firstElementChild","ul","liNodes","children","Array","from","li","pNodes","example_sentence_origin","childNodes","nodeName","nodeType","sentenceNode","transNode","Number","className","match","phonetic","getPhonetic","translationList","getTranslationList","formatTranslations","replace","lis","textResult","getTranslationText","index","slice","definition_origin","getPartOfSpeech","getExampleSentences","targetNode","pNode","nodes","filter","classList","contains","forEach","search","reg","div_example_s","exampleSentences","div","formated","cur","point","indexOf","oldArray","newArray","isWordData","isPhraseData","isSentenceData","max","map","Map","value","size","keys","next","typeOf","thing","createErrorData","setBadgeText","details","callback","chrome","browserAction","onCommand","handlerObject","commands","addListener","command","handler","StrictOnCommand","runtime","getManifest","commandNames","addContextMenuItem","createProperties","contextMenus","create","onContextMenuClick","onClicked","getStorageByObject","setStorage","executeScript","postFrontend","postBackend","onMessage","getURL","openOptionsPage","TabPanelName","name","sendMessage","sender","_sendResponse","called","sendResponse","then","pick","defaultStorage","switchHotkeyAndSelectionListener","hotKey","openSelection","hiddenChinese","checkedTabPanel","Home","switchStrengthenSelectionByPressedCtrl","handlersIsArray","handlers","isArray","getStorage","storageKeys","storage","local","cacheValue","names","listener","changes","oldValue","newValue","onChanged","removeListener","partialStorage","tabs","active","tab","id","React","classJoin","Status","AnkiButton","memo","props","onClick","event","item","join","navigator","clipboard","writeText","Add","LearnNow","Loading","Button","forwardRef","ref","other","useRef","useCallback","useImperativeHandle","useAudio","AudioButton","audioURL","audioElement","buttonRef","playAudio","current","focus","src","currentTime","play","produce","__main__","transformWordData","transformPhraseData","transformTranslations","transformAnkiResponseStatus","useMessenger","ErrorComponent","DisplayContainer","loadingSet","ankiButtonInfoObject","setAnkiButtonInfoObject","_updateAnki","useAnki","updateAnkiWord","wordData","updateAnkiTranslations","idx","postMessage","disableState","info","submit","ankiButtonInfo","symbol","String","add","draft","RelearnNote","ankiResponse","useState","PossibleSpelling","TranslateText","TranslationAgain","isLoading","setIsLoading","setTimeout","useLayoutEffect","useEffect","useMemo","History","HistoryContainer","setData","Set","stateRef","scrollTop","forward","backward","showTranslation","history","updateHistory","document","documentElement","update","renderHistory","dataCallback","prev","createHistory","nextData","newHistory","append","subscribe","head","tail","HistoryIndex","displayCallback","_fn","loadedCallback","ShowTranslation","BackHistory","ForwardHistory","window","scrollTo","top","undefined","decodeBTag","updateAnki","Translations","flatMap","ExampleSentences","Messenger","SelectionListener","AudioContext","MessengerContext","HiddenChinese","createElement","messenger","self","install","selectionListener","PauseAudio","pause","OpenSelection","enable","uninstall","View","setHiddenChinese","hidden","Container","useHiddenChinese","WordAndStar","repeat","Phonetic","symbols","TranslationList","ankiButtonInfos","Explanation","exampleSentence","partOfSpeech","TranslationsLi","TranslationLi","PartOfSpeech","useContext","invariant","createContext","StrictMode","createRoot","root","getElementById","render","maxAmount","cacheArray","subscribes","fn","Math","RegExp","textArr","reactNode","Symbol","firstExample","noteWordData","notePhraseData","CursorListener","x","y","clientPoint","screenPoint","onMouseMove","removeEventListener","clientX","clientY","screenY","screenX","getSelectionText","getRangeFromPoint","isContentEditable","isSearchContainer","UserSelectHandler","HotKeyListener","translateAndDisplayText","getPoint","onKeyDown","restore","focusNode","activeElement","autoSelectText","selectedText","letter","checkout","range","extendRange","selection","getSelection","commonAncestorContainer","parentElement","modify","removeAllRanges","addRange","textNode","startContainer","isText","limit_left","limit_right","startOffset","endOffset","validate","min","newRange","Range","setStart","setEnd","attachSymbolToSearchContainer","SearchBox","body","container","closeSearchBox","remove","createSearchBar","openSearchBox","FORM_ID","INPUT_ID","BUTTON_ID","style","setProperty","shadow","attachShadow","mode","innerHTML","form","button","preventDefault","display","select","onMouseDown","onMouseUp","enableCtrl","onSelectionChange","once","selectionChanged","ctrlKey","USER_SELECT","element","modifiedHTMLElements","has","userSelectValue","getPropertyValue","userSelectPriority","getPropertyPriority","priority","clear","caretRangeFromPoint","caretPosition","caretPositionFromPoint","offsetNode","offset","createRange","toString","tagName","HTMLElement","SEARCH_CONTAINER_ID","ATTRIBUTE_NAME","getAttribute","setAttribute","warning","uniqueId","CALLBACK","handleMessage","callbacks","source","callbackName","bind","cond","warn","validateText","extractEntry","amount"],"sourceRoot":""}