{"version":3,"file":"backendScript.js","mappings":"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LtB,OADK,EAELC,QAFK,EAGL;EACAC,MAAM,CAAC2D,IAAP,CAAYvC,aAAZ,CAA0BtB,OAA1B,EAAmCC,QAAnC;AACD;;;;;;;;;;;;;;;ACYM,IAAW2B,YAAlB;;WAAkBA;EAAAA,aAAAA;EAAAA,aAAAA;EAAAA,aAAAA;EAAAA,aAAAA;GAAAA,iBAAAA;;;;;;;;;;AC7ClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,EAAE;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC,GAAG;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,qBAAM,gBAAgB,qBAAM,IAAI,qBAAM,sBAAsB,qBAAM;;AAE1F;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,WAAW,GAAG;AACd,WAAW,SAAS;AACpB;AACA,aAAa,GAAG;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,eAAe;AAC1B,YAAY,QAAQ;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACjbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;;AAEA;AACA;;AAEA;AACA,wBAAwB,qBAAM,gBAAgB,qBAAM,IAAI,qBAAM,sBAAsB,qBAAM;;AAE1F;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,GAAG;AACd,WAAW,OAAO;AAClB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,GAAG;AACd,WAAW,UAAU;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,GAAG;AACd,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,kBAAkB;AAClB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,sBAAsB;AACjC,aAAa,QAAQ;AACrB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;AC/8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,qBAAM,gBAAgB,qBAAM,IAAI,qBAAM,sBAAsB,qBAAM;;AAE1F;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,GAAG;AACd,WAAW,OAAO;AAClB,aAAa,GAAG;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,UAAU;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,eAAe;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,sBAAsB;AACjC,aAAa,QAAQ;AACrB;AACA;AACA,kBAAkB;AAClB;AACA;AACA,WAAW;AACX;AACA;AACA,6BAA6B;AAC7B,CAAC;;AAED;;;;;;;UCtfA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;CAaA;;AACA,IAAMqC,OAAO,GAAG,IAAInK,sDAAJ,EAAhB,EACA;;AACA,IAAMoK,IAAI,GAAG,IAAI1V,iDAAJ,EAAb,EAEA;;AACA4S,mEAAkB,CAAC;EACjBkB,gCADiB,4CACgB9C,KADhB,EACuB;IACtC2E,eAAe,CAAC3E,KAAD,CAAf;EACD;AAHgB,CAAD,CAAlB;AAKAjS,gEAAe,CAAC;EACd+U,gCADc,4CACmBxT,CADnB,EACsB0Q,KADtB,EAC6B;IACzC,OAAO2E,eAAe,CAAC3E,KAAD,CAAtB;EACD;AAHa,CAAD,CAAf,EAMA;;AACAY,0DAAS,CAAC;EACRgE,oCADQ,kDAC+B;IACrChD,mEAAkB,CAAC;MACjBkB,gCADiB,4CACgB+B,OADhB,EACyB;QACxC,OAAOhD,2DAAU,CAAC;UAChBiB,gCAAgC,EAAE,CAAC+B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","sources":["webpack://translator-extensions/./src/anki/AnkiConnection.ts","webpack://translator-extensions/./src/anki/index.ts","webpack://translator-extensions/./src/anki/types/index.ts","webpack://translator-extensions/./src/anki/utils/createAnkiResponse.ts","webpack://translator-extensions/./src/anki/utils/helper.ts","webpack://translator-extensions/./src/anki/utils/index.ts","webpack://translator-extensions/./src/configuration/command.ts","webpack://translator-extensions/./src/configuration/index.ts","webpack://translator-extensions/./src/configuration/modelFieldNameMap.ts","webpack://translator-extensions/./src/dictionary/Collins_en_cn/index.ts","webpack://translator-extensions/./src/dictionary/Collins_en_cn/translatePhrase.ts","webpack://translator-extensions/./src/dictionary/Collins_en_cn/translateSentence.ts","webpack://translator-extensions/./src/dictionary/Collins_en_cn/translateWord.ts","webpack://translator-extensions/./src/dictionary/index.ts","webpack://translator-extensions/./src/dictionary/utils/Cache.ts","webpack://translator-extensions/./src/dictionary/utils/determine.ts","webpack://translator-extensions/./src/dictionary/utils/errorData.ts","webpack://translator-extensions/./src/dictionary/utils/index.ts","webpack://translator-extensions/./src/extensions-api/browserAction.ts","webpack://translator-extensions/./src/extensions-api/commands.ts","webpack://translator-extensions/./src/extensions-api/contextMenus.ts","webpack://translator-extensions/./src/extensions-api/index.ts","webpack://translator-extensions/./src/extensions-api/runtime.ts","webpack://translator-extensions/./src/extensions-api/storage.ts","webpack://translator-extensions/./src/extensions-api/tabs.ts","webpack://translator-extensions/./src/extensions-api/types/index.ts","webpack://translator-extensions/./node_modules/.pnpm/registry.npmmirror.com+lodash.lowercase@4.3.0/node_modules/lodash.lowercase/index.js","webpack://translator-extensions/./node_modules/.pnpm/registry.npmmirror.com+lodash.omit@4.5.0/node_modules/lodash.omit/index.js","webpack://translator-extensions/./node_modules/.pnpm/registry.npmmirror.com+lodash.pick@4.4.0/node_modules/lodash.pick/index.js","webpack://translator-extensions/webpack/bootstrap","webpack://translator-extensions/webpack/runtime/compat get default export","webpack://translator-extensions/webpack/runtime/define property getters","webpack://translator-extensions/webpack/runtime/global","webpack://translator-extensions/webpack/runtime/hasOwnProperty shorthand","webpack://translator-extensions/webpack/runtime/make namespace object","webpack://translator-extensions/./src/backend-script/index.ts"],"sourcesContent":["/**\r\n * 这是用于调用 AnkiConnection 提供的接口的封装\r\n */\r\nimport omit from \"lodash.omit\";\r\nimport { getStorageByArray, onStorageChange } from \"@/extensions-api\";\r\nimport { extractPromiseType } from \"@/types\";\r\nimport {\r\n  isAnkiResponse,\r\n  createDuplicateResponse,\r\n  createForgottenResponse,\r\n  createAnkiErrorResponse,\r\n  createOldVersionResponse,\r\n  createSuccessAnkiResponse,\r\n  createConfigErrorResponse,\r\n  createDisconnectionResponse,\r\n  createFirstAddSuccessResponse,\r\n  createUnexpectedErrorResponse,\r\n  getConfigName,\r\n  getMediaFields,\r\n  getNotMediaFields,\r\n  getDuplicateConfigName,\r\n} from \"./utils\";\r\n//声明\r\nimport { Storage } from \"@/extensions-api\";\r\nimport { NoteData } from \"@/translation-page\";\r\nimport { AnkiResponse, NoteType, AddNoteParams } from \"./types\";\r\n\r\n//值必须是小写，且必须是这个值，不应该修改，这是AnkiConnection所要求的\r\nenum Action {\r\n  Version = \"version\",\r\n  AddNote = \"addNote\",\r\n  FindCards = \"findCards\",\r\n  DeckNames = \"deckNames\",\r\n  ModelNames = \"modelNames\",\r\n  RelearnCards = \"relearnCards\",\r\n  ModelFieldNames = \"modelFieldNames\",\r\n  UpdateNoteFields = \"updateNoteFields\",\r\n}\r\n\r\ntype AnkiConfig = Pick<\r\n  Storage,\r\n  | \"wordConfig\"\r\n  | \"phraseConfig\"\r\n  | \"sentenceConfig\"\r\n  | \"ankiConnectionURL\"\r\n  | \"checkWordDuplicate\"\r\n  | \"checkPhraseDuplicate\"\r\n  | \"checkSentenceDuplicate\"\r\n>;\r\n\r\ntype ReturnPromiseType<T extends (...args: any[]) => Promise<any>> = T extends (\r\n  ...args: any[]\r\n) => Promise<infer R>\r\n  ? R\r\n  : never;\r\n\r\ntype flatAnkiResponse<T extends (...args: any[]) => Promise<any>> =\r\n  ReturnPromiseType<T> extends AnkiResponse<any>\r\n    ? Promise<ReturnPromiseType<T>>\r\n    : Promise<AnkiResponse<ReturnPromiseType<T>>>;\r\n\r\nexport class AnkiConnection {\r\n  version: number;\r\n  ankiConfig: AnkiConfig;\r\n\r\n  addNote;\r\n  getVersion;\r\n  getDeckNames;\r\n  relearnCards;\r\n  getModelNames;\r\n  getModelFieldNames;\r\n\r\n  constructor() {\r\n    this.version = 6; //版本不同，返回值不同，不能够随意修改\r\n    this.ankiConfig = {} as AnkiConfig; //后面会进行初始化赋值\r\n\r\n    //初始化AnkiConfig\r\n    //值是必定存在的，因为 getStorage 内部会保证在没值的时候使用默认值，而默认值设定了相应的值\r\n    getStorageByArray(\r\n      [\r\n        \"wordConfig\",\r\n        \"phraseConfig\",\r\n        \"sentenceConfig\",\r\n        \"ankiConnectionURL\",\r\n        \"checkWordDuplicate\",\r\n        \"checkPhraseDuplicate\",\r\n        \"checkSentenceDuplicate\",\r\n      ],\r\n      (config) => {\r\n        this.updateAnkiConfig<AnkiConfig>(config as AnkiConfig); //初始化时，必须包括所有的 AnkiConfig 配置\r\n      }\r\n    );\r\n    //监听用户配置更新\r\n    onStorageChange({\r\n      wordConfig: (_, wordConfig) => this.updateAnkiConfig({ wordConfig }),\r\n      phraseConfig: (_, phraseConfig) =>\r\n        this.updateAnkiConfig({ phraseConfig }),\r\n      sentenceConfig: (_, sentenceConfig) =>\r\n        this.updateAnkiConfig({ sentenceConfig }),\r\n      ankiConnectionURL: (_, ankiConnectionURL) =>\r\n        this.updateAnkiConfig({ ankiConnectionURL }),\r\n      checkPhraseDuplicate: (_, checkPhraseDuplicate) =>\r\n        this.updateAnkiConfig({ checkPhraseDuplicate }),\r\n      checkSentenceDuplicate: (_, checkSentenceDuplicate) =>\r\n        this.updateAnkiConfig({ checkSentenceDuplicate }),\r\n      checkWordDuplicate: (_, checkWordDuplicate) =>\r\n        this.updateAnkiConfig({ checkWordDuplicate }),\r\n    });\r\n\r\n    this.addNote = this._addErrorCatch(this._addNote);\r\n    this.getVersion = this._addErrorCatch(this._getVersion);\r\n    this.getDeckNames = this._addErrorCatch(this._getDeckNames);\r\n    this.relearnCards = this._addErrorCatch(this._relearnCards);\r\n    this.getModelNames = this._addErrorCatch(this._getModelNames);\r\n    this.getModelFieldNames = this._addErrorCatch(this._getModelFieldNames);\r\n  }\r\n\r\n  private _addErrorCatch<T extends (...args: any[]) => Promise<any>>(\r\n    executor: T\r\n  ): (...args: Parameters<T>) => flatAnkiResponse<T> {\r\n    return async (...args: Parameters<T>) => {\r\n      try {\r\n        /**\r\n         * result 有两种情况：\r\n         *  第一种，返回的是AnkiResponse，那么不需要再次包装，直接返回\r\n         *  第二种，返回的不是AnkiResponse,而是一个正常值，则需要包装后返回\r\n         * 这是为了保证，返回的都是AnkiResponse.\r\n         */\r\n        const result = await executor.apply(this, args);\r\n        if (isAnkiResponse(result)) return result;\r\n        return createSuccessAnkiResponse(result);\r\n      } catch (e) {\r\n        if (isAnkiResponse(e)) return e;\r\n        if (__DEV__) {\r\n          console.error(e);\r\n        }\r\n        if (typeof e === \"string\" || e instanceof Error) {\r\n          return createUnexpectedErrorResponse(e);\r\n        }\r\n        return createUnexpectedErrorResponse(\r\n          \"这是一个出乎该插件开发者预料的错误,如需解决请提交该问题\"\r\n        );\r\n      }\r\n    };\r\n  }\r\n\r\n  updateAnkiConfig<T extends Partial<AnkiConfig>>(config: T) {\r\n    this.ankiConfig = { ...this.ankiConfig, ...config };\r\n  }\r\n\r\n  private async _addNote(data: NoteData) {\r\n    let type = null;\r\n    if (\"word\" in data) type = NoteType.Word;\r\n    if (\"phrase\" in data) type = NoteType.Phrase;\r\n    if (\"sentence\" in data) type = NoteType.Sentence;\r\n    //await是必须的\r\n    await this._testSecurity(type!);\r\n    const note: AddNoteParams = this._formatData(type!, data);\r\n    const result = await this._handleDuplicate(type!, data, note);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * 确保deckName、modelName、fieldNames等是存在的\r\n   */\r\n  private async _testSecurity(type: NoteType) {\r\n    const configName = getConfigName(type);\r\n    const config = this.ankiConfig[configName];\r\n    //检查 deckName 是否为空\r\n    const deckName = config.deckName;\r\n    const deckNames = await this._getDeckNames();\r\n    if (deckName == null || !deckNames.includes(deckName)) {\r\n      throw createConfigErrorResponse();\r\n    }\r\n    //检查 modelName 是否为空\r\n    const modelName = config.modelName;\r\n    const modelNames = await this._getModelNames();\r\n    if (modelName == null || !modelNames.includes(modelName)) {\r\n      throw createConfigErrorResponse();\r\n    }\r\n    //检查 fields 是否正确（在Anki上该值是否存在）\r\n    const modelFieldNames = await this._getModelFieldNames(modelName);\r\n    const fieldNames = Object.values(\r\n      omit(config, [\"deckName\", \"modelName\", \"tags\"])\r\n    );\r\n\r\n    //检查用户是否配置了任何一个fieldName，fieldNames不能够都没有配置\r\n    const isEmpty = fieldNames.every((val) => val == null || val === \"\");\r\n    if (isEmpty) {\r\n      throw createConfigErrorResponse();\r\n    }\r\n\r\n    const includesAll = fieldNames.every((val) => {\r\n      if (val == null || val === \"\") return true;\r\n      return modelFieldNames.includes(val as string);\r\n    });\r\n    if (!includesAll) {\r\n      throw createConfigErrorResponse();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理卡片重复添加的逻辑\r\n   */\r\n  private async _handleDuplicate(\r\n    type: NoteType,\r\n    data: NoteData,\r\n    note: AddNoteParams\r\n  ) {\r\n    const configName = getConfigName(type);\r\n    const duplicateConfigName = getDuplicateConfigName(type);\r\n    const config = this.ankiConfig[configName];\r\n    const duplicateConfig = this.ankiConfig[duplicateConfigName];\r\n    //改写Anki内置的重复判断逻辑，将控制权交给用户\r\n    const query = Object.entries(duplicateConfig).reduce(\r\n      (query, [key, val]) => {\r\n        //检查deck\r\n        if (key === \"deckName\") {\r\n          return query + val ? ` deck:${config[key]}` : \"\";\r\n        }\r\n        //检查 model\r\n        if (key === \"modelName\") {\r\n          return query + val ? ` note:${config[key]}` : \"\";\r\n        }\r\n        //val为falsy则表示其不是用于查重的字段\r\n        if (!val) return query;\r\n        //@ts-ignore,由于Object.entries不能够很好的推断类型，所以导致该问题\r\n        const fieldName = config[key];\r\n        //@ts-ignore,由于Object.entries不能够很好的推断类型，所以导致该问题\r\n        const content = data[key];\r\n        if (!fieldName || !content) return query;\r\n        //注意前方的空格，其是必须的\r\n        query += ` \"${content}\"`;\r\n        return query;\r\n      },\r\n      \"\"\r\n    );\r\n\r\n    // - cardIds没有值，此时逻辑应该为:再次添加卡片，添加方式为允许重复。\r\n    // - cardIds有一个值，此时逻辑应该为:立刻开始学习\r\n    // - cardIds有多个值，此时逻辑应该为:报错，返回查询字符串，让用户到Anki中查看重复。\r\n    const cardIds = await this._findCards(query);\r\n    const { length } = cardIds;\r\n    switch (length) {\r\n      case 0: {\r\n        //卡片不存在，作为新卡片添加\r\n        const cardId = await this._request(Action.AddNote, { note });\r\n        return createFirstAddSuccessResponse([cardId]);\r\n      }\r\n      case 1: //卡片已添加，是否立刻复习/学习\r\n        return createForgottenResponse(cardIds);\r\n      default: //卡片重复添加\r\n        return createDuplicateResponse(cardIds);\r\n    }\r\n  }\r\n\r\n  private async _findCards(query: string): Promise<number[]> {\r\n    return this._request(Action.FindCards, {\r\n      query,\r\n    });\r\n  }\r\n\r\n  private async _relearnCards(cards: number[]) {\r\n    //await是必须的\r\n    await this._request(Action.RelearnCards, { cards });\r\n    return cards;\r\n  }\r\n\r\n  private async _getModelNames() {\r\n    const result = await this._request(Action.ModelNames);\r\n    return result;\r\n  }\r\n\r\n  private async _getDeckNames() {\r\n    const result = await this._request(Action.DeckNames);\r\n    return result;\r\n  }\r\n\r\n  private async _getModelFieldNames(modelName: string) {\r\n    const result = await this._request(Action.ModelFieldNames, { modelName });\r\n    return result;\r\n  }\r\n\r\n  private async _getVersion() {\r\n    const result = await this._request(Action.Version);\r\n    //更新 version\r\n    this.version = result;\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * 将数据格式化为Anki所要求的格式\r\n   */\r\n  private _formatData(type: NoteType, data: NoteData): AddNoteParams {\r\n    const configName = getConfigName(type);\r\n    const config = this.ankiConfig[configName];\r\n    const { deckName, modelName, tags, ...modelFieldNames } = config;\r\n\r\n    const audio = getMediaFields(type, data, modelFieldNames);\r\n    const fields = getNotMediaFields(type, data, modelFieldNames);\r\n    return {\r\n      deckName: deckName!, //在调用该函数前已经调用 testSecurity 进行非空检查\r\n      modelName: modelName!, //在调用该函数前已经调用 testSecurity 进行非空检查\r\n      fields,\r\n      audio,\r\n      tags: (tags && tags.trim().split(/\\s+/g)) || [],\r\n      options: {\r\n        allowDuplicate: true, //重复判断逻辑已经重写，所以这里恒定true，避免被原有逻辑影响到\r\n        duplicateScope: \"deck\",\r\n        duplicateScopeOptions: {\r\n          deckName: deckName!, //在调用该函数前已经调用 testSecurity 进行非空检查\r\n          checkChildren: false,\r\n          checkAllModels: false,\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  /**\r\n   * 向Anki发送请求的函数\r\n   * @param action 具体请求动作，类似 http 中的 method\r\n   * @param params 请求所携带的参数\r\n   */\r\n  private async _request(action: Action.DeckNames): Promise<string[]>;\r\n  private async _request(action: Action.ModelNames): Promise<string[]>;\r\n  private async _request(action: Action.Version): Promise<number>;\r\n  private async _request(\r\n    action: Action.FindCards,\r\n    params: { query: string }\r\n  ): Promise<number[]>;\r\n  private async _request(\r\n    action: Action.ModelFieldNames,\r\n    params: { modelName: string }\r\n  ): Promise<string[]>;\r\n  private async _request(\r\n    action: Action.AddNote,\r\n    params: { note: AddNoteParams }\r\n  ): Promise<number>;\r\n  private async _request(\r\n    action: Action.RelearnCards,\r\n    params: { cards: number[] }\r\n  ): Promise<null>;\r\n  private async _request(\r\n    action: Action,\r\n    params: { [key: string]: any } = {}\r\n  ): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      const { version } = this;\r\n      const { ankiConnectionURL } = this.ankiConfig;\r\n      const xhr = new XMLHttpRequest();\r\n      xhr.addEventListener(\"error\", () =>\r\n        reject(\r\n          createDisconnectionResponse(\r\n            `无法通过URL: ${ankiConnectionURL} 连接到Anki，可通过检查：\\n\\t- Anki是否打开\\n\\t- AnkiConnection插件是否安装\\n\\t- 目标URL是否正确配置来排查该问题`\r\n          )\r\n        )\r\n      );\r\n      xhr.addEventListener(\"load\", () => {\r\n        try {\r\n          const response = JSON.parse(xhr.responseText);\r\n          if (\r\n            Object.getOwnPropertyNames(response).length != 2 ||\r\n            !Object.prototype.hasOwnProperty.call(response, \"result\") ||\r\n            !Object.prototype.hasOwnProperty.call(response, \"error\")\r\n          ) {\r\n            throw createOldVersionResponse();\r\n          }\r\n          if (response.error) {\r\n            throw createAnkiErrorResponse(response.error);\r\n          }\r\n          resolve(response.result);\r\n        } catch (e) {\r\n          reject(e);\r\n        }\r\n      });\r\n\r\n      xhr.open(\"POST\", ankiConnectionURL);\r\n      xhr.send(JSON.stringify({ action, version, params }));\r\n    });\r\n  }\r\n}\r\n\r\nexport type GetVersionReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"getVersion\"]>\r\n>;\r\nexport type GetDeckNamesReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"getDeckNames\"]>\r\n>;\r\nexport type GetModelFieldNamesReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"getModelFieldNames\"]>\r\n>;\r\nexport type GetModelNamesReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"getModelNames\"]>\r\n>;\r\nexport type AddNoteReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"addNote\"]>\r\n>;\r\nexport type RelearnCardsReturnType = extractPromiseType<\r\n  ReturnType<AnkiConnection[\"relearnCards\"]>\r\n>;\r\n","export { AnkiConnection } from \"./AnkiConnection\";\r\nexport type {\r\n  AddNoteReturnType,\r\n  GetVersionReturnType,\r\n  GetDeckNamesReturnType,\r\n  RelearnCardsReturnType,\r\n  GetModelNamesReturnType,\r\n  GetModelFieldNamesReturnType,\r\n} from \"./AnkiConnection\";\r\nexport { AnkiResponseStatus } from \"./types\";\r\n","export const enum NoteType {\r\n  Word = 0,\r\n  Phrase = 1,\r\n  Sentence = 2,\r\n}\r\n\r\nexport interface AddNoteParams {\r\n  deckName: string;\r\n  modelName: string;\r\n  fields: {\r\n    [key: string]: string;\r\n  };\r\n  options: {\r\n    allowDuplicate: boolean;\r\n    duplicateScope: \"deck\";\r\n    duplicateScopeOptions: {\r\n      deckName: string;\r\n      checkChildren: boolean;\r\n      checkAllModels: boolean;\r\n    };\r\n  };\r\n  tags?: string[];\r\n  audio?: MediaField;\r\n  video?: MediaField;\r\n  picture?: MediaField;\r\n}\r\n\r\nexport type MediaField = Array<{\r\n  url: string;\r\n  filename: string;\r\n  skipHash?: string;\r\n  fields: string[];\r\n}>;\r\n\r\nexport enum AnkiResponseStatus {\r\n  Error,\r\n  Success,\r\n  Forgotten,\r\n  Duplicate,\r\n  Disconnect,\r\n  OldVersion,\r\n  ConfigError,\r\n  FirstAddSuccess,\r\n  UnexpectedError,\r\n}\r\n\r\nexport interface AnkiResponse<T> {\r\n  data?: T;\r\n  message: string;\r\n  status: AnkiResponseStatus;\r\n}\r\n","import { COMMON_CONFIG_MAP } from \"@/configuration\";\r\nimport { AnkiResponseStatus, AnkiResponse } from \"../types\";\r\n\r\nfunction createAnkiResponse<T>(options: AnkiResponse<T>): AnkiResponse<T> {\r\n  return Object.assign(\r\n    {\r\n      __isAnkiResponse__: true,\r\n    },\r\n    options\r\n  );\r\n}\r\n\r\nexport function isAnkiResponse(target: any) {\r\n  if (target === null || typeof target !== \"object\") return false;\r\n  return target.__isAnkiResponse__ === true;\r\n}\r\n\r\nexport function createSuccessAnkiResponse<T>(data: T) {\r\n  return createAnkiResponse({\r\n    data,\r\n    message: \"ok\",\r\n    status: AnkiResponseStatus.Success,\r\n  });\r\n}\r\n\r\nexport function createDisconnectionResponse(message: string) {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.Disconnect,\r\n    message,\r\n  });\r\n}\r\nexport function createForgottenResponse(cardIds: number[]) {\r\n  return createAnkiResponse({\r\n    data: cardIds,\r\n    status: AnkiResponseStatus.Forgotten,\r\n    message: \"曾经添加过该卡片，是否做遗忘处理？(立刻将其添加到学习列表中)\",\r\n  });\r\n}\r\n\r\nexport function createDuplicateResponse(cardIds: number[]) {\r\n  return createAnkiResponse({\r\n    data: cardIds,\r\n    status: AnkiResponseStatus.Duplicate,\r\n    message:\r\n      \"该卡片出现重复项，请自行在Anki上处理重复项，单击复制重复卡片的ID，以在Anki Browser上快速定位。\",\r\n  });\r\n}\r\n\r\nexport function createFirstAddSuccessResponse(cardIds: number[]) {\r\n  return createAnkiResponse({\r\n    data: cardIds,\r\n    status: AnkiResponseStatus.FirstAddSuccess,\r\n    message:\"已成功添加到Anki，是否需要立刻开始学习？(用于在待学习列表很长的时候，使其无需等待，立刻开始学习)\",\r\n  });\r\n}\r\n\r\nexport function createConfigErrorResponse() {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.ConfigError,\r\n    message: `存在配置错误，是否打开配置页面设置配置？可能是一下问题之一导致该错误：\\n\\t- ${COMMON_CONFIG_MAP.deckName},未配置\\n\\t- ${COMMON_CONFIG_MAP.modelName},未配置\\n\\t- 没有配置任何一个 model field 项\\n\\t- 配置的某个 model field 项与 Anki 上的不匹配，请刷新后重新配置`,\r\n  });\r\n}\r\n\r\nexport function createOldVersionResponse() {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.OldVersion,\r\n    message: \"AnkiConnection版本过低，请更新到最新版本。\",\r\n  });\r\n}\r\n\r\nexport function createAnkiErrorResponse(message: string) {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.Error,\r\n    message,\r\n  });\r\n}\r\n\r\nexport function createUnexpectedErrorResponse(e: Error | string) {\r\n  return createAnkiResponse({\r\n    status: AnkiResponseStatus.UnexpectedError,\r\n    message: typeof e === \"string\" ? e : e.message,\r\n  });\r\n}\r\n","import {\r\n  WordFields,\r\n  ModelFields,\r\n  PhraseFields,\r\n  SentenceFields,\r\n} from \"@/extensions-api\";\r\nimport { NoteData } from \"@/translation-page\";\r\nimport { MediaField, NoteType } from \"../types\";\r\n\r\n/**\r\n * 纯函数\r\n */\r\nexport function getConfigName(type: NoteType) {\r\n  const configNames = {\r\n    [NoteType.Word]: \"wordConfig\",\r\n    [NoteType.Phrase]: \"phraseConfig\",\r\n    [NoteType.Sentence]: \"sentenceConfig\",\r\n  } as const;\r\n  return configNames[type];\r\n}\r\n/**\r\n * 纯函数\r\n */\r\nexport function getDuplicateConfigName(type: NoteType) {\r\n  const configNames = {\r\n    [NoteType.Word]: \"checkWordDuplicate\",\r\n    [NoteType.Phrase]: \"checkPhraseDuplicate\",\r\n    [NoteType.Sentence]: \"checkSentenceDuplicate\",\r\n  } as const;\r\n  return configNames[type];\r\n}\r\n\r\n/**\r\n * 纯函数，获取特定类型的代表音频媒体的 key 的集合\r\n */\r\nfunction getMediaNames(type: NoteType) {\r\n  const wordMedias: Array<keyof WordFields> = [\r\n    \"am_audio\",\r\n    \"en_audio\",\r\n    \"example_audio\",\r\n    \"definition_audio\",\r\n  ];\r\n  const phraseMedias: Array<keyof PhraseFields> = [\r\n    \"phrase_audio\",\r\n    \"example_audio_1\",\r\n    \"example_audio_2\",\r\n    \"example_audio_3\",\r\n  ];\r\n  const sentenceMedias: Array<keyof SentenceFields> = [\"sentence_audio\"];\r\n  const mediaNames = {\r\n    [NoteType.Word]: wordMedias,\r\n    [NoteType.Phrase]: phraseMedias,\r\n    [NoteType.Sentence]: sentenceMedias,\r\n  }[type];\r\n  return mediaNames;\r\n}\r\n\r\n/**\r\n * 纯函数，获取媒体部分的域\r\n */\r\nexport function getMediaFields(\r\n  type: NoteType,\r\n  data: NoteData,\r\n  modelFieldsMap: ModelFields\r\n): MediaField {\r\n  const mediaNames = getMediaNames(type);\r\n  return Object.entries(modelFieldsMap).reduce((audio, [key, field]) => {\r\n    //@ts-ignore 是能够正确匹配的\r\n    if (!mediaNames.includes(key)) return audio;\r\n    //@ts-ignore 是能够正确匹配的\r\n    const url = data[key];\r\n    if (!url || !field) return audio;\r\n    audio.push({\r\n      url,\r\n      fields: [field],\r\n      filename: `${encodeURIComponent(url)}.mp3`,\r\n    });\r\n    return audio;\r\n  }, [] as MediaField);\r\n}\r\n\r\n/**\r\n * 纯函数，获取非媒体部分的域\r\n */\r\nexport function getNotMediaFields(\r\n  type: NoteType,\r\n  data: NoteData,\r\n  modelFieldsMap: ModelFields\r\n): {\r\n  [key: string]: string;\r\n} {\r\n  const mediaNames = getMediaNames(type);\r\n  return Object.entries(modelFieldsMap).reduce(\r\n    (fields, [key, fieldKey]) => {\r\n      //@ts-ignore 是可以正确匹配的\r\n      if (mediaNames.includes(key)) return fields;\r\n      //@ts-ignore 是可以正确匹配的\r\n      const fieldValue = data[key];\r\n      if (!fieldKey || !fieldValue) return fields;\r\n      fields[fieldKey] = fieldValue;\r\n      return fields;\r\n    },\r\n    {} as {\r\n      [key: string]: string;\r\n    }\r\n  );\r\n}\r\n","export {\r\n  isAnkiResponse,\r\n  createForgottenResponse,\r\n  createDuplicateResponse,\r\n  createAnkiErrorResponse,\r\n  createOldVersionResponse,\r\n  createSuccessAnkiResponse,\r\n  createConfigErrorResponse,\r\n  createDisconnectionResponse,\r\n  createFirstAddSuccessResponse,\r\n  createUnexpectedErrorResponse,\r\n} from \"./createAnkiResponse\";\r\n\r\nexport {\r\n  getConfigName,\r\n  getMediaFields,\r\n  getNotMediaFields,\r\n  getDuplicateConfigName,\r\n} from \"./helper\";\r\n","export enum Command {\r\n  AddNote,\r\n  UpdateNote,\r\n  RelearnNote,\r\n  HistoryIndex,\r\n  TranslateText,\r\n\r\n  PauseAudio,\r\n  ShowTranslation,\r\n  OpenSelection,\r\n  HiddenChinese,\r\n  BackHistory,\r\n  ForwardHistory,\r\n  Callback,\r\n  OpenSearchBox,\r\n  ShowInjectTranslation,\r\n  ShowIframe,\r\n\r\n  GetVersion,\r\n  GetDeckNames,\r\n  GetModelNames,\r\n  GetModelFieldNames,\r\n\r\n  TranslateInjectText,\r\n}\r\n","export {\r\n  WORD_FIELDS_MAP,\r\n  PHRASE_FIELDS_MAP,\r\n  COMMON_CONFIG_MAP,\r\n  SENTENCE_FIELDS_MAP,\r\n  ANKI_CONNECTION_MAP,\r\n} from \"./modelFieldNameMap\";\r\n\r\nexport { Command } from \"./command\";\r\n\r\nexport const DEFAULT_ANKI_CONNECTION_URL = \"http://127.0.0.1:8765\";\r\n","import {\r\n  WordFields,\r\n  PhraseFields,\r\n  CommonConfig,\r\n  SentenceFields,\r\n} from \"@/extensions-api\";\r\n\r\nconst WORD_FIELDS_MAP: WordFields = {\r\n  definition: \"定义\",\r\n  word: \"单词\",\r\n  translation: \"翻译\",\r\n  part_of_speech: \"词性\",\r\n  definition_audio: \"定义音频\",\r\n  am: \"美国音标\",\r\n  en: \"英国音标\",\r\n  am_audio: \"美国音频\",\r\n  en_audio: \"英国音频\",\r\n  star_amount: \"出现频率\",\r\n  example_audio: \"例句音频\",\r\n  example_sentence: \"例句原文\",\r\n  example_sentence_translation: \"例句翻译\",\r\n};\r\n\r\nconst PHRASE_FIELDS_MAP: PhraseFields = {\r\n  phrase: \"短语词组\",\r\n  phrase_audio: \"短语音频\",\r\n  translations: \"短语翻译\",\r\n  example_audio_1: \"例句1音频\",\r\n  example_audio_2: \"例句2音频\",\r\n  example_audio_3: \"例句3音频\",\r\n  example_sentence_1: \"例句1原文\",\r\n  example_sentence_2: \"例句2原文\",\r\n  example_sentence_3: \"例句3原文\",\r\n  example_sentence_translation_1: \"例句1翻译\",\r\n  example_sentence_translation_2: \"例句2翻译\",\r\n  example_sentence_translation_3: \"例句3翻译\",\r\n};\r\n\r\nconst SENTENCE_FIELDS_MAP: SentenceFields = {\r\n  sentence: \"句子原文\",\r\n  sentence_audio: \"句子音频\",\r\n  sentence_translation: \"句子翻译\",\r\n};\r\n\r\nconst COMMON_CONFIG_MAP: CommonConfig = {\r\n  deckName: \"牌组名称\",\r\n  modelName: \"模型名称\",\r\n  tags: \"卡片标签\",\r\n};\r\n\r\nconst ANKI_CONNECTION_MAP = {\r\n  ankiConnectionMethod: \"连接方法\",\r\n  ankiConnectionURL: \"连接URL\",\r\n};\r\n\r\nif (__DEV__) {\r\n  Object.freeze(WORD_FIELDS_MAP);\r\n  Object.freeze(PHRASE_FIELDS_MAP);\r\n  Object.freeze(SENTENCE_FIELDS_MAP);\r\n  Object.freeze(COMMON_CONFIG_MAP);\r\n  Object.freeze(ANKI_CONNECTION_MAP);\r\n}\r\n\r\nexport {\r\n  WORD_FIELDS_MAP,\r\n  COMMON_CONFIG_MAP,\r\n  PHRASE_FIELDS_MAP,\r\n  SENTENCE_FIELDS_MAP,\r\n  ANKI_CONNECTION_MAP,\r\n};\r\n","import lowerCase from \"lodash.lowercase\";\r\nimport {\r\n  Cache,\r\n  isErrorData,\r\n  createCacography,\r\n  createNoCacheError,\r\n} from \"../utils\";\r\n\r\nimport { translateWord } from \"./translateWord\";\r\nimport { translatePhrase } from \"./translatePhrase\";\r\nimport translateSentence from \"./translateSentence\";\r\n\r\nimport type {\r\n  WordData,\r\n  PhraseData,\r\n  SentenceData,\r\n  TranslationResult,\r\n} from \"../types\";\r\n\r\n////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n//具体实现\r\n\r\nexport class Collins_en_cn {\r\n  xhr: XMLHttpRequest | null;\r\n  cache: Cache<string, TranslationResult>;\r\n\r\n  constructor(cacheAmount = 20) {\r\n    this.xhr = null;\r\n    this.cache = new Cache(cacheAmount);\r\n  }\r\n\r\n  /**\r\n   * 对translateText的包装，为其添加缓存能力\r\n   * @param text 待翻译文本\r\n   */\r\n  async translate(text: string): Promise<TranslationResult> {\r\n    const { cache } = this;\r\n    const translation = cache.get(text);\r\n    if (translation) return translation;\r\n    const translationResult = await this.translateText(text);\r\n    if (isErrorData(translationResult) && !translationResult.cache) {\r\n      translationResult.queryText = text;\r\n      return translationResult;\r\n    }\r\n    this.cache.set(text, translationResult);\r\n    return translationResult;\r\n  }\r\n\r\n  /**\r\n   * 词典基于有道翻译网页版，因此需要获取特定的网页DOM\r\n   */\r\n  private async getPageDOM(input: string): Promise<Document> {\r\n    //短时间内快速查询的情况下，如果上一个未返回，则直接中止\r\n    if (this.xhr) this.xhr.abort();\r\n    return new Promise((resolve, reject) => {\r\n      //词典基于有道网页版\r\n      const searchURL =\r\n        \"https://dict.youdao.com/w/\" + encodeURIComponent(input);\r\n      const xhr = new XMLHttpRequest();\r\n      this.xhr = xhr;\r\n      xhr.open(\"GET\", searchURL);\r\n      xhr.responseType = \"document\";\r\n      xhr.timeout = 6000;\r\n      xhr.addEventListener(\"load\", () => {\r\n        if (xhr.status < 200 || xhr.status >= 400)\r\n          reject(\r\n            createNoCacheError(\r\n              `请求错误,状态码：${xhr.status}，原因：${xhr.statusText}`\r\n            )\r\n          );\r\n        resolve(xhr.response);\r\n      });\r\n      xhr.addEventListener(\"error\", () => {\r\n        reject(createNoCacheError(`网络连接错误，请检查网络连接状态`));\r\n      });\r\n      xhr.addEventListener(\"timeout\", () => {\r\n        reject(createNoCacheError(\"请求超时,请再次尝试或查看网络连接状态\"));\r\n      });\r\n      xhr.addEventListener(\"abort\", () => {\r\n        reject(createNoCacheError(\"请求被取消\"));\r\n      });\r\n      xhr.send(null);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 对text进行翻译，获取翻译数据\r\n   * @param text 需要进行翻译的文本\r\n   */\r\n  private async translateText(text: string): Promise<TranslationResult> {\r\n    try {\r\n      //将 驼峰、-、_ 等写法连接的文本转换为由空格分隔的文本\r\n      text = lowerCase(text);\r\n      const dom = await this.getPageDOM(text);\r\n      let translation: WordData | PhraseData | SentenceData | void;\r\n      //如果存在空格，则认为其为多个单词组合的句子、词组\r\n      if (/\\s/g.test(text)) {\r\n        translation = translatePhraseAndSentence(dom);\r\n      } else {\r\n        translation = translateWord(dom);\r\n      }\r\n\r\n      if (!translation) handleNotFound(dom, text);\r\n      //上面的判断决定了其必定不为空，因此可以使用 !进行断言\r\n      return translation!;\r\n    } catch (err: any) {\r\n      if (isErrorData(err)) return err;\r\n      return createNoCacheError(err?.message);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 处理多个单词组成的翻译文本，一般情况下是 短语或句子\r\n */\r\nfunction translatePhraseAndSentence(\r\n  dom: Document\r\n): SentenceData | PhraseData | void {\r\n  //情况一：待翻译的是短语\r\n  const translatedPhrase = translatePhrase(dom);\r\n  if (translatedPhrase) return translatedPhrase;\r\n\r\n  //情况二:待翻译的是句子\r\n  const translatedSentence = translateSentence(dom);\r\n  if (translatedSentence) return translatedSentence;\r\n}\r\n\r\n/**\r\n * 用于兜底处理未找到任何翻译的情况\r\n */\r\nfunction handleNotFound(dom: Document, text: string) {\r\n  //可能是用户拼写出错，推测正确的拼写给用户参考\r\n  const possibleSpelling = getCorrectSpelling(dom);\r\n  if (possibleSpelling) {\r\n    throw createCacography(possibleSpelling);\r\n  }\r\n  //真的没有找到任何翻译\r\n  throw createNoCacheError(`\"没找到关于 '${text}' 的任何翻译\"`);\r\n}\r\n\r\n/**\r\n * 获取页面的中关于拼写错误部分的正确推断\r\n */\r\nfunction getCorrectSpelling(dom: Document) {\r\n  const inferCorrects = [\r\n    ...dom.querySelectorAll(\"#results-contents .error-typo .typo-rel a\"),\r\n  ].reduce((acc, node) => {\r\n    const text = node.textContent;\r\n    if (text) acc.push(text);\r\n    return acc;\r\n  }, [] as string[]);\r\n  if (inferCorrects.length) return inferCorrects;\r\n}\r\n","import type { ExampleSentence, PhraseData } from \"../types\";\r\n//短语翻译\r\nexport function translatePhrase(dom: Document): PhraseData | void {\r\n  const phrase = getOriginText(dom);\r\n  if (!phrase) return;\r\n  const translation = dom\r\n    .querySelectorAll(\"#ydTrans .trans-container p\")[1]\r\n    ?.textContent?.trim();\r\n  const translations = getTranslation(dom) || (translation && [translation]);\r\n  if (!translations) return;\r\n\r\n  const phrase_audio = `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n    phrase\r\n  )}`;\r\n  const example_sentences = getPhraseExamples(dom);\r\n  return {\r\n    phrase,\r\n    translations,\r\n    phrase_audio,\r\n    type: \"PHRASE\",\r\n    example_sentences,\r\n  };\r\n}\r\n/**\r\n * 获取翻译源文本\r\n * @param dom\r\n * @returns\r\n */\r\nfunction getOriginText(dom: Document) {\r\n  return (\r\n    dom.querySelector(\".wordbook-js\")?.firstElementChild?.textContent?.trim() ||\r\n    \"\"\r\n  );\r\n}\r\n/**\r\n * 获取单词的粗略翻译\r\n * @param dom 具有翻译内容的页面DOM\r\n * @returns\r\n */\r\nfunction getTranslation(dom: Document) {\r\n  const ul = dom.querySelector(\"#phrsListTab .trans-container > ul\");\r\n  if (!ul) return;\r\n  const liNodes = ul.children;\r\n  const result = Array.from(liNodes).reduce((result, li) => {\r\n    const text = li.textContent?.trim();\r\n    if (!text) return result;\r\n    result.push(text);\r\n    return result;\r\n  }, [] as string[]);\r\n  if (!result.length) return;\r\n  return result;\r\n}\r\n/**\r\n * 获取短语例句\r\n * @param dom\r\n * @returns\r\n */\r\nfunction getPhraseExamples(dom: Document) {\r\n  const liNodes = dom.querySelectorAll(\"#bilingual .ol li\");\r\n  const result = Array.from(liNodes).reduce((result, li) => {\r\n    const pNodes = li.querySelectorAll(\"p\");\r\n    if (!pNodes[0] || !pNodes[1]) return result;\r\n    //用于获取音频\r\n    const example_sentence_origin = pNodes[0]?.textContent?.trim() || \"\";\r\n    //获取短语加粗的例句\r\n    const example_sentence = Array.from(pNodes[0].childNodes)\r\n      .reduce((sentence, node) => {\r\n        if (node.nodeName !== \"SPAN\") return sentence;\r\n        const children = (<HTMLSpanElement>node).children;\r\n        if (!children.length) return sentence + node.textContent;\r\n        const childNodes = node.childNodes;\r\n        const text = Array.from(childNodes).reduce((text, node) => {\r\n          if (node.nodeType === 3) return text + node.textContent;\r\n          if (node.nodeName === \"B\") {\r\n            return text + `<b>${node.textContent}</b>`;\r\n          }\r\n          return text;\r\n        }, \"\");\r\n        return sentence + text;\r\n      }, \"\")\r\n      .trim();\r\n\r\n    const example_sentence_translation = pNodes[1].textContent?.trim() || \"\";\r\n    const example_audio = `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n      example_sentence_origin\r\n    )}&le=eng`;\r\n    result.push({\r\n      example_audio,\r\n      example_sentence,\r\n      example_sentence_translation,\r\n    });\r\n    return result;\r\n  }, [] as ExampleSentence[]);\r\n  if (!result.length) return;\r\n  return result;\r\n}\r\n","import type { SentenceData } from \"../types\";\r\n\r\n//句子翻译\r\nexport default function translateSentence(dom: Document): SentenceData | void {\r\n  const sentenceNode = dom.querySelectorAll(\"#ydTrans .trans-container p\")[0];\r\n  const transNode = dom.querySelectorAll(\"#ydTrans .trans-container p\")[1];\r\n  const sentence = sentenceNode?.textContent?.trim();\r\n  const sentence_translation = transNode?.textContent?.trim();\r\n  if (!sentence || !sentence_translation) return;\r\n  return {\r\n    sentence,\r\n    type: \"SENTENCE\",\r\n    sentence_translation,\r\n    sentence_audio: `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n      sentence\r\n    )}&le=eng`,\r\n  };\r\n}\r\n","import type { WordData, ExampleSentence, TranslationItem } from \"../types\";\r\n\r\n//单词翻译\r\nexport function translateWord(dom: Document): WordData | void {\r\n  const word = getOriginText(dom);\r\n  const star_amount =\r\n    Number(dom.querySelector(\".star\")?.className?.match(/star(\\d)/)?.[1]) || 0;\r\n  if (!word) return;\r\n\r\n  return {\r\n    word,\r\n    star_amount,\r\n    type: \"WORD\",\r\n    phonetic: getPhonetic(dom, word),\r\n    translationList: getTranslationList(dom),\r\n    translations: formatTranslations(getTranslation(dom)),\r\n  };\r\n}\r\n\r\n/**\r\n * 获取翻译源文本\r\n * @param dom\r\n * @returns\r\n */\r\nfunction getOriginText(dom: Document): string {\r\n  return (\r\n    dom.querySelector(\".wordbook-js\")?.firstElementChild?.textContent?.trim() ||\r\n    \"\"\r\n  );\r\n}\r\n\r\n/**\r\n * 获取单词的粗略翻译\r\n * @param dom 具有翻译内容的页面DOM\r\n * @returns\r\n */\r\nfunction getTranslation(dom: Document): string[] | undefined {\r\n  const ul = dom.querySelector(\"#phrsListTab .trans-container > ul\");\r\n  if (!ul) return;\r\n  const liNodes = ul.children;\r\n  const result = Array.from(liNodes).reduce((result, li) => {\r\n    const text = li.textContent;\r\n    if (!text) return result;\r\n    result.push(text);\r\n    return result;\r\n  }, [] as string[]);\r\n  if (!result.length) return;\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * @param dom 有道翻译页面文档DOM\r\n * @param word 翻译的目标单词\r\n * @returns 单词音标与音频对象\r\n */\r\nfunction getPhonetic(dom: Document, word: string) {\r\n  let en = dom\r\n    .querySelectorAll(\".pronounce\")?.[0]\r\n    ?.textContent?.replace(/\\s*|\\r|\\n/g, \"\");\r\n  let am = dom\r\n    .querySelectorAll(\".pronounce\")?.[1]\r\n    ?.textContent?.replace(/\\s*|\\r|\\n/g, \"\");\r\n  const en_audio = `https://dict.youdao.com/dictvoice?audio=${word}&type=1`;\r\n  const am_audio = `https://dict.youdao.com/dictvoice?audio=${word}&type=2`;\r\n\r\n  let phonetic = dom\r\n    .querySelector(\"#collinsResult .wt-container .phonetic\")\r\n    ?.textContent?.trim();\r\n  if (phonetic) {\r\n    phonetic = phonetic.replace(/^\\//g, \"[\").replace(/\\/$/, \"]\");\r\n    if (!en || en.length < 3) en = (en || \"\") + phonetic;\r\n    if (!am || am.length < 3) am = (am || \"\") + phonetic;\r\n  }\r\n\r\n  return {\r\n    am, //美国发音\r\n    en, //英国发音\r\n    am_audio, //美国发音音频URI\r\n    en_audio, //英国发音音频URI\r\n  };\r\n}\r\n\r\n/**\r\n * @param dom 网易网页版翻译所对应的DOM文档对象\r\n * @param word 查询的单词\r\n * @returns 获取单词例句相关的数据数组\r\n */\r\nfunction getTranslationList(dom: Document): Array<TranslationItem> | undefined {\r\n  //获取所有翻译项\r\n  const lis = dom.querySelectorAll(\"#collinsResult .ol li\");\r\n  const result = Array.from(lis).reduce((result, li) => {\r\n    //处理释义与对应的翻译的逻辑\r\n    const textResult = getTranslationText(li);\r\n    //过滤无效项\r\n    if (!textResult) {\r\n      return result;\r\n    }\r\n    const [text, index] = textResult;\r\n    const definition = text.slice(0, index).trim();\r\n    //清除<b></b>避免影响音频获取\r\n    const definition_origin = definition.replace(/<b>|<\\/b>/g, \"\");\r\n    result.push({\r\n      part_of_speech: getPartOfSpeech(li), //词性\r\n      definition, //定义\r\n      definition_audio: `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n        definition_origin\r\n      )}&le=eng`,\r\n      translation: text.slice(index).trim(), //翻译\r\n      example_sentences: getExampleSentences(li), //例句数组\r\n    });\r\n    return result;\r\n  }, [] as Array<TranslationItem>);\r\n  //避免出现空数组的情况\r\n  if (!result.length) return;\r\n  return result;\r\n}\r\n\r\n/**\r\n *\r\n * @param li 需要处理的其中一条翻译条目所对应的li元素节点\r\n * @returns 返回该释义对应单词的词性，例如：n-count\r\n */\r\nfunction getPartOfSpeech(li: Element): string {\r\n  const targetNode = li.querySelector(\".collinsMajorTrans p .additional\");\r\n  return (targetNode && targetNode.textContent?.trim()) || \"\";\r\n}\r\n\r\n/**\r\n * @param li 需要处理的其中一条翻译条目所对应的li元素节点\r\n * @returns [text,index] 返回翻译文本 text ，以及用于截取英文释义与中文翻译的下标 index\r\n */\r\nfunction getTranslationText(li: Element): [string, number] | null {\r\n  const pNode = li.querySelector(\".collinsMajorTrans p\");\r\n  if (!pNode) return null; //不存在释义项\r\n  //过滤掉干扰项\r\n  const nodes = Array.from(pNode.childNodes).filter((node) => {\r\n    //过滤展示词性的节点\r\n    if (\r\n      node.nodeType === 1 &&\r\n      (node as Element).classList.contains(\"additional\")\r\n    )\r\n      return false;\r\n    return true;\r\n  });\r\n  //合并目标文本\r\n  let text = \"\";\r\n  nodes.forEach((node) => {\r\n    if (node.nodeType === 3) {\r\n      text += node.textContent;\r\n    }\r\n    if (node.nodeName === \"B\") {\r\n      text += `<b>${node.textContent}</b>`;\r\n    }\r\n  });\r\n  text = text.trim();\r\n  //寻找英文释义与中文释义的边界\r\n  let index = text.search(/[\\u4e00-\\u9fa5]+/i);\r\n  //没有中文，则判断这并不是一个存放释义与翻译的标签\r\n  if (index === -1) return null;\r\n\r\n  //避免 中文翻译 被括号包裹起来的情况，而导致的 ()残留\r\n  const reg = /[a-z.)]/i;\r\n  while (index > 0) {\r\n    if (reg.test(text[index - 1] || \"\")) break;\r\n    index--;\r\n  }\r\n  return [text, index];\r\n}\r\n\r\n/**\r\n *\r\n * @param li 需要处理的其中一条翻译条目所对应的li元素节点\r\n * @returns 返回例句相关数据\r\n */\r\nfunction getExampleSentences(li: Element): ExampleSentence[] | undefined {\r\n  const div_example_s = li.querySelectorAll(\".exampleLists .examples\");\r\n  const exampleSentences = Array.from(div_example_s).reduce((acc, div) => {\r\n    const children = div.children;\r\n    const example_sentence = children[0]?.textContent?.trim() || \"\";\r\n    const example_sentence_translation = children[1]?.textContent?.trim() || \"\";\r\n\r\n    //如果例句存在才添加，否则应该过滤掉\r\n    if (example_sentence) {\r\n      acc.push({\r\n        example_sentence, //英语例句\r\n        example_sentence_translation, //中文例句\r\n        example_audio: `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(\r\n          example_sentence\r\n        )}&le=eng`,\r\n      });\r\n    }\r\n\r\n    return acc;\r\n  }, [] as ExampleSentence[]);\r\n  if (!exampleSentences.length) return;\r\n  return exampleSentences;\r\n}\r\n\r\n/**\r\n * 纯函数，格式化translations的结构\r\n */\r\nfunction formatTranslations(translations: string[] | undefined) {\r\n  if (translations == null) return;\r\n  const formated = translations.reduce(function (acc, cur) {\r\n    const point = cur.indexOf(\".\") + 1;\r\n    const part_of_speech = point === -1 ? \"\" : cur.slice(0, point);\r\n    const oldArray = acc[part_of_speech];\r\n    const newArray = cur.slice(point).split(\"；\");\r\n\r\n    if (oldArray == null) {\r\n      acc[part_of_speech] = newArray;\r\n    } else {\r\n      oldArray.push(...newArray);\r\n      acc[part_of_speech] = oldArray;\r\n    }\r\n\r\n    return acc;\r\n  }, {} as { [key: string]: string[] });\r\n  return formated;\r\n}\r\n","export type {\r\n  WordData,\r\n  ErrorData,\r\n  PhraseData,\r\n  SentenceData,\r\n  ExampleSentence,\r\n  TranslationItem,\r\n  TranslationResult,\r\n} from \"./types\";\r\n\r\nexport { isWordData, isErrorData, isPhraseData, isSentenceData } from \"./utils\";\r\n\r\nexport { Collins_en_cn } from \"./Collins_en_cn\";\r\n","export class Cache<K, V> {\r\n  private map: Map<K, V>\r\n  private max: number\r\n  constructor(max: number) {\r\n      this.map = new Map();\r\n      this.max = max;\r\n  }\r\n  set(key: K, value: V) {\r\n      const map = this.map;\r\n      const max = this.max;\r\n      if (map.size >= max) {\r\n          map.delete(map.keys().next().value);\r\n      }\r\n      return map.set(key, value);\r\n  }\r\n  get(key: K) {\r\n      return this.map.get(key)\r\n  }\r\n}","import {\r\n  WordData,\r\n  ErrorData,\r\n  PhraseData,\r\n  SentenceData,\r\n  TranslationResult,\r\n} from \"../types\";\r\n\r\ntype ExtractType<T extends TranslationResult> = T[\"type\"] \r\n\r\nfunction typeOf(\r\n  thing: TranslationResult,\r\n  type: ExtractType<TranslationResult>\r\n) {\r\n  return (\r\n    Object.prototype.hasOwnProperty.call(thing, \"type\") && thing.type === type\r\n  );\r\n}\r\n\r\nexport function isErrorData(thing: TranslationResult): thing is ErrorData {\r\n  return typeOf(thing, \"ERROR\");\r\n}\r\n\r\nexport function isWordData(thing: TranslationResult): thing is WordData {\r\n  return typeOf(thing, \"WORD\");\r\n}\r\n\r\nexport function isPhraseData(thing: TranslationResult): thing is PhraseData {\r\n  return typeOf(thing, \"PHRASE\");\r\n}\r\n\r\nexport function isSentenceData(\r\n  thing: TranslationResult\r\n): thing is SentenceData {\r\n  return typeOf(thing, \"SENTENCE\");\r\n}\r\n","import { ErrorData } from \"../types\";\r\n\r\nfunction createErrorData(options: Omit<ErrorData, \"type\">): ErrorData {\r\n  const target = { type: \"ERROR\" } as const;\r\n  return Object.assign(target, options);\r\n}\r\n\r\nexport function createCacography(possibleSpelling: string[]) {\r\n  return createErrorData({\r\n    cache: true,\r\n    possibleSpelling,\r\n  });\r\n}\r\n\r\nexport function createNoCacheError(message: string) {\r\n  return createErrorData({\r\n    cache: false,\r\n    message,\r\n  });\r\n}\r\n","export { Cache } from \"./Cache\";\r\nexport { createCacography,createNoCacheError } from \"./errorData\";\r\nexport {\r\n  isErrorData,\r\n  isWordData,\r\n  isPhraseData,\r\n  isSentenceData,\r\n} from \"./determine\";\r\n","export function setBadgeText(\r\n  details: chrome.browserAction.BadgeTextDetails,\r\n  callback?: () => void\r\n) {\r\n  chrome.browserAction.setBadgeText(details, callback);\r\n}\r\n","//此处的值与 manifest 中 command对象的键相关\r\ntype Command =\r\n  | \"open_search_box\"\r\n  | \"show_translation_page\"\r\n  | \"switch_hotkey_and_selection_listener\";\r\n\r\ntype HandlerObject = Record<Command, () => void>;\r\nlet onCommand = function onCommand(handlerObject: HandlerObject) {\r\n  //监听用户快捷键，用于开关拓展\r\n  chrome.commands.onCommand.addListener(function (command) {\r\n    const handler = handlerObject[command as Command];\r\n    handler?.();\r\n  });\r\n};\r\n\r\nif (__DEV__) {\r\n  onCommand = function StrictOnCommand(handlerObject: HandlerObject) {\r\n    const { commands } = chrome.runtime.getManifest();\r\n    if (!commands) throw new Error(\"manifest.json 文件中没有 commands 项\");\r\n    const commandNames = Object.keys(handlerObject);\r\n    commandNames.forEach(function (command) {\r\n      if (!(command in commands))\r\n        throw new Error(`没有在 commands 中找到 ${command} 项`);\r\n    });\r\n    //监听用户快捷键，用于开关拓展\r\n    chrome.commands.onCommand.addListener(function (command) {\r\n      const handler = handlerObject[command as Command];\r\n      handler?.();\r\n    });\r\n  };\r\n}\r\n\r\nexport { onCommand };\r\n","export function addContextMenuItem(\r\n  createProperties: chrome.contextMenus.CreateProperties,\r\n  callback?: () => void\r\n) {\r\n  chrome.contextMenus.create(createProperties, callback);\r\n}\r\n\r\nexport function onContextMenuClick(\r\n  callback: (\r\n    info: chrome.contextMenus.OnClickData,\r\n    tab?: chrome.tabs.Tab\r\n  ) => void\r\n) {\r\n  chrome.contextMenus.onClicked.addListener(callback);\r\n}\r\n","export {\r\n  getStorageByArray,\r\n  getStorageByObject,\r\n  setStorage,\r\n  onStorageChange,\r\n} from \"./storage\";\r\n\r\nexport { onCommand } from \"./commands\";\r\nexport { setBadgeText } from \"./browserAction\";\r\nexport { executeScript, postFrontend } from \"./tabs\";\r\nexport { addContextMenuItem, onContextMenuClick } from \"./contextMenus\";\r\nexport { postBackend, onMessage, getURL, openOptionsPage } from \"./runtime\";\r\nexport { TabPanelName } from \"./types\";\r\nexport type {\r\n  Storage,\r\n  WordFields,\r\n  ModelFields,\r\n  PhraseFields,\r\n  SentenceFields,\r\n  WordConfig,\r\n  PhraseConfig,\r\n  CommonConfig,\r\n  SentenceConfig,\r\n  CheckWordDuplicate,\r\n  CheckPhraseDuplicate,\r\n  CheckSentenceDuplicate,\r\n  ConfigKeys,\r\n  DuplicateConfigKeys,\r\n} from \"./types\";\r\n","import { Command } from \"@/configuration\";\r\nimport { ShowData, Point } from \"@/types\";\r\nimport { NoteData } from \"@/translation-page\";\r\nimport {\r\n  AddNoteReturnType,\r\n  GetVersionReturnType,\r\n  RelearnCardsReturnType,\r\n  GetDeckNamesReturnType,\r\n  GetModelNamesReturnType,\r\n  GetModelFieldNamesReturnType,\r\n} from \"@/anki\";\r\nimport { TranslationResult } from \"@/dictionary\";\r\nexport function getURL(name: string) {\r\n  return chrome.runtime.getURL(name);\r\n}\r\n\r\nexport function openOptionsPage(callback?: () => void) {\r\n  chrome.runtime.openOptionsPage(callback);\r\n}\r\n\r\nexport type SendResponse = Parameters<\r\n  Parameters<typeof chrome.runtime.onMessage.addListener>[\"0\"]\r\n>[\"2\"];\r\n\r\n//向后端发送消息的函数\r\nexport async function postBackend(\r\n  command: Command.GetDeckNames\r\n): Promise<GetDeckNamesReturnType>;\r\nexport async function postBackend(\r\n  command: Command.GetModelNames\r\n): Promise<GetModelNamesReturnType>;\r\nexport async function postBackend(\r\n  command: Command.GetVersion\r\n): Promise<GetVersionReturnType>;\r\nexport async function postBackend(\r\n  command: Command.GetModelFieldNames,\r\n  data: string\r\n): Promise<GetModelFieldNamesReturnType>;\r\nexport async function postBackend(\r\n  command: Command.AddNote,\r\n  data: NoteData\r\n): Promise<AddNoteReturnType>;\r\nexport async function postBackend(\r\n  command: Command.RelearnNote,\r\n  data: number[]\r\n): Promise<RelearnCardsReturnType>;\r\nexport async function postBackend(\r\n  command: Command.TranslateText,\r\n  data: string\r\n): Promise<TranslationResult>;\r\nexport async function postBackend(\r\n  command: Command.TranslateInjectText,\r\n  data: { text: string; point: Point }\r\n): Promise<void>;\r\nexport async function postBackend(command: Command, data?: any): Promise<any> {\r\n  return new Promise((resolve) => {\r\n    chrome.runtime.sendMessage({ command, data }, function (response) {\r\n      resolve(response);\r\n    });\r\n  });\r\n}\r\n\r\ninterface Handler {\r\n  (args: {\r\n    command: Command.ShowInjectTranslation;\r\n    data: Required<ShowData>;\r\n    sendResponse: () => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.TranslateInjectText;\r\n    data: { text: string; point: Point };\r\n    sendResponse: () => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.OpenSearchBox;\r\n    data: undefined;\r\n    sendResponse: () => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.ShowIframe;\r\n    data: undefined;\r\n    sendResponse: () => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.GetVersion;\r\n    data: undefined;\r\n    sendResponse: (data: GetVersionReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.GetDeckNames;\r\n    data: undefined;\r\n    sendResponse: (data: GetDeckNamesReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.GetModelNames;\r\n    data: undefined;\r\n    sendResponse: (data: GetModelNamesReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.GetModelFieldNames;\r\n    data: string;\r\n    sendResponse: (data: GetModelFieldNamesReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.AddNote;\r\n    data: NoteData;\r\n    sendResponse: (data: AddNoteReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.RelearnNote;\r\n    data: number[];\r\n    sendResponse: (data: RelearnCardsReturnType) => void;\r\n  }): Promise<void>;\r\n  (args: {\r\n    command: Command.TranslateText;\r\n    data: string;\r\n    sendResponse: (data: TranslationResult) => void;\r\n  }): Promise<void>;\r\n}\r\n//监听拓展不同模块间消息传递的函数\r\nexport function onMessage(handler: Handler) {\r\n  chrome.runtime.onMessage.addListener(function (\r\n    message,\r\n    sender,\r\n    _sendResponse\r\n  ) {\r\n    //主要用于消除因为 return true,但却没有调用 sendResponse 而造成的报错。\r\n    let called = false;\r\n    handler({\r\n      ...message,\r\n      sendResponse(...args: any[]) {\r\n        called = true;\r\n        return _sendResponse(...args);\r\n      },\r\n    }).then(function () {\r\n      if (called) return;\r\n\r\n      _sendResponse();\r\n    });\r\n    return true; //为了使sendResponse可以异步调用，这是必须的\r\n  });\r\n}\r\n","import pick from \"lodash.pick\";\r\nimport { DEFAULT_ANKI_CONNECTION_URL } from \"@/configuration\";\r\nimport { Storage, TabPanelName, PartialStorage } from \"./types\";\r\n\r\n//缓存默认值对象，用于在用户刚刚加载拓展，没有进行任何配置时作为初始配置。\r\n//确保 Storage 中的缓存无论何时都是符合要求的，不存在刚刚加载插件时因为 Storage 为空而导致的问题。\r\nconst defaultStorage: Storage = {\r\n  switchHotkeyAndSelectionListener: true,\r\n  hotKey: \"shiftKey\",\r\n  openSelection: true,\r\n  hiddenChinese: false,\r\n  checkedTabPanel: TabPanelName.Home,\r\n  ankiConnectionMethod: \"AnkiConnection\",\r\n  ankiConnectionURL: DEFAULT_ANKI_CONNECTION_URL,\r\n  switchStrengthenSelectionByPressedCtrl: true,\r\n  wordConfig: {},\r\n  phraseConfig: {},\r\n  sentenceConfig: {},\r\n\r\n  checkWordDuplicate: {\r\n    word: true,\r\n    deckName: true,\r\n    definition: true,\r\n    translation: true,\r\n  },\r\n  checkPhraseDuplicate: {\r\n    phrase: true,\r\n    deckName: true,\r\n  },\r\n  checkSentenceDuplicate: {\r\n    deckName: true,\r\n    sentence: true,\r\n  },\r\n};\r\n\r\ntype StorageKeys = keyof Storage;\r\n\r\ntype StorageHandlers<T extends PartialStorage> = {\r\n  [P in keyof T]?: (value: T[P]) => void;\r\n};\r\n\r\ntype StorageToCallback<T extends PartialStorage> = {\r\n  [P in keyof T]?: (oldVal: T[P], newVal: T[P]) => void;\r\n};\r\n\r\ntype GetStorageCallback = (storage: PartialStorage) => void;\r\n\r\nfunction handlersIsArray(\r\n  handlers: StorageHandlers<Storage> | StorageKeys[]\r\n): handlers is StorageKeys[] {\r\n  return Array.isArray(handlers);\r\n}\r\n\r\nfunction getStorage<K extends StorageKeys>(\r\n  handlers: K[],\r\n  callback: (storage: Pick<Storage, K>) => void\r\n): void;\r\nfunction getStorage(\r\n  handlers: StorageHandlers<Storage>,\r\n  callback?: GetStorageCallback\r\n): void;\r\nfunction getStorage<K extends StorageKeys>(\r\n  handlers: StorageHandlers<Storage> | K[],\r\n  callback?: (storage: Pick<Storage, K>) => void\r\n) {\r\n  const storageKeys = handlersIsArray(handlers)\r\n    ? handlers\r\n    : (Object.keys(handlers) as StorageKeys[]);\r\n  const storage = pick(defaultStorage, storageKeys);\r\n  chrome.storage.local.get(storage, (storage: PartialStorage) => {\r\n    if (!handlersIsArray(handlers)) {\r\n      Object.keys(storage).forEach((key) => {\r\n        const handler = handlers[key as StorageKeys];\r\n        const cacheValue = storage[key as StorageKeys];\r\n        //@ts-ignore 是匹配的值\r\n        handler?.(cacheValue);\r\n      });\r\n    }\r\n    callback?.(storage as Pick<Storage, K>);\r\n  });\r\n}\r\n\r\nexport function getStorageByArray<K extends StorageKeys>(\r\n  names: K[],\r\n  callback: (storage: Pick<Storage, K>) => void\r\n) {\r\n  getStorage(names, callback);\r\n}\r\n\r\nexport function getStorageByObject(\r\n  handlers: StorageHandlers<Storage>,\r\n  callback?: GetStorageCallback\r\n) {\r\n  getStorage(handlers, callback);\r\n}\r\n\r\nexport function onStorageChange(handlers: StorageToCallback<Storage>) {\r\n  const listener: Parameters<typeof chrome.storage.onChanged.addListener>[0] = (\r\n    changes\r\n  ) => {\r\n    Object.keys(changes).forEach((key) => {\r\n      const handler = handlers[key as StorageKeys];\r\n      if (handler) {\r\n        const { oldValue, newValue } = changes[key]!;\r\n        //@ts-ignore 是正确匹配的\r\n        handler(oldValue, newValue);\r\n      }\r\n    });\r\n  };\r\n  chrome.storage.onChanged.addListener(listener);\r\n  return () => {\r\n    chrome.storage.onChanged.removeListener(listener);\r\n  };\r\n}\r\n\r\nexport function setStorage(\r\n  partialStorage: PartialStorage,\r\n  callback?: () => void\r\n) {\r\n  chrome.storage.local.set(partialStorage, callback);\r\n}\r\n","import { ShowData } from \"@/types\";\r\nimport { Command } from \"@/configuration\";\r\n\r\n//向前端发送消息的函数\r\nexport async function postFrontend(command: Command.ShowIframe): Promise<void>;\r\nexport async function postFrontend(\r\n  command: Command.OpenSearchBox\r\n): Promise<void>;\r\nexport async function postFrontend(\r\n  command: Command.ShowInjectTranslation,\r\n  data: Required<ShowData>\r\n): Promise<void>;\r\nexport async function postFrontend(\r\n  command: Command,\r\n  data?: any\r\n): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    chrome.tabs.query({ active: true }, function (tabs) {\r\n      tabs.forEach((tab) => {\r\n        if (!tab.id) return;\r\n        chrome.tabs.sendMessage(tab.id, { command, data }, function (response) {\r\n          resolve(response);\r\n        });\r\n      });\r\n    });\r\n  });\r\n}\r\n\r\nexport function executeScript(\r\n  details: chrome.tabs.InjectDetails,\r\n  callback?: ((result: any[]) => void) | undefined\r\n) {\r\n  chrome.tabs.executeScript(details, callback);\r\n}\r\n","import { HotKey } from \"@/types\";\r\n\r\nexport interface CommonConfig {\r\n  tags: string;\r\n  deckName: string;\r\n  modelName: string;\r\n}\r\n\r\nexport interface WordFields {\r\n  en: string;\r\n  am: string;\r\n  word: string;\r\n  am_audio: string;\r\n  en_audio: string;\r\n  definition: string;\r\n  translation: string;\r\n  star_amount: string;\r\n  example_audio: string;\r\n  part_of_speech: string;\r\n  definition_audio: string;\r\n  example_sentence: string;\r\n  example_sentence_translation: string;\r\n}\r\n\r\nexport interface PhraseFields {\r\n  phrase: string;\r\n  phrase_audio: string;\r\n  translations: string;\r\n  example_audio_1: string;\r\n  example_audio_2: string;\r\n  example_audio_3: string;\r\n  example_sentence_1: string;\r\n  example_sentence_2: string;\r\n  example_sentence_3: string;\r\n  example_sentence_translation_1: string;\r\n  example_sentence_translation_2: string;\r\n  example_sentence_translation_3: string;\r\n}\r\n\r\nexport interface SentenceFields {\r\n  sentence: string;\r\n  sentence_audio: string;\r\n  sentence_translation: string;\r\n}\r\n\r\nexport const enum TabPanelName {\r\n  Home,\r\n  Word,\r\n  Phrase,\r\n  Sentence,\r\n}\r\n\r\nexport type WordConfig = Partial<WordFields & CommonConfig>;\r\nexport type PhraseConfig = Partial<PhraseFields & CommonConfig>;\r\nexport type SentenceConfig = Partial<SentenceFields & CommonConfig>;\r\nexport type ConfigKeys =\r\n  | keyof WordConfig\r\n  | keyof PhraseConfig\r\n  | keyof SentenceConfig;\r\n\r\nexport type CheckWordDuplicate = Partial<\r\n  Record<keyof Omit<WordConfig, \"tags\">, boolean>\r\n>;\r\nexport type CheckPhraseDuplicate = Partial<\r\n  Record<keyof Omit<PhraseConfig, \"tags\">, boolean>\r\n>;\r\nexport type CheckSentenceDuplicate = Partial<\r\n  Record<keyof Omit<SentenceConfig, \"tags\">, boolean>\r\n>;\r\n\r\nexport type DuplicateConfigKeys =\r\n  | keyof CheckWordDuplicate\r\n  | keyof CheckPhraseDuplicate\r\n  | keyof CheckSentenceDuplicate;\r\n\r\nexport type ModelFields =\r\n  | Partial<WordFields>\r\n  | Partial<PhraseFields>\r\n  | Partial<SentenceFields>;\r\n\r\nexport interface Storage {\r\n  switchHotkeyAndSelectionListener: boolean;\r\n  openSelection: boolean;\r\n  hiddenChinese: boolean;\r\n  ankiConnectionURL: string;\r\n  hotKey: HotKey;\r\n  ankiConnectionMethod: string;\r\n  checkedTabPanel: TabPanelName;\r\n  wordConfig: WordConfig;\r\n  phraseConfig: PhraseConfig;\r\n  sentenceConfig: SentenceConfig;\r\n  checkWordDuplicate: CheckWordDuplicate;\r\n  checkPhraseDuplicate: CheckPhraseDuplicate;\r\n  checkSentenceDuplicate: CheckSentenceDuplicate;\r\n  switchStrengthenSelectionByPressedCtrl: boolean;\r\n}\r\n\r\nexport type PartialStorage = Partial<Storage>;\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe23',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20f0',\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboMarksRange + rsComboSymbolsRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsLowerMisc = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsUpperMisc = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptLowerContr = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptUpperContr = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptLowerContr + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsUpperMisc + '+' + rsOptUpperContr + '(?=' + [rsBreak, rsUpper + rsLowerMisc, '$'].join('|') + ')',\n  rsUpper + '?' + rsLowerMisc + '+' + rsOptLowerContr,\n  rsUpper + '+' + rsOptUpperContr,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 'ss'\n};\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\n/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('déjà vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\n/**\n * Converts `string`, as space separated words, to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the lower cased string.\n * @example\n *\n * _.lowerCase('--Foo-Bar--');\n * // => 'foo bar'\n *\n * _.lowerCase('fooBar');\n * // => 'foo bar'\n *\n * _.lowerCase('__FOO_BAR__');\n * // => 'foo bar'\n */\nvar lowerCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toLowerCase();\n});\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nmodule.exports = lowerCase;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\n/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a cache value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeMax = Math.max;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Creates an array of the own and inherited enumerable symbol properties\n * of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable string keyed properties of `object` that are\n * not omitted.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = baseRest(function(object, props) {\n  if (object == null) {\n    return {};\n  }\n  props = arrayMap(baseFlatten(props, 1), toKey);\n  return basePick(object, baseDifference(getAllKeysIn(object), props));\n});\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = omit;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return basePickBy(object, props, function(value, key) {\n    return key in object;\n  });\n}\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property identifiers to pick from.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, props, predicate) {\n  var index = -1,\n      length = props.length,\n      result = {};\n\n  while (++index < length) {\n    var key = props[index],\n        value = object[key];\n\n    if (predicate(value, key)) {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property identifiers to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = baseRest(function(object, props) {\n  return object == null ? {} : basePick(object, arrayMap(baseFlatten(props, 1), toKey));\n});\n\nmodule.exports = pick;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { AnkiConnection } from \"@/anki\";\r\nimport { Command } from \"@/configuration\";\r\nimport { Collins_en_cn } from \"@/dictionary\";\r\nimport {\r\n  onCommand,\r\n  onMessage,\r\n  setStorage,\r\n  postFrontend,\r\n  setBadgeText,\r\n  executeScript,\r\n  onStorageChange,\r\n  getStorageByObject,\r\n  addContextMenuItem,\r\n  onContextMenuClick,\r\n} from \"@/extensions-api\";\r\n//获取词典\r\nconst collins = new Collins_en_cn();\r\n//获取anki\r\nconst anki = new AnkiConnection();\r\n\r\n//初始化isOpen标识文本\r\ngetStorageByObject({\r\n  switchHotkeyAndSelectionListener(value) {\r\n    switchBadgeText(value);\r\n  },\r\n});\r\nonStorageChange({\r\n  switchHotkeyAndSelectionListener(_, value) {\r\n    return switchBadgeText(value);\r\n  },\r\n});\r\n\r\n//监听用户快捷键，用于开关拓展\r\nonCommand({\r\n  switch_hotkey_and_selection_listener() {\r\n    getStorageByObject({\r\n      switchHotkeyAndSelectionListener(_isOpen) {\r\n        return setStorage({\r\n          switchHotkeyAndSelectionListener: !_isOpen,\r\n        });\r\n      },\r\n    });\r\n  },\r\n  show_translation_page() {\r\n    postFrontend(Command.ShowIframe);\r\n  },\r\n  open_search_box() {\r\n    return postFrontend(Command.OpenSearchBox);\r\n  },\r\n});\r\n\r\n//在鼠标右键菜单中添加一项 “注入翻译助手” 的选项，\r\n//并在其点击后注入相应脚本，使其能够通过划词进行翻译\r\naddContextMenuItem(\r\n  {\r\n    contexts: [\"frame\"],\r\n    title: \"注入翻译助手\",\r\n  },\r\n  function () {\r\n    //避免重复注入脚本\r\n    const injectedFrames: number[] = [];\r\n    //监听注入划词助手栏目的点击\r\n    onContextMenuClick(function (info) {\r\n      const frameId = info.frameId;\r\n      if (!frameId) {\r\n        console.error(new Error(\"info.frameId is undefined\"));\r\n        return;\r\n      }\r\n      if (injectedFrames.includes(frameId)) return;\r\n      injectedFrames.push(frameId);\r\n      executeScript({\r\n        frameId: info.frameId,\r\n        file: \"/injectScript.js\",\r\n      });\r\n    });\r\n  }\r\n);\r\n//监听所有发送到后端的请求，并进行处理\r\nonMessage(async ({ command, data, sendResponse }) => {\r\n  switch (command) {\r\n    case Command.TranslateText: {\r\n      const response = await collins.translate(data);\r\n      sendResponse(response);\r\n      break;\r\n    }\r\n    case Command.TranslateInjectText: {\r\n      const response = await collins.translate(data.text);\r\n      postFrontend(Command.ShowInjectTranslation, {\r\n        translatedData: response,\r\n        point: data.point,\r\n      });\r\n      break;\r\n    }\r\n    case Command.AddNote: {\r\n      const response = await anki.addNote(data);\r\n      sendResponse(response);\r\n      break;\r\n    }\r\n    case Command.RelearnNote: {\r\n      const response = await anki.relearnCards(data);\r\n      sendResponse(response);\r\n      break;\r\n    }\r\n    case Command.GetDeckNames: {\r\n      const response = await anki.getDeckNames();\r\n      sendResponse(response);\r\n      break;\r\n    }\r\n    case Command.GetModelNames: {\r\n      const response = await anki.getModelNames();\r\n      sendResponse(response);\r\n      break;\r\n    }\r\n    case Command.GetVersion: {\r\n      const response = await anki.getVersion();\r\n      sendResponse(response);\r\n      break;\r\n    }\r\n    case Command.GetModelFieldNames: {\r\n      const response = await anki.getModelFieldNames(data);\r\n      sendResponse(response);\r\n      break;\r\n    }\r\n    default:\r\n      throw new Error(\"存在未处理的指令:\" + command);\r\n  }\r\n});\r\n\r\nfunction switchBadgeText(isOpen: boolean) {\r\n  isOpen\r\n    ? setBadgeText({\r\n        text: \"\",\r\n      })\r\n    : setBadgeText({\r\n        text: \"off\",\r\n      });\r\n}\r\n"],"names":["omit","getStorageByArray","onStorageChange","isAnkiResponse","createDuplicateResponse","createForgottenResponse","createAnkiErrorResponse","createOldVersionResponse","createSuccessAnkiResponse","createConfigErrorResponse","createDisconnectionResponse","createFirstAddSuccessResponse","createUnexpectedErrorResponse","getConfigName","getMediaFields","getNotMediaFields","getDuplicateConfigName","NoteType","Action","AnkiConnection","version","ankiConfig","config","updateAnkiConfig","wordConfig","_","phraseConfig","sentenceConfig","ankiConnectionURL","checkPhraseDuplicate","checkSentenceDuplicate","checkWordDuplicate","addNote","_addErrorCatch","_addNote","getVersion","_getVersion","getDeckNames","_getDeckNames","relearnCards","_relearnCards","getModelNames","_getModelNames","getModelFieldNames","_getModelFieldNames","executor","args","result","apply","e","console","error","Error","data","type","Word","Phrase","Sentence","_testSecurity","note","_formatData","_handleDuplicate","configName","deckName","deckNames","includes","modelName","modelNames","modelFieldNames","fieldNames","Object","values","isEmpty","every","val","includesAll","duplicateConfigName","duplicateConfig","query","entries","reduce","key","fieldName","content","cardIds","_findCards","length","cardId","_request","AddNote","FindCards","cards","RelearnCards","ModelNames","DeckNames","ModelFieldNames","Version","tags","audio","fields","trim","split","options","allowDuplicate","duplicateScope","duplicateScopeOptions","checkChildren","checkAllModels","action","params","Promise","resolve","reject","xhr","XMLHttpRequest","addEventListener","response","JSON","parse","responseText","getOwnPropertyNames","prototype","hasOwnProperty","call","open","send","stringify","AnkiResponseStatus","COMMON_CONFIG_MAP","createAnkiResponse","assign","__isAnkiResponse__","target","message","status","Success","Disconnect","Forgotten","Duplicate","FirstAddSuccess","ConfigError","OldVersion","UnexpectedError","configNames","getMediaNames","wordMedias","phraseMedias","sentenceMedias","mediaNames","modelFieldsMap","field","url","push","filename","encodeURIComponent","fieldKey","fieldValue","Command","WORD_FIELDS_MAP","PHRASE_FIELDS_MAP","SENTENCE_FIELDS_MAP","ANKI_CONNECTION_MAP","DEFAULT_ANKI_CONNECTION_URL","definition","word","translation","part_of_speech","definition_audio","am","en","am_audio","en_audio","star_amount","example_audio","example_sentence","example_sentence_translation","phrase","phrase_audio","translations","example_audio_1","example_audio_2","example_audio_3","example_sentence_1","example_sentence_2","example_sentence_3","example_sentence_translation_1","example_sentence_translation_2","example_sentence_translation_3","sentence","sentence_audio","sentence_translation","ankiConnectionMethod","freeze","lowerCase","Cache","isErrorData","createCacography","createNoCacheError","translateWord","translatePhrase","translateSentence","Collins_en_cn","cacheAmount","cache","text","get","translationResult","translateText","queryText","set","input","abort","searchURL","responseType","timeout","statusText","dom","getPageDOM","test","translatePhraseAndSentence","handleNotFound","err","translatedPhrase","translatedSentence","possibleSpelling","getCorrectSpelling","inferCorrects","querySelectorAll","acc","node","textContent","getOriginText","getTranslation","example_sentences","getPhraseExamples","querySelector","firstElementChild","ul","liNodes","children","Array","from","li","pNodes","example_sentence_origin","childNodes","nodeName","nodeType","sentenceNode","transNode","Number","className","match","phonetic","getPhonetic","translationList","getTranslationList","formatTranslations","replace","lis","textResult","getTranslationText","index","slice","definition_origin","getPartOfSpeech","getExampleSentences","targetNode","pNode","nodes","filter","classList","contains","forEach","search","reg","div_example_s","exampleSentences","div","formated","cur","point","indexOf","oldArray","newArray","isWordData","isPhraseData","isSentenceData","max","map","Map","value","size","keys","next","typeOf","thing","createErrorData","setBadgeText","details","callback","chrome","browserAction","onCommand","handlerObject","commands","addListener","command","handler","StrictOnCommand","runtime","getManifest","commandNames","addContextMenuItem","createProperties","contextMenus","create","onContextMenuClick","onClicked","getStorageByObject","setStorage","executeScript","postFrontend","postBackend","onMessage","getURL","openOptionsPage","TabPanelName","name","sendMessage","sender","_sendResponse","called","sendResponse","then","pick","defaultStorage","switchHotkeyAndSelectionListener","hotKey","openSelection","hiddenChinese","checkedTabPanel","Home","switchStrengthenSelectionByPressedCtrl","handlersIsArray","handlers","isArray","getStorage","storageKeys","storage","local","cacheValue","names","listener","changes","oldValue","newValue","onChanged","removeListener","partialStorage","tabs","active","tab","id","collins","anki","switchBadgeText","switch_hotkey_and_selection_listener","_isOpen","show_translation_page","ShowIframe","open_search_box","OpenSearchBox","contexts","title","injectedFrames","info","frameId","file","TranslateText","translate","TranslateInjectText","ShowInjectTranslation","translatedData","RelearnNote","GetDeckNames","GetModelNames","GetVersion","GetModelFieldNames","isOpen"],"sourceRoot":""}